export const id=33e3;export const ids=[33e3];export const modules={68009:(e,i,t)=>{t.d(i,{A:()=>o});t(253),t(54846),t(16891);function o(e){if(!e||"object"!=typeof e)return e;if("[object Date]"==Object.prototype.toString.call(e))return new Date(e.getTime());if(Array.isArray(e))return e.map(o);var i={};return Object.keys(e).forEach((function(t){i[t]=o(e[t])})),i}},42072:(e,i,t)=>{t(253),t(54846),e.exports=function e(i){return Object.freeze(i),Object.getOwnPropertyNames(i).forEach((function(t){!i.hasOwnProperty(t)||null===i[t]||"object"!=typeof i[t]&&"function"!=typeof i[t]||Object.isFrozen(i[t])||e(i[t])})),i}},32920:(e,i,t)=>{t.d(i,{l:()=>o});const o=async e=>{if(navigator.clipboard)try{return void await navigator.clipboard.writeText(e)}catch{}const i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)}},31979:(e,i,t)=>{var o=t(36312),a=t(68689),r=(t(89655),t(16891),t(15112)),s=t(77706),d=t(94100),n=t(34897),l=t(79051);t(20144);const c={key:"Mod-s",run:e=>((0,n.r)(e.dom,"editor-save"),!0)},h=e=>{const i=document.createElement("ha-icon");return i.icon=e.label,i};(0,o.A)([(0,s.EM)("ha-code-editor")],(function(e,i){class o extends i{constructor(...i){super(...i),e(this)}}return{F:o,d:[{kind:"field",key:"codemirror",value:void 0},{kind:"field",decorators:[(0,s.MZ)()],key:"mode",value:()=>"yaml"},{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"autofocus",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"readOnly",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"linewrap",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,attribute:"autocomplete-entities"})],key:"autocompleteEntities",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean,attribute:"autocomplete-icons"})],key:"autocompleteIcons",value:()=>!1},{kind:"field",decorators:[(0,s.MZ)({type:Boolean})],key:"error",value:()=>!1},{kind:"field",decorators:[(0,s.wk)()],key:"_value",value:()=>""},{kind:"field",key:"_loadedCodeMirror",value:void 0},{kind:"field",key:"_iconList",value:void 0},{kind:"set",key:"value",value:function(e){this._value=e}},{kind:"get",key:"value",value:function(){return this.codemirror?this.codemirror.state.doc.toString():this._value}},{kind:"get",key:"hasComments",value:function(){if(!this.codemirror||!this._loadedCodeMirror)return!1;const e=this._loadedCodeMirror.highlightingFor(this.codemirror.state,[this._loadedCodeMirror.tags.comment]);return!!this.renderRoot.querySelector(`span.${e}`)}},{kind:"method",key:"connectedCallback",value:function(){(0,a.A)(o,"connectedCallback",this,3)([]),this.hasUpdated&&this.requestUpdate(),this.addEventListener("keydown",l.d),this.codemirror&&!1!==this.autofocus&&this.codemirror.focus()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)(o,"disconnectedCallback",this,3)([]),this.removeEventListener("keydown",l.d),this.updateComplete.then((()=>{this.codemirror.destroy(),delete this.codemirror}))}},{kind:"method",key:"scheduleUpdate",value:async function(){this._loadedCodeMirror??=await Promise.all([t.e(61060),t.e(96087),t.e(7746),t.e(61449)]).then(t.bind(t,61449)),(0,a.A)(o,"scheduleUpdate",this,3)([])}},{kind:"method",key:"update",value:function(e){if((0,a.A)(o,"update",this,3)([e]),!this.codemirror)return void this._createCodeMirror();const i=[];e.has("mode")&&i.push({effects:this._loadedCodeMirror.langCompartment.reconfigure(this._mode)}),e.has("readOnly")&&i.push({effects:this._loadedCodeMirror.readonlyCompartment.reconfigure(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly))}),e.has("linewrap")&&i.push({effects:this._loadedCodeMirror.linewrapCompartment.reconfigure(this.linewrap?this._loadedCodeMirror.EditorView.lineWrapping:[])}),e.has("_value")&&this._value!==this.value&&i.push({changes:{from:0,to:this.codemirror.state.doc.length,insert:this._value}}),i.length>0&&this.codemirror.dispatch(...i),e.has("error")&&this.classList.toggle("error-state",this.error)}},{kind:"get",key:"_mode",value:function(){return this._loadedCodeMirror.langs[this.mode]}},{kind:"method",key:"_createCodeMirror",value:function(){if(!this._loadedCodeMirror)throw new Error("Cannot create editor before CodeMirror is loaded");const e=[this._loadedCodeMirror.lineNumbers(),this._loadedCodeMirror.history(),this._loadedCodeMirror.drawSelection(),this._loadedCodeMirror.EditorState.allowMultipleSelections.of(!0),this._loadedCodeMirror.rectangularSelection(),this._loadedCodeMirror.crosshairCursor(),this._loadedCodeMirror.highlightSelectionMatches(),this._loadedCodeMirror.highlightActiveLine(),this._loadedCodeMirror.keymap.of([...this._loadedCodeMirror.defaultKeymap,...this._loadedCodeMirror.searchKeymap,...this._loadedCodeMirror.historyKeymap,...this._loadedCodeMirror.tabKeyBindings,c]),this._loadedCodeMirror.langCompartment.of(this._mode),this._loadedCodeMirror.haTheme,this._loadedCodeMirror.haSyntaxHighlighting,this._loadedCodeMirror.readonlyCompartment.of(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly)),this._loadedCodeMirror.linewrapCompartment.of(this.linewrap?this._loadedCodeMirror.EditorView.lineWrapping:[]),this._loadedCodeMirror.EditorView.updateListener.of(this._onUpdate)];if(!this.readOnly){const i=[];this.autocompleteEntities&&this.hass&&i.push(this._entityCompletions.bind(this)),this.autocompleteIcons&&i.push(this._mdiCompletions.bind(this)),i.length>0&&e.push(this._loadedCodeMirror.autocompletion({override:i,maxRenderedOptions:10}))}this.codemirror=new this._loadedCodeMirror.EditorView({state:this._loadedCodeMirror.EditorState.create({doc:this._value,extensions:e}),parent:this.renderRoot})}},{kind:"field",key:"_getStates",value:()=>(0,d.A)((e=>{if(!e)return[];return Object.keys(e).map((i=>({type:"variable",label:i,detail:e[i].attributes.friendly_name,info:`State: ${e[i].state}`})))}))},{kind:"method",key:"_entityCompletions",value:function(e){const i=e.matchBefore(/[a-z_]{3,}\.\w*/);if(!i||i.from===i.to&&!e.explicit)return null;const t=this._getStates(this.hass.states);return t&&t.length?{from:Number(i.from),options:t,validFor:/^[a-z_]{3,}\.\w*$/}:null}},{kind:"field",key:"_getIconItems",value(){return async()=>{if(!this._iconList){let e;e=(await t.e(25143).then(t.t.bind(t,25143,19))).default,this._iconList=e.map((e=>({type:"variable",label:`mdi:${e.name}`,detail:e.keywords.join(", "),info:h})))}return this._iconList}}},{kind:"method",key:"_mdiCompletions",value:async function(e){const i=e.matchBefore(/mdi:\S*/);if(!i||i.from===i.to&&!e.explicit)return null;const t=await this._getIconItems();return{from:Number(i.from),options:t,validFor:/^mdi:\S*$/}}},{kind:"field",key:"_onUpdate",value(){return e=>{e.docChanged&&(this._value=e.state.doc.toString(),(0,n.r)(this,"value-changed",{value:this._value}))}}},{kind:"get",static:!0,key:"styles",value:function(){return r.AH`:host(.error-state) .cm-gutters{border-color:var(--error-state-color,red)}`}}]}}),r.mN)},57641:(e,i,t)=>{var o=t(36312),a=t(68689),r=t(51431),s=t(15112),d=t(77706),n=t(34897),l=t(55321),c=(t(31979),t(18589)),h=t(32920);(0,o.A)([(0,d.EM)("ha-yaml-editor")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"yamlSchema",value:()=>r.DEFAULT_SCHEMA},{kind:"field",decorators:[(0,d.MZ)()],key:"defaultValue",value:void 0},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"isValid",value:()=>!0},{kind:"field",decorators:[(0,d.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"autoUpdate",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"readOnly",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"copyClipboard",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"hasExtraActions",value:()=>!1},{kind:"field",decorators:[(0,d.wk)()],key:"_yaml",value:()=>""},{kind:"method",key:"setValue",value:function(e){try{this._yaml=e&&!(e=>{if("object"!=typeof e)return!1;for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i))return!1;return!0})(e)?(0,r.dump)(e,{schema:this.yamlSchema,quotingType:'"',noRefs:!0}):""}catch(i){console.error(i,e),alert(`There was an error converting to YAML: ${i}`)}}},{kind:"method",key:"firstUpdated",value:function(){this.defaultValue&&this.setValue(this.defaultValue)}},{kind:"method",key:"willUpdate",value:function(e){(0,a.A)(t,"willUpdate",this,3)([e]),this.autoUpdate&&e.has("value")&&this.setValue(this.value)}},{kind:"method",key:"render",value:function(){return void 0===this._yaml?s.s6:s.qy` ${this.label?s.qy`<p>${this.label}${this.required?" *":""}</p>`:""} <ha-code-editor .hass="${this.hass}" .value="${this._yaml}" .readOnly="${this.readOnly}" mode="yaml" autocomplete-entities autocomplete-icons .error="${!1===this.isValid}" @value-changed="${this._onChange}" dir="ltr"></ha-code-editor> ${this.copyClipboard||this.hasExtraActions?s.qy`<div class="card-actions"> ${this.copyClipboard?s.qy` <mwc-button @click="${this._copyYaml}"> ${this.hass.localize("ui.components.yaml-editor.copy_to_clipboard")} </mwc-button>`:s.s6} <slot name="extra-actions"></slot> </div>`:s.s6} `}},{kind:"method",key:"_onChange",value:function(e){let i;e.stopPropagation(),this._yaml=e.detail.value;let t=!0;if(this._yaml)try{i=(0,r.load)(this._yaml,{schema:this.yamlSchema})}catch(e){t=!1}else i={};this.value=i,this.isValid=t,(0,n.r)(this,"value-changed",{value:i,isValid:t})}},{kind:"get",key:"yaml",value:function(){return this._yaml}},{kind:"method",key:"_copyYaml",value:async function(){this.yaml&&(await(0,h.l)(this.yaml),(0,c.P)(this,{message:this.hass.localize("ui.common.copied_clipboard")}))}},{kind:"get",static:!0,key:"styles",value:function(){return[l.RF,s.AH`.card-actions{border-radius:var(--actions-border-radius,0px 0px var(--ha-card-border-radius,12px) var(--ha-card-border-radius,12px));border:1px solid var(--divider-color);padding:5px 16px}ha-code-editor{flex-grow:1}`]}}]}}),s.WF)},80675:(e,i,t)=>{t.a(e,(async(e,o)=>{try{t.r(i),t.d(i,{HuiDialogSuggestCard:()=>k});var a=t(36312),r=(t(16891),t(42072)),s=t.n(r),d=t(15112),n=t(77706),l=t(34897),c=(t(57641),t(57198)),h=t(55321),u=t(50157),m=t(26566),p=t(23754),y=t(14182),f=t(57898),v=t(90976),_=e([m,f]);[m,f]=_.then?(await _)():_;let k=(0,a.A)([(0,n.EM)("hui-dialog-suggest-card")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_cardConfig",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_sectionConfig",value:void 0},{kind:"field",decorators:[(0,n.wk)()],key:"_saving",value:()=>!1},{kind:"field",decorators:[(0,n.P)("ha-yaml-editor")],key:"_yamlEditor",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._cardConfig=e.cardConfig,this._sectionConfig=e.sectionConfig,Object.isFrozen(this._cardConfig)||(this._cardConfig=s()(this._cardConfig)),Object.isFrozen(this._sectionConfig)||(this._sectionConfig=s()(this._sectionConfig)),this._yamlEditor&&this._yamlEditor.setValue(this._cardConfig)}},{kind:"method",key:"closeDialog",value:function(){this._params=void 0,this._cardConfig=void 0,(0,l.r)(this,"dialog-closed",{dialog:this.localName})}},{kind:"get",key:"_viewSupportsSection",value:function(){if(!this._params?.lovelaceConfig||!this._params?.path)return!1;const{viewIndex:e}=(0,y.$P)(this._params.path),i=this._params.lovelaceConfig.views[e];return!(0,c.R)(i)&&"sections"===i.type}},{kind:"method",key:"_renderPreview",value:function(){return this._sectionConfig&&this._viewSupportsSection?d.qy` <div class="element-preview"> <hui-section .hass="${this.hass}" .config="${this._sectionConfig}" preview></hui-section> </div> `:this._cardConfig?d.qy` <div class="element-preview"> ${this._cardConfig.map((e=>d.qy` <hui-card .hass="${this.hass}" .config="${e}" preview></hui-card> `))} </div> `:d.s6}},{kind:"method",key:"render",value:function(){return this._params?d.qy` <ha-dialog open scrimClickAction @closed="${this.closeDialog}" .heading="${this.hass.localize("ui.panel.lovelace.editor.suggest_card.header")}"> <div> ${this._renderPreview()} ${this._params.yaml&&this._cardConfig?d.qy` <div class="editor"> <ha-yaml-editor .hass="${this.hass}" .defaultValue="${this._cardConfig}"></ha-yaml-editor> </div> `:d.s6} </div> <mwc-button slot="secondaryAction" @click="${this.closeDialog}" dialogInitialFocus> ${this._params.yaml?this.hass.localize("ui.common.close"):this.hass.localize("ui.common.cancel")} </mwc-button> ${this._params.yaml?d.s6:d.qy` ${this._sectionConfig&&this._viewSupportsSection?d.s6:d.qy` <mwc-button slot="primaryAction" @click="${this._pickCard}"> ${this.hass.localize("ui.panel.lovelace.editor.suggest_card.create_own")} </mwc-button> `} <mwc-button slot="primaryAction" .disabled="${this._saving}" @click="${this._save}"> ${this._saving?d.qy` <ha-circular-progress indeterminate aria-label="Saving" size="small"></ha-circular-progress> `:this.hass.localize("ui.panel.lovelace.editor.suggest_card.add")} </mwc-button> `} </ha-dialog> `:d.s6}},{kind:"get",static:!0,key:"styles",value:function(){return[h.nA,d.AH`@media all and (max-width:450px),all and (max-height:500px){ha-dialog{max-height:100%;height:100%}}@media all and (min-width:850px){ha-dialog{width:845px}}ha-dialog{max-width:845px;--dialog-z-index:6}.hidden{display:none}.element-preview{position:relative}hui-card,hui-section{padding-top:8px;margin:4px auto;max-width:390px;display:block;width:100%}.editor{padding-top:16px}`]}},{kind:"method",key:"_pickCard",value:function(){this._params?.lovelaceConfig&&this._params?.path&&this._params?.saveConfig&&((0,v.u)(this,{lovelaceConfig:this._params.lovelaceConfig,saveConfig:this._params.saveConfig,path:this._params.path,entities:this._params.entities}),this.closeDialog())}},{kind:"method",key:"_computeNewConfig",value:function(e,i){if(!this._viewSupportsSection)return(0,p.DU)(e,i,this._cardConfig);const{viewIndex:t,sectionIndex:o}=(0,y.$P)(i);if(void 0===o){const i=this._sectionConfig??{type:"grid",cards:this._cardConfig};return(0,p.Bn)(e,t,i)}const a=this._sectionConfig?this._sectionConfig.cards||[]:this._cardConfig;return(0,p.DU)(e,[t,o],a)}},{kind:"method",key:"_save",value:async function(){if(!(this._params?.lovelaceConfig&&this._params?.path&&this._params?.saveConfig&&this._cardConfig))return;this._saving=!0;const e=this._computeNewConfig(this._params.lovelaceConfig,this._params.path);await this._params.saveConfig(e),this._saving=!1,(0,u.f)(this,this.hass),this.closeDialog()}}]}}),d.WF);o()}catch(e){o(e)}}))},50157:(e,i,t)=>{t.d(i,{f:()=>a});var o=t(18589);const a=(e,i)=>(0,o.P)(e,{message:i.localize("ui.common.successfully_saved")})}};
//# sourceMappingURL=33000._yHqcuQRK7Q.js.map