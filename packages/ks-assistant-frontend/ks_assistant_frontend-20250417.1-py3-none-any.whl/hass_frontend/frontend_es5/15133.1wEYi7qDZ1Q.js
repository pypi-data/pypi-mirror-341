"use strict";(self.webpackChunkks_assistant_frontend=self.webpackChunkks_assistant_frontend||[]).push([[15133,70511],{99890:function(n,e,t){t.d(e,{g:function(){return r}});t(82386),t(36604);var r=function(n){return function(e,t){return n.includes(e,t)}}},81771:function(n,e,t){t.d(e,{$W:function(){return d},Dp:function(){return y},EC:function(){return a},HB:function(){return g},S9:function(){return h},XF:function(){return c},b1:function(){return p},bV:function(){return u},lB:function(){return s},lg:function(){return l},mX:function(){return v},oj:function(){return f},rY:function(){return m},vH:function(){return _}});t(26098);var r,i=t(16312),o=t(55979),a="single",u=10,c=function(n){if("condition"in n&&Array.isArray(n.condition))return{condition:"and",conditions:n.condition};for(var e=0,t=["and","or","not"];e<t.length;e++){var r=t[e];if(r in n)return{condition:r,conditions:n[r]}}return n},s=function(n,e){n.callService("automation","trigger",{entity_id:e,skip_condition:!0})},l=function(n,e){return n.callApi("DELETE","config/automation/config/".concat(e))},f=function(n,e){return n.callApi("GET","config/automation/config/".concat(e))},d=function(n,e){return n.callWS({type:"automation/config",entity_id:e})},p=function(n,e,t){return n.callApi("POST","config/automation/config/".concat(e),t)},g=function(n){for(var e=0,t=["trigger","condition","action"];e<t.length;e++){var r=t[e],i=n[r];i&&!Array.isArray(i)&&(n[r]=[i])}return n.action&&(n.action=(0,o.Rn)(n.action)),n},v=function(n){r=n,(0,i.o)("/config/automation/edit/new")},_=function(n){v(Object.assign(Object.assign({},n),{},{id:void 0,alias:void 0}))},m=function(){var n=r;return r=void 0,n},y=function(n,e,t,r){return n.connection.subscribeMessage(e,{type:"subscribe_trigger",trigger:t,variables:r})},h=function(n,e,t){return n.callWS({type:"test_condition",condition:e,variables:t})}},55979:function(n,e,t){t.d(e,{AM:function(){return b},BD:function(){return p},FN:function(){return s},Ht:function(){return y},Iq:function(){return l},Kq:function(){return h},NX:function(){return Y},Q2:function(){return m},R$:function(){return q},Rn:function(){return w},TP:function(){return j},kR:function(){return _},pq:function(){return k}});var r,i=t(64782),o=(t(97741),t(10507),t(39790),t(64498),t(16891),t(66419)),a=t(99890),u=t(16312),c=t(59780),s=["single","restart","queued","parallel"],l=(0,a.g)(["queued","parallel"]),f=(0,o.Ik)({alias:(0,o.lq)((0,o.Yj)()),continue_on_error:(0,o.lq)((0,o.zM)()),enabled:(0,o.lq)((0,o.zM)())}),d=(0,o.Ik)({entity_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),device_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),area_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),floor_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())])),label_id:(0,o.lq)((0,o.KC)([(0,o.Yj)(),(0,o.YO)((0,o.Yj)())]))}),p=(0,o.kp)(f,(0,o.Ik)({action:(0,o.lq)((0,o.Yj)()),service_template:(0,o.lq)((0,o.Yj)()),entity_id:(0,o.lq)((0,o.Yj)()),target:(0,o.lq)(d),data:(0,o.lq)((0,o.Ik)()),response_variable:(0,o.lq)((0,o.Yj)()),metadata:(0,o.lq)((0,o.Ik)())})),g=(0,o.kp)(f,(0,o.Ik)({action:(0,o.eu)("media_player.play_media"),target:(0,o.lq)((0,o.Ik)({entity_id:(0,o.lq)((0,o.Yj)())})),entity_id:(0,o.lq)((0,o.Yj)()),data:(0,o.Ik)({media_content_id:(0,o.Yj)(),media_content_type:(0,o.Yj)()}),metadata:(0,o.Ik)()})),v=(0,o.kp)(f,(0,o.Ik)({action:(0,o.eu)("scene.turn_on"),target:(0,o.lq)((0,o.Ik)({entity_id:(0,o.lq)((0,o.Yj)())})),entity_id:(0,o.lq)((0,o.Yj)()),metadata:(0,o.Ik)()})),_=function(n,e,t){return n.callService("script",e,t)},m=function(n){return"off"===n.state||!!("on"===n.state&&l(n.attributes.mode)&&n.attributes.current<n.attributes.max)},y=function(n,e){return n.callApi("DELETE","config/script/config/".concat(e))},h=function(n,e){return n.callApi("GET","config/script/config/".concat(e))},q=function(n,e){return n.callWS({type:"script/config",entity_id:e})},b=function(n){r=n,(0,u.o)("/config/script/edit/new")},Y=function(){var n=r;return r=void 0,n},k=function(n){if("delay"in n)return"delay";if("wait_template"in n)return"wait_template";if(["condition","and","or","not"].some((function(e){return e in n})))return"check_condition";if("event"in n)return"fire_event";if("device_id"in n)return"device_action";if("scene"in n)return"activate_scene";if("repeat"in n)return"repeat";if("choose"in n)return"choose";if("if"in n)return"if";if("wait_for_trigger"in n)return"wait_for_trigger";if("variables"in n)return"variables";if("stop"in n)return"stop";if("sequence"in n)return"sequence";if("parallel"in n)return"parallel";if("set_conversation_response"in n)return"set_conversation_response";if("action"in n){if("metadata"in n){if((0,o.is)(n,v))return"activate_scene";if((0,o.is)(n,g))return"play_media"}return"service"}return"unknown"},j=function(n,e){var t,r=null===(t=n.services.script[(0,c.Y)(e)])||void 0===t?void 0:t.fields;return void 0!==r&&Object.keys(r).length>0},w=function(n){if(Array.isArray(n))return n.map(w);if("service"in n&&("action"in n||(n.action=n.service),delete n.service),"sequence"in n){var e,t=(0,i.A)(n.sequence);try{for(t.s();!(e=t.n()).done;){var r=e.value;w(r)}}catch(f){t.e(f)}finally{t.f()}}var o=k(n);"parallel"===o&&w(n.parallel);if("choose"===o){var a=n;if(Array.isArray(a.choose)){var u,c=(0,i.A)(a.choose);try{for(c.s();!(u=c.n()).done;){var s=u.value;w(s.sequence)}}catch(f){c.e(f)}finally{c.f()}}else a.choose&&w(a.choose.sequence);a.default&&w(a.default)}"repeat"===o&&w(n.repeat.sequence);if("if"===o){var l=n;w(l.then),l.else&&w(l.else)}return n}},77907:function(n,e,t){t.r(e),t.d(e,{addExternalBarCodeListener:function(){return c},attachExternalToApp:function(){return u}});t(95737),t(39790),t(74268),t(24545),t(51855),t(82130),t(31743),t(22328),t(4959),t(62435),t(99019),t(253),t(54846),t(66555),t(96858);var r=t(34897),i=t(74005),o=t(81771),a=new Set,u=function(n){window.addEventListener("haptic",(function(e){return n.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:e.detail}})})),n.hass.auth.external.addCommandHandler((function(e){return s(n,e)}))},c=function(n){return a.add(n),function(){a.delete(n)}},s=function(n,e){var t=n.hass.auth.external;if("restart"===e.command)n.hass.connection.reconnect(!0),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("notifications/show"===e.command)(0,r.r)(n,"hass-show-notifications"),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===e.command){var u;if(null!==(u=i.G.history.state)&&void 0!==u&&u.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.r)(n,"hass-toggle-menu"),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("sidebar/show"===e.command){var c;if(null!==(c=i.G.history.state)&&void 0!==c&&c.open)return t.fireMessage({id:e.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,r.r)(n,"hass-toggle-menu",{open:!0}),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===e.command){var s;(0,o.mX)(null===(s=e.payload)||void 0===s?void 0:s.config),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}else if("bar_code/scan_result"===e.command)a.forEach((function(n){return n(e)})),t.fireMessage({id:e.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==e.command)return!1;a.forEach((function(n){return n(e)})),t.fireMessage({id:e.id,type:"result",success:!0,result:null})}return!0}},78232:function(n,e,t){var r=t(26887),i=Math.floor;n.exports=Number.isInteger||function(n){return!r(n)&&isFinite(n)&&i(n)===n}},90924:function(n,e,t){var r=t(33616),i=t(53138),o=t(22669),a=RangeError;n.exports=function(n){var e=i(o(this)),t="",u=r(n);if(u<0||u===1/0)throw new a("Wrong number of repetitions");for(;u>0;(u>>>=1)&&(e+=e))1&u&&(t+=e);return t}},63030:function(n,e,t){t(41765)({target:"Number",stat:!0},{isInteger:t(78232)})}}]);
//# sourceMappingURL=15133.1wEYi7qDZ1Q.js.map