"use strict";(self.webpackChunkks_assistant_frontend=self.webpackChunkks_assistant_frontend||[]).push([[45657],{7127:function(e,t,n){n.d(t,{p:function(){return r}});n(81027),n(39805),n(18193),n(92765);var i=[" ",": "],r=function(e,t){for(var n=e.toLowerCase(),r=0,o=i;r<o.length;r++){var s=o[r],u="".concat(t).concat(s);if(n.startsWith(u)){var c=e.substring(u.length);if(c.length)return a(c.substr(0,c.indexOf(" ")))?c:c[0].toUpperCase()+c.slice(1)}}},a=function(e){return e.toLowerCase()!==e}},57273:function(e,t,n){n.d(t,{L:function(){return r},z:function(){return a}});var i=n(99890),r=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],a=(0,i.g)(r)},45657:function(e,t,n){n.d(t,{KT:function(){return b},Bi:function(){return m},ZI:function(){return _},Yp:function(){return w}});var i=n(64782),r=n(658),a=n(41981),o=(n(81027),n(13025),n(44124),n(82386),n(95737),n(97741),n(89655),n(33231),n(54774),n(50693),n(26098),n(99471),n(10507),n(39790),n(9241),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(36604),n(99019),n(79641),n(253),n(2075),n(94438),n(54846),n(16891),n(66555),n(96858),n(94872)),s=n(213),u=n(65459),c=n(19244),l=n(7127),d=n(2682),p=n(96915),f=n(46092),y=n(71443),v=n(57273),h=new Set(["automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone"].concat((0,a.A)(o.gt))),g=new Set(["mobile_app"]),_=function(e,t){return Object.assign({type:"grid",cards:e.map((function(e){return{type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,s.m)(e))||void 0}}))},t)},m=function(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=[],p=[],f=n.title?n.title.toLowerCase():void 0,y=[],v=(0,i.A)(t);try{for(v.s();!(r=v.n()).done;){var h=r.value,g=e[h],_=(0,s.m)(h);if("alarm_control_panel"===_){var b={type:"alarm-panel",entity:h};u.push(b)}else if("camera"===_){var w={type:"picture-entity",entity:h};u.push(w)}else if("image"===_){var E={type:"picture",image_entity:h};u.push(E)}else if("climate"===_){var k,A,j,x={type:"thermostat",entity:h,features:(null!==(k=null===(A=e[h])||void 0===A||null===(A=A.attributes)||void 0===A||null===(A=A.hvac_modes)||void 0===A?void 0:A.length)&&void 0!==k?k:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(j=e[h])||void 0===j||null===(j=j.attributes)||void 0===j?void 0:j.hvac_modes}]:void 0};u.push(x)}else if("humidifier"===_){var C={type:"humidifier",entity:h,features:[{type:"humidifier-toggle"}]};u.push(C)}else if("media_player"===_){var O={type:"media-control",entity:h};u.push(O)}else if("plant"===_){var W={type:"plant-status",entity:h};u.push(W)}else if("weather"===_){var L={type:"weather-forecast",entity:h,show_forecast:!1};u.push(L)}else if(!a||"scene"!==_&&"script"!==_){var S=void 0,z=f&&g&&(S=(0,l.p)((0,c.u)(g),f))?{entity:h,name:S}:h;p.push(z)}else{var I={entity:h,show_icon:!0,show_name:!0},P=void 0;f&&g&&(P=(0,l.p)((0,c.u)(g),f))&&(I.name=P),y.push(I)}}}catch(V){v.e(V)}finally{v.f()}if(p.sort((function(t,n){var i="string"==typeof t?t:t.entity,r="string"==typeof n?n:n.entity,a=o.JF.includes((0,s.m)(i))?"sensor":"control";return a!==(o.JF.includes((0,s.m)(r))?"sensor":"control")?"sensor"===a?1:-1:(0,d.x)("string"==typeof t?e[t]?(0,c.u)(e[t]):"":t.name||"","string"==typeof n?e[n]?(0,c.u)(e[n]):"":n.name||"")})),0===p.length&&y.length>0)return m(e,t,n,!1);if(p.length>0||y.length>0){var U=Object.assign({type:"entities",entities:p},n);y.length>0&&(U.footer={type:"buttons",entities:y}),u.unshift(U)}return u.length<2?u:[{type:"grid",square:!1,columns:1,cards:u}]},b=function(e,t){var n,r=[],a=(0,i.A)(t);try{for(a.s();!(n=a.n()).done;){var o={type:"entity",entity:n.value};r.push(o)}}catch(s){a.e(s)}finally{a.f()}return r},w=function(e,t,n,o,l,_,b,w,E){for(var k,A,j=function(e,t){for(var n={},i=new Set(Object.values(t).filter((function(e){return e.entity_category||e.platform&&g.has(e.platform)||e.hidden})).map((function(e){return e.entity_id}))),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r],s=e[o];h.has((0,u.t)(s))||i.has(s.entity_id)||(n[o]=e[o])}return n}(o,n),x={},C=0,O=Object.keys(j);C<O.length;C++){var W=O[C],L=j[W];L.attributes.order&&(x[W]=L.attributes.order)}var S=function(e,t,n,i){for(var a=Object.assign({},i),o={},s={},u=0,c=Object.values(n);u<c.length;u++){var l,d=c[u],p=d.area_id||d.device_id&&(null===(l=t[d.device_id])||void 0===l?void 0:l.area_id);p&&p in e&&d.entity_id in a?(p in o||(o[p]=[]),o[p].push(a[d.entity_id]),delete a[d.entity_id]):d.device_id&&d.device_id in t&&d.entity_id in a&&(d.device_id in s||(s[d.device_id]=[]),s[d.device_id].push(a[d.entity_id]),delete a[d.entity_id])}for(var f=0,y=Object.entries(s);f<y.length;f++){var v=(0,r.A)(y[f],2),h=v[0],g=v[1];1===g.length&&(a[g[0].entity_id]=g[0],delete s[h])}return{areasWithEntities:o,devicesWithEntities:s,otherEntities:a}}(e,t,n,j);if(null!=b&&b.hidden){var z,I=(0,i.A)(b.hidden);try{for(I.s();!(z=I.n()).done;){var P=z.value;delete S.areasWithEntities[P]}}catch(re){I.e(re)}finally{I.f()}}w&&(S.devicesWithEntities={},S.otherEntities={});var U=function(e){var t=[],n={};return Object.keys(e).forEach((function(i){var r=e[i];"group"===(0,s.m)(i)?t.push(r):n[i]=r})),t.forEach((function(e){return e.attributes.entity_id.forEach((function(e){delete n[e]}))})),{groups:t,ungrouped:n}}(S.otherEntities);U.groups.sort((function(e,t){return x[e.entity_id]-x[t.entity_id]}));var V,q=[],B=(0,i.A)(U.groups);try{for(B.s();!(V=B.n()).done;){var F=V.value;q.push.apply(q,(0,a.A)(m(o,F.attributes.entity_id,{title:(0,c.u)(F),show_header_toggle:"hidden"!==F.attributes.control})))}}catch(re){B.e(re)}finally{B.f()}var J,R=function(e,t,n,r,o){for(var s={},l=0,p=Object.keys(o);l<p.length;l++){var h=p[l],g=o[h],_=(0,u.t)(g);_ in s||(s[_]=[]),s[_].push(g.entity_id)}var b=[];if("person"in s){var w=[];if(1===s.person.length)b.push({type:"entities",entities:s.person});else{var E,k,A="",j=(0,i.A)(s.person);try{for(j.s();!(k=j.n()).done;){var x=k.value,C=o[x],O=C.attributes.entity_picture;if(!O){if(void 0===E){var W=getComputedStyle(document.body);E=encodeURIComponent(W.getPropertyValue("--light-primary-color").trim()),A=encodeURIComponent((W.getPropertyValue("--text-light-primary-color")||W.getPropertyValue("--primary-text-color")).trim())}var L=(0,y._2)(C.attributes.friendly_name||"");O="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:".concat(E,"'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='").concat(A,"' font-size='1.3em' dy='.3em'%3E").concat(L,"%3C/text%3E%3C/g%3E%3C/svg%3E")}w.push({type:"picture-entity",entity:x,aspect_ratio:"1",show_name:!1,image:O})}}catch(re){j.e(re)}finally{j.f()}b.push({type:"grid",square:!0,columns:3,cards:w})}delete s.person}var S,z=[],I=(0,i.A)(v.L);try{for(I.s();!(S=I.n()).done;){var P=S.value;P in s&&(z.push.apply(z,(0,a.A)(s[P])),delete s[P])}}catch(re){I.e(re)}finally{I.f()}for(var U={},V=0,q=Object.keys(s);V<q.length;V++){var B=q[V];U[B]=(0,f.p$)(e,B)}z.length&&(s._helpers=z,U._helpers=e("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(s).sort((function(e,t){return(0,d.x)(U[e],U[t])})).forEach((function(e){b.push.apply(b,(0,a.A)(m(o,s[e].sort((function(e,t){return(0,d.x)((0,c.u)(o[e]),(0,c.u)(o[t]))})),{title:U[e]})))}));var F={path:t,title:n,cards:b};return r&&(F.icon=r),F}(l,"default_view","Home",undefined,U.ungrouped),H=[],K=Object.keys(S.areasWithEntities).sort((0,p.dj)(e,null==b?void 0:b.order)),T=(0,i.A)(K);try{for(T.s();!(J=T.n()).done;){var Y=J.value,Z=S.areasWithEntities[Y],$=e[Y];H.push.apply(H,(0,a.A)(m(o,Z.map((function(e){return e.entity_id})),{title:$.name})))}}catch(re){T.e(re)}finally{T.f()}var D,G,M=[],N=Object.entries(S.devicesWithEntities).sort((function(e,n){var i=t[e[0]],r=t[n[0]];return(0,d.x)(i.name_by_user||i.name||"",r.name_by_user||r.name||"")})),Q=(0,i.A)(N);try{for(Q.s();!(D=Q.n()).done;){var X=(0,r.A)(D.value,2),ee=X[0],te=X[1],ne=t[ee];M.push.apply(M,(0,a.A)(m(o,te.map((function(e){return e.entity_id})),{title:ne.name_by_user||ne.name||l("ui.panel.config.devices.unnamed_device",{type:l("ui.panel.config.devices.type.".concat(ne.entry_type||"device"))})})))}}catch(re){Q.e(re)}finally{Q.f()}if(_&&!E){var ie=_.energy_sources.find((function(e){return"grid"===e.type}));ie&&ie.flow_from.length>0&&(G={title:l("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return(k=R.cards).unshift.apply(k,H.concat(q,(0,a.A)(G?[G]:[]))),(A=R.cards).push.apply(A,M),R}}}]);
//# sourceMappingURL=45657.rFWrPwd5hqA.js.map