"use strict";(self.webpackChunkks_assistant_frontend=self.webpackChunkks_assistant_frontend||[]).push([[29378],{37456:function(e,t,n){n.d(t,{a:function(){return a}});var i=(0,n(58034).n)((function(e){history.replaceState({scrollPosition:e},"")}),300),a=function(e){return function(t){return{kind:"method",placement:"prototype",key:t.key,descriptor:{set:function(e){i(e),this["__".concat(String(t.key))]=e},get:function(){var e;return this["__".concat(String(t.key))]||(null===(e=history.state)||void 0===e?void 0:e.scrollPosition)},enumerable:!0,configurable:!0},finisher:function(n){var i=n.prototype.connectedCallback;n.prototype.connectedCallback=function(){var n=this;i.call(this);var a=this[t.key];a&&this.updateComplete.then((function(){var t=n.renderRoot.querySelector(e);t&&setTimeout((function(){t.scrollTop=a}),0)}))}}}}}},45395:function(e,t,n){var i,a,r,o=n(64599),s=n(35806),c=n(71008),u=n(62193),l=n(2816),d=n(27927),f=n(35890),h=(n(81027),n(46724)),v=n(38973),p=n(29818),y=n(15112),g=n(74005);(0,d.A)([(0,p.EM)("ha-fab")],(function(e,t){var n=function(t){function n(){var t;(0,c.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,u.A)(this,n,[].concat(a)),e(t),t}return(0,l.A)(n,t),(0,s.A)(n)}(t);return{F:n,d:[{kind:"method",key:"firstUpdated",value:function(e){(0,f.A)(n,"firstUpdated",this,3)([e]),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}},{kind:"field",static:!0,key:"styles",value:function(){return[v.R,(0,y.AH)(i||(i=(0,o.A)([":host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}"]))),"rtl"===g.G.document.dir?(0,y.AH)(a||(a=(0,o.A)([":host .mdc-fab--extended .mdc-fab__icon{direction:rtl}"]))):(0,y.AH)(r||(r=(0,o.A)([""])))]}}]}}),h.n)},71443:function(e,t,n){n.d(t,{TK:function(){return u},_2:function(){return d},eR:function(){return o},hG:function(){return l},hU:function(){return s},kg:function(){return c},wj:function(){return r},xg:function(){return f}});var i=n(33994),a=n(22858),r=(n(79243),n(97741),n(89655),n(18193),n(26098),n(79641),n(16891),"system-admin"),o="system-users",s=function(){var e=(0,a.A)((0,i.A)().mark((function e(t){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth/list"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,a.A)((0,i.A)().mark((function e(t,n,a,r){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth/create",name:n,group_ids:a,local_only:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}(),u=function(){var e=(0,a.A)((0,i.A)().mark((function e(t,n,a){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS(Object.assign(Object.assign({},a),{},{type:"config/auth/update",user_id:n})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.A)((0,i.A)().mark((function e(t,n){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.callWS({type:"config/auth/delete",user_id:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(e){return e?e.trim().split(" ").slice(0,3).map((function(e){return e.substring(0,1)})).join(""):"?"},f=function(e,t,n){var i=[],a=function(t){return e.localize("ui.panel.config.users.".concat(t))};return t.is_owner&&i.push(["M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z",a("is_owner")]),n&&t.system_generated&&i.push(["M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z",a("is_system")]),t.local_only&&i.push(["M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14",a("is_local")]),t.is_active||i.push(["M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z",a("is_not_active")]),i}},15625:function(e,t,n){n.d(t,{S_:function(){return s},Xd:function(){return c},lZ:function(){return u}});n(82386),n(95737),n(10507),n(39790),n(74268),n(24545),n(51855),n(82130),n(31743),n(22328),n(4959),n(62435),n(99019),n(253),n(54846),n(66555),n(96858);var i=["zone","persistent_notification"],a=function(e,t){var n,i,a,r,o,s,c,u;if("call-service"===t.action&&(null!==(n=t.target)&&void 0!==n&&n.entity_id||null!==(i=t.service_data)&&void 0!==i&&i.entity_id||null!==(a=t.data)&&void 0!==a&&a.entity_id)){var l=null!==(r=null!==(o=null===(s=t.service_data)||void 0===s?void 0:s.entity_id)&&void 0!==o?o:null===(c=t.data)||void 0===c?void 0:c.entity_id)&&void 0!==r?r:null===(u=t.target)||void 0===u?void 0:u.entity_id;Array.isArray(l)||(l=[l]);for(var d=0,f=l;d<f.length;d++){var h=f[d];e.add(h)}}},r=function(e,t){"string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&a(e,t.tap_action),t.hold_action&&a(e,t.hold_action)):e.add(t)},o=function(e,t){t.entity&&r(e,t.entity),t.entities&&Array.isArray(t.entities)&&t.entities.forEach((function(t){return r(e,t)})),t.card&&o(e,t.card),t.cards&&Array.isArray(t.cards)&&t.cards.forEach((function(t){return o(e,t)})),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((function(t){return o(e,t)})),t.badges&&Array.isArray(t.badges)&&t.badges.forEach((function(t){return r(e,t)}))},s=function(e){var t=new Set;return e.views.forEach((function(e){return o(t,e)})),t},c=function(e,t){for(var n=new Set,a=0,r=Object.keys(e.states);a<r.length;a++){var o=r[a];t.has(o)||i.includes(o.split(".",1)[0])||n.add(o)}return n},u=function(e,t){var n=s(t);return c(e,n)}},4790:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(t,i){var r,o,s,c,u,l,d,f,h,v,p,y,g,m,b,A,k,_,w,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(64599),o=n(35806),s=n(71008),c=n(62193),u=n(2816),l=n(27927),d=n(81027),f=n(50693),h=n(15112),v=n(29818),p=n(94100),y=n(34897),n(28664),n(12675),g=n(13740),!(m=t([g])).then){e.next=26;break}return e.next=22,m;case 22:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=27;break;case 26:e.t0=m;case 27:g=e.t0[0],(0,l.A)([(0,v.EM)("hui-entity-picker-table")],(function(e,t){var n=function(t){function n(){var t;(0,s.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,c.A)(this,n,[].concat(a)),e(t),t}return(0,u.A)(n,t),(0,o.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,v.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,v.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({type:Boolean,attribute:"no-label-float"})],key:"noLabelFloat",value:function(){return!1}},{kind:"field",decorators:[(0,v.MZ)({type:Array})],key:"entities",value:void 0},{kind:"method",key:"render",value:function(){return(0,h.qy)(b||(b=(0,r.A)([' <ha-data-table .hass="','" selectable .id="','" .columns="','" .data="','" .searchLabel="','" .noLabelFloat="','" .noDataText="','" @selection-changed="','"></ha-data-table> '])),this.hass,"entity_id",this._columns(this.narrow),this.entities,this.hass.localize("ui.panel.lovelace.unused_entities.search"),this.noLabelFloat,this.hass.localize("ui.panel.lovelace.unused_entities.no_data"),this._handleSelectionChanged)}},{kind:"field",key:"_columns",value:function(){var e=this;return(0,p.A)((function(t){var n={icon:{title:"",label:e.hass.localize("ui.panel.lovelace.unused_entities.state_icon"),type:"icon",template:function(t){return(0,h.qy)(A||(A=(0,r.A)([' <state-badge @click="','" .hass="','" .stateObj="','"></state-badge> '])),e._handleEntityClicked,e.hass,t.stateObj)}},name:{title:e.hass.localize("ui.panel.lovelace.unused_entities.entity"),sortable:!0,filterable:!0,flex:2,main:!0,direction:"asc",template:function(n){return(0,h.qy)(k||(k=(0,r.A)([' <div @click="','" style="cursor:pointer"> '," "," </div> "])),e._handleEntityClicked,n.name,t?(0,h.qy)(_||(_=(0,r.A)([' <div class="secondary">',"</div> "])),n.entity_id):"")}}};return n.entity_id={title:e.hass.localize("ui.panel.lovelace.unused_entities.entity_id"),sortable:!0,filterable:!0,hidden:t},n.domain={title:e.hass.localize("ui.panel.lovelace.unused_entities.domain"),sortable:!0,filterable:!0,hidden:t},n.last_changed={title:e.hass.localize("ui.panel.lovelace.unused_entities.last_changed"),type:"numeric",sortable:!0,hidden:t,template:function(t){return(0,h.qy)(w||(w=(0,r.A)([' <ha-relative-time .hass="','" .datetime="','" capitalize></ha-relative-time> '])),e.hass,t.last_changed)}},n}))}},{kind:"method",key:"_handleSelectionChanged",value:function(e){var t=e.detail.value;(0,y.r)(this,"selected-changed",{selectedEntities:t})}},{kind:"method",key:"_handleEntityClicked",value:function(e){var t=e.target.closest(".mdc-data-table__row").rowId;(0,y.r)(this,"hass-more-info",{entityId:t})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,h.AH)(E||(E=(0,r.A)(["ha-data-table{--data-table-border-width:0;height:100%}"])))}}]}}),h.WF),i(),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),i(e.t2);case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(t,n){return e.apply(this,arguments)}}())},84048:function(e,t,n){n.d(t,{Q:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),a=function(){return Promise.all([n.e(72915),n.e(24500),n.e(70252),n.e(51431),n.e(91545),n.e(49054),n.e(73767),n.e(81625),n.e(62352),n.e(20181),n.e(65009),n.e(57641),n.e(58991),n.e(33896),n.e(31497),n.e(43594)]).then(n.bind(n,80675))},r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:a,dialogParams:t})}},45111:function(e,t,n){n.d(t,{X:function(){return a}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(34897),a=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:function(){return Promise.all([n.e(10963),n.e(14691),n.e(24500),n.e(3051),n.e(53779)]).then(n.bind(n,53779))},dialogParams:t})}},45559:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(i,r){var o,s,c,u,l,d,f,h,v,p,y,g,m,b,A,k,_,w,E,C,S,x,M,H,L,z,T,V;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.r(t),n.d(t,{HuiUnusedEntities:function(){return V}}),o=n(41981),s=n(64599),c=n(35806),u=n(71008),l=n(62193),d=n(2816),f=n(27927),h=n(35890),v=n(81027),p=n(97741),y=n(33231),g=n(16891),m=n(15112),b=n(29818),A=n(85323),k=n(213),_=n(19244),n(45395),n(88400),w=n(15625),E=n(4790),C=n(84048),S=n(45111),x=n(45657),!(M=i([E])).then){e.next=39;break}return e.next=35,M;case 35:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=40;break;case 39:e.t0=M;case 40:E=e.t0[0],V=(0,f.A)([(0,b.EM)("hui-unused-entities")],(function(e,t){var n=function(t){function n(){var t;(0,u.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,l.A)(this,n,[].concat(a)),e(t),t}return(0,d.A)(n,t),(0,c.A)(n)}(t);return{F:n,d:[{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"lovelace",value:void 0},{kind:"field",decorators:[(0,b.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,b.MZ)({type:Boolean})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,b.wk)()],key:"_unusedEntities",value:function(){return[]}},{kind:"field",decorators:[(0,b.wk)()],key:"_selectedEntities",value:function(){return[]}},{kind:"get",key:"_config",value:function(){return this.lovelace.config}},{kind:"method",key:"updated",value:function(e){(0,h.A)(n,"updated",this,3)([e]),e.has("lovelace")&&this._getUnusedEntities()}},{kind:"method",key:"render",value:function(){var e=this;return this.hass&&this.lovelace?"storage"===this.lovelace.mode&&!1===this.lovelace.editMode?m.s6:(0,m.qy)(H||(H=(0,s.A)([' <div class="container"> ',' <hui-entity-picker-table .hass="','" .narrow="','" .entities="','" @selected-changed="','"></hui-entity-picker-table> </div> <div class="fab ','"> <ha-fab .label="','" extended @click="','"> <ha-svg-icon slot="icon" .path="','"></ha-svg-icon> </ha-fab> </div> '])),this.narrow?"":(0,m.qy)(L||(L=(0,s.A)([' <ha-card header="','"> <div class="card-content"> '," "," </div> </ha-card> "])),this.hass.localize("ui.panel.lovelace.unused_entities.title"),this.hass.localize("ui.panel.lovelace.unused_entities.available_entities"),"storage"===this.lovelace.mode?(0,m.qy)(z||(z=(0,s.A)([" <br>"," "])),this.hass.localize("ui.panel.lovelace.unused_entities.select_to_add")):""),this.hass,this.narrow,this._unusedEntities.map((function(t){var n=e.hass.states[t];return{icon:"",entity_id:t,stateObj:n,name:n?(0,_.u)(n):"Unavailable",domain:(0,k.m)(t),last_changed:null==n?void 0:n.last_changed}})),this._handleSelectedChanged,(0,A.H)({selected:this._selectedEntities.length}),this.hass.localize("ui.panel.lovelace.editor.edit_card.add"),this._addToLovelaceView,"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"):m.s6}},{kind:"method",key:"_getUnusedEntities",value:function(){if(this.hass&&this.lovelace){this._selectedEntities=[];var e=(0,w.lZ)(this.hass,this._config);this._unusedEntities=(0,o.A)(e).sort()}}},{kind:"method",key:"_handleSelectedChanged",value:function(e){this._selectedEntities=e.detail.selectedEntities}},{kind:"method",key:"_addToLovelaceView",value:function(){var e=this,t=(0,x.Bi)(this.hass.states,this._selectedEntities,{}),n=(0,x.ZI)(this._selectedEntities,{});1!==this.lovelace.config.views.length?(0,S.X)(this,{lovelaceConfig:this.lovelace.config,allowDashboardChange:!1,viewSelectedCallback:function(i,a,r){(0,C.Q)(e,{lovelaceConfig:e.lovelace.config,saveConfig:e.lovelace.saveConfig,path:[r],entities:e._selectedEntities,cardConfig:t,sectionConfig:n})}}):(0,C.Q)(this,{lovelaceConfig:this.lovelace.config,saveConfig:this.lovelace.saveConfig,path:[0],entities:this._selectedEntities,cardConfig:t,sectionConfig:n})}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.AH)(T||(T=(0,s.A)([":host{background:var(--lovelace-background);overflow:hidden}.container{display:flex;flex-direction:column;height:100%}ha-card{--ha-card-box-shadow:none;--ha-card-border-radius:0}hui-entity-picker-table{flex-grow:1}.fab{position:sticky;float:var(--float-end);right:calc(16px + env(safe-area-inset-right));bottom:calc(16px + env(safe-area-inset-bottom));inset-inline-end:calc(16px + env(safe-area-inset-right));inset-inline-start:initial;z-index:1}ha-fab{position:relative;bottom:calc(-80px - env(safe-area-inset-bottom));transition:bottom .3s}.fab.selected ha-fab{bottom:0}"])))}}]}}),m.WF),r(),e.next=49;break;case 46:e.prev=46,e.t2=e.catch(0),r(e.t2);case 49:case"end":return e.stop()}}),e,null,[[0,46]])})));return function(t,n){return e.apply(this,arguments)}}())},6566:function(e,t,n){n(41765)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},36575:function(e,t,n){n.d(t,{LV:function(){return m}});var i=n(658),a=n(14842),r=n(82275),o=n(41981),s=n(64782),c=n(91001),u=(n(58975),n(42942),n(48062),n(71499),n(81027),n(48358),n(95737),n(79243),n(97741),n(46469),n(18193),n(50693),n(96434),n(33822),n(6566),n(26098),n(39790),n(66457),n(66385),n(13448),n(36016),n(64646),n(98185),n(7760),n(99019),n(15129),n(253),n(16891),n(37679),n(96858),Symbol("Comlink.proxy")),l=Symbol("Comlink.endpoint"),d=Symbol("Comlink.releaseProxy"),f=Symbol("Comlink.finalizer"),h=Symbol("Comlink.thrown"),v=function(e){return"object"===(0,c.A)(e)&&null!==e||"function"==typeof e},p=new Map([["proxy",{canHandle:function(e){return v(e)&&e[u]},serialize:function(e){var t=new MessageChannel,n=t.port1,i=t.port2;return y(e,n),[i,[i]]},deserialize:function(e){return e.start(),m(e)}}],["throw",{canHandle:function(e){return v(e)&&h in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];t.addEventListener("message",(function c(l){if(l&&l.data)if(function(e,t){var n,i=(0,s.A)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(t===a||"*"===a)return!0;if(a instanceof RegExp&&a.test(t))return!0}}catch(r){i.e(r)}finally{i.f()}return!1}(n,l.origin)){var d,v=Object.assign({path:[]},l.data),p=v.id,m=v.type,b=v.path,A=(l.data.argumentList||[]).map(x);try{var k=b.slice(0,-1).reduce((function(e,t){return e[t]}),e),_=b.reduce((function(e,t){return e[t]}),e);switch(m){case"GET":d=_;break;case"SET":k[b.slice(-1)[0]]=x(l.data.value),d=!0;break;case"APPLY":d=_.apply(k,A);break;case"CONSTRUCT":var w;d=function(e){return Object.assign(e,(0,a.A)({},u,!0))}((0,r.A)(_,(0,o.A)(A)));break;case"ENDPOINT":var E=new MessageChannel,M=E.port1,H=E.port2;y(e,H),d=function(e,t){return C.set(e,t),e}(M,[M]);break;case"RELEASE":d=void 0;break;default:return}}catch(w){d=(0,a.A)({value:w},h,0)}Promise.resolve(d).catch((function(e){return(0,a.A)({value:e},h,0)})).then((function(n){var a=S(n),r=(0,i.A)(a,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:p}),s),"RELEASE"===m&&(t.removeEventListener("message",c),g(t),f in e&&"function"==typeof e[f]&&e[f]())})).catch((function(e){var n=S((0,a.A)({value:new TypeError("Unserializable return value")},h,0)),r=(0,i.A)(n,2),o=r[0],s=r[1];t.postMessage(Object.assign(Object.assign({},o),{id:p}),s)}))}else console.warn("Invalid origin '".concat(l.origin,"' for comlink proxy"))})),t.start&&t.start()}function g(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function m(e,t){return w(e,[],t)}function b(e){if(e)throw new Error("Proxy has been released and is not useable")}function A(e){return M(e,{type:"RELEASE"}).then((function(){g(e)}))}var k=new WeakMap,_="FinalizationRegistry"in globalThis&&new FinalizationRegistry((function(e){var t=(k.get(e)||0)-1;k.set(e,t),0===t&&A(e)}));function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,a=new Proxy(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},{get:function(i,r){if(b(n),r===d)return function(){!function(e){_&&_.unregister(e)}(a),A(e),n=!0};if("then"===r){if(0===t.length)return{then:function(){return a}};var s=M(e,{type:"GET",path:t.map((function(e){return e.toString()}))}).then(x);return s.then.bind(s)}return w(e,[].concat((0,o.A)(t),[r]))},set:function(a,r,s){b(n);var c=S(s),u=(0,i.A)(c,2),l=u[0],d=u[1];return M(e,{type:"SET",path:[].concat((0,o.A)(t),[r]).map((function(e){return e.toString()})),value:l},d).then(x)},apply:function(a,r,o){b(n);var s=t[t.length-1];if(s===l)return M(e,{type:"ENDPOINT"}).then(x);if("bind"===s)return w(e,t.slice(0,-1));var c=E(o),u=(0,i.A)(c,2),d=u[0],f=u[1];return M(e,{type:"APPLY",path:t.map((function(e){return e.toString()})),argumentList:d},f).then(x)},construct:function(a,r){b(n);var o=E(r),s=(0,i.A)(o,2),c=s[0],u=s[1];return M(e,{type:"CONSTRUCT",path:t.map((function(e){return e.toString()})),argumentList:c},u).then(x)}});return function(e,t){var n=(k.get(t)||0)+1;k.set(t,n),_&&_.register(e,t,e)}(a,e),a}function E(e){var t,n=e.map(S);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var C=new WeakMap;function S(e){var t,n=(0,s.A)(p);try{for(n.s();!(t=n.n()).done;){var a=(0,i.A)(t.value,2),r=a[0],o=a[1];if(o.canHandle(e)){var c=o.serialize(e),u=(0,i.A)(c,2);return[{type:"HANDLER",name:r,value:u[0]},u[1]]}}}catch(l){n.e(l)}finally{n.f()}return[{type:"RAW",value:e},C.get(e)||[]]}function x(e){switch(e.type){case"HANDLER":return p.get(e.name).deserialize(e.value);case"RAW":return e.value}}function M(e,t,n){return new Promise((function(i){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),i(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)}))}}}]);
//# sourceMappingURL=29378.542gTn2G3us.js.map