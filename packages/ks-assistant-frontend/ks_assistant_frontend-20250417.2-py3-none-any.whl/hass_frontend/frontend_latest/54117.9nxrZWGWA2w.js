export const id=54117;export const ids=[54117];export const modules={32920:(e,i,t)=>{t.d(i,{l:()=>o});const o=async e=>{if(navigator.clipboard)try{return void await navigator.clipboard.writeText(e)}catch{}const i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)}},31979:(e,i,t)=>{var o=t(36312),a=t(68689),r=(t(89655),t(16891),t(15112)),d=t(77706),n=t(94100),l=t(34897),s=t(79051);t(20144);const c={key:"Mod-s",run:e=>((0,l.r)(e.dom,"editor-save"),!0)},h=e=>{const i=document.createElement("ha-icon");return i.icon=e.label,i};(0,o.A)([(0,d.EM)("ha-code-editor")],(function(e,i){class o extends i{constructor(...i){super(...i),e(this)}}return{F:o,d:[{kind:"field",key:"codemirror",value:void 0},{kind:"field",decorators:[(0,d.MZ)()],key:"mode",value:()=>"yaml"},{kind:"field",key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"autofocus",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"readOnly",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"linewrap",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean,attribute:"autocomplete-entities"})],key:"autocompleteEntities",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean,attribute:"autocomplete-icons"})],key:"autocompleteIcons",value:()=>!1},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"error",value:()=>!1},{kind:"field",decorators:[(0,d.wk)()],key:"_value",value:()=>""},{kind:"field",key:"_loadedCodeMirror",value:void 0},{kind:"field",key:"_iconList",value:void 0},{kind:"set",key:"value",value:function(e){this._value=e}},{kind:"get",key:"value",value:function(){return this.codemirror?this.codemirror.state.doc.toString():this._value}},{kind:"get",key:"hasComments",value:function(){if(!this.codemirror||!this._loadedCodeMirror)return!1;const e=this._loadedCodeMirror.highlightingFor(this.codemirror.state,[this._loadedCodeMirror.tags.comment]);return!!this.renderRoot.querySelector(`span.${e}`)}},{kind:"method",key:"connectedCallback",value:function(){(0,a.A)(o,"connectedCallback",this,3)([]),this.hasUpdated&&this.requestUpdate(),this.addEventListener("keydown",s.d),this.codemirror&&!1!==this.autofocus&&this.codemirror.focus()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)(o,"disconnectedCallback",this,3)([]),this.removeEventListener("keydown",s.d),this.updateComplete.then((()=>{this.codemirror.destroy(),delete this.codemirror}))}},{kind:"method",key:"scheduleUpdate",value:async function(){this._loadedCodeMirror??=await Promise.all([t.e(61060),t.e(96087),t.e(7746),t.e(61449)]).then(t.bind(t,61449)),(0,a.A)(o,"scheduleUpdate",this,3)([])}},{kind:"method",key:"update",value:function(e){if((0,a.A)(o,"update",this,3)([e]),!this.codemirror)return void this._createCodeMirror();const i=[];e.has("mode")&&i.push({effects:this._loadedCodeMirror.langCompartment.reconfigure(this._mode)}),e.has("readOnly")&&i.push({effects:this._loadedCodeMirror.readonlyCompartment.reconfigure(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly))}),e.has("linewrap")&&i.push({effects:this._loadedCodeMirror.linewrapCompartment.reconfigure(this.linewrap?this._loadedCodeMirror.EditorView.lineWrapping:[])}),e.has("_value")&&this._value!==this.value&&i.push({changes:{from:0,to:this.codemirror.state.doc.length,insert:this._value}}),i.length>0&&this.codemirror.dispatch(...i),e.has("error")&&this.classList.toggle("error-state",this.error)}},{kind:"get",key:"_mode",value:function(){return this._loadedCodeMirror.langs[this.mode]}},{kind:"method",key:"_createCodeMirror",value:function(){if(!this._loadedCodeMirror)throw new Error("Cannot create editor before CodeMirror is loaded");const e=[this._loadedCodeMirror.lineNumbers(),this._loadedCodeMirror.history(),this._loadedCodeMirror.drawSelection(),this._loadedCodeMirror.EditorState.allowMultipleSelections.of(!0),this._loadedCodeMirror.rectangularSelection(),this._loadedCodeMirror.crosshairCursor(),this._loadedCodeMirror.highlightSelectionMatches(),this._loadedCodeMirror.highlightActiveLine(),this._loadedCodeMirror.keymap.of([...this._loadedCodeMirror.defaultKeymap,...this._loadedCodeMirror.searchKeymap,...this._loadedCodeMirror.historyKeymap,...this._loadedCodeMirror.tabKeyBindings,c]),this._loadedCodeMirror.langCompartment.of(this._mode),this._loadedCodeMirror.haTheme,this._loadedCodeMirror.haSyntaxHighlighting,this._loadedCodeMirror.readonlyCompartment.of(this._loadedCodeMirror.EditorView.editable.of(!this.readOnly)),this._loadedCodeMirror.linewrapCompartment.of(this.linewrap?this._loadedCodeMirror.EditorView.lineWrapping:[]),this._loadedCodeMirror.EditorView.updateListener.of(this._onUpdate)];if(!this.readOnly){const i=[];this.autocompleteEntities&&this.hass&&i.push(this._entityCompletions.bind(this)),this.autocompleteIcons&&i.push(this._mdiCompletions.bind(this)),i.length>0&&e.push(this._loadedCodeMirror.autocompletion({override:i,maxRenderedOptions:10}))}this.codemirror=new this._loadedCodeMirror.EditorView({state:this._loadedCodeMirror.EditorState.create({doc:this._value,extensions:e}),parent:this.renderRoot})}},{kind:"field",key:"_getStates",value:()=>(0,n.A)((e=>{if(!e)return[];return Object.keys(e).map((i=>({type:"variable",label:i,detail:e[i].attributes.friendly_name,info:`State: ${e[i].state}`})))}))},{kind:"method",key:"_entityCompletions",value:function(e){const i=e.matchBefore(/[a-z_]{3,}\.\w*/);if(!i||i.from===i.to&&!e.explicit)return null;const t=this._getStates(this.hass.states);return t&&t.length?{from:Number(i.from),options:t,validFor:/^[a-z_]{3,}\.\w*$/}:null}},{kind:"field",key:"_getIconItems",value(){return async()=>{if(!this._iconList){let e;e=(await t.e(25143).then(t.t.bind(t,25143,19))).default,this._iconList=e.map((e=>({type:"variable",label:`mdi:${e.name}`,detail:e.keywords.join(", "),info:h})))}return this._iconList}}},{kind:"method",key:"_mdiCompletions",value:async function(e){const i=e.matchBefore(/mdi:\S*/);if(!i||i.from===i.to&&!e.explicit)return null;const t=await this._getIconItems();return{from:Number(i.from),options:t,validFor:/^mdi:\S*$/}}},{kind:"field",key:"_onUpdate",value(){return e=>{e.docChanged&&(this._value=e.state.doc.toString(),(0,l.r)(this,"value-changed",{value:this._value}))}}},{kind:"get",static:!0,key:"styles",value:function(){return r.AH`:host(.error-state) .cm-gutters{border-color:var(--error-state-color,red)}`}}]}}),r.mN)},10900:(e,i,t)=>{var o=t(36312),a=t(15112),r=t(77706);(0,o.A)([(0,r.EM)("ha-dialog-header")],(function(e,i){return{F:class extends i{constructor(...i){super(...i),e(this)}},d:[{kind:"method",key:"render",value:function(){return a.qy` <header class="header"> <div class="header-bar"> <section class="header-navigation-icon"> <slot name="navigationIcon"></slot> </section> <section class="header-title"> <slot name="title"></slot> </section> <section class="header-action-items"> <slot name="actionItems"></slot> </section> </div> <slot></slot> </header> `}},{kind:"get",static:!0,key:"styles",value:function(){return[a.AH`:host{display:block}:host([show-border]){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.header-bar{display:flex;flex-direction:row;align-items:flex-start;padding:4px;box-sizing:border-box}.header-title{flex:1;font-size:22px;line-height:28px;font-weight:400;padding:10px 4px;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media all and (min-width:450px) and (min-height:500px){.header-bar{padding:12px}}.header-navigation-icon{flex:none;min-width:8px;height:100%;display:flex;flex-direction:row}.header-action-items{flex:none;min-width:8px;height:100%;display:flex;flex-direction:row}`]}}]}}),a.WF)},3276:(e,i,t)=>{t.d(i,{l:()=>h});var o=t(36312),a=t(68689),r=t(54653),d=t(34599),n=t(15112),l=t(77706),s=t(90952);t(28066);const c=["button","ha-list-item"],h=(e,i)=>n.qy` <div class="header_title"> <span>${i}</span> <ha-icon-button .label="${e?.localize("ui.dialogs.generic.close")??"Close"}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" dialogAction="close" class="header_button"></ha-icon-button> </div> `;(0,o.A)([(0,l.EM)("ha-dialog")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"field",key:s.Xr,value:void 0},{kind:"method",key:"scrollToPos",value:function(e,i){this.contentElement?.scrollTo(e,i)}},{kind:"method",key:"renderHeading",value:function(){return n.qy`<slot name="heading"> ${(0,a.A)(t,"renderHeading",this,3)([])} </slot>`}},{kind:"method",key:"firstUpdated",value:function(){(0,a.A)(t,"firstUpdated",this,3)([]),this.suppressDefaultPressSelector=[this.suppressDefaultPressSelector,c].join(", "),this._updateScrolledAttribute(),this.contentElement?.addEventListener("scroll",this._onScroll,{passive:!0})}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)(t,"disconnectedCallback",this,3)([]),this.contentElement.removeEventListener("scroll",this._onScroll)}},{kind:"field",key:"_onScroll",value(){return()=>{this._updateScrolledAttribute()}}},{kind:"method",key:"_updateScrolledAttribute",value:function(){this.contentElement&&this.toggleAttribute("scrolled",0!==this.contentElement.scrollTop)}},{kind:"field",static:!0,key:"styles",value:()=>[d.R,n.AH`:host([scrolled]) ::slotted(ha-dialog-header){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.mdc-dialog{--mdc-dialog-scroll-divider-color:var(
          --dialog-scroll-divider-color,
          var(--divider-color)
        );z-index:var(--dialog-z-index,8);-webkit-backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));--mdc-dialog-box-shadow:var(--dialog-box-shadow, none);--mdc-typography-headline6-font-weight:400;--mdc-typography-headline6-font-size:1.574rem}.mdc-dialog__actions{justify-content:var(--justify-action-buttons,flex-end);padding-bottom:max(env(safe-area-inset-bottom),24px)}.mdc-dialog__actions span:first-child{flex:var(--secondary-action-button-flex,unset)}.mdc-dialog__actions span:nth-child(2){flex:var(--primary-action-button-flex,unset)}.mdc-dialog__container{align-items:var(--vertical-align-dialog,center)}.mdc-dialog__title{padding:24px 24px 0 24px}.mdc-dialog__actions{padding:12px 24px 12px 24px}.mdc-dialog__title::before{content:unset}.mdc-dialog .mdc-dialog__content{position:var(--dialog-content-position,relative);padding:var(--dialog-content-padding,24px)}:host([hideactions]) .mdc-dialog .mdc-dialog__content{padding-bottom:max(var(--dialog-content-padding,24px),env(safe-area-inset-bottom))}.mdc-dialog .mdc-dialog__surface{position:var(--dialog-surface-position,relative);top:var(--dialog-surface-top);margin-top:var(--dialog-surface-margin-top);min-height:var(--mdc-dialog-min-height,auto);border-radius:var(--ha-dialog-border-radius,28px);-webkit-backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);background:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff))}:host([flexContent]) .mdc-dialog .mdc-dialog__content{display:flex;flex-direction:column}.header_title{position:relative;padding-right:40px;padding-inline-end:40px;padding-inline-start:initial;direction:var(--direction)}.header_title span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.header_button{position:absolute;right:-12px;top:-12px;text-decoration:none;color:inherit;inset-inline-start:initial;inset-inline-end:-12px;direction:var(--direction)}.dialog-actions{inset-inline-start:initial!important;inset-inline-end:0px!important;direction:var(--direction)}`]}]}}),r.u)},57641:(e,i,t)=>{var o=t(36312),a=t(68689),r=t(51431),d=t(15112),n=t(77706),l=t(34897),s=t(55321),c=(t(31979),t(18589)),h=t(32920);(0,o.A)([(0,n.EM)("ha-yaml-editor")],(function(e,i){class t extends i{constructor(...i){super(...i),e(this)}}return{F:t,d:[{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,n.MZ)({attribute:!1})],key:"yamlSchema",value:()=>r.DEFAULT_SCHEMA},{kind:"field",decorators:[(0,n.MZ)()],key:"defaultValue",value:void 0},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"isValid",value:()=>!0},{kind:"field",decorators:[(0,n.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"autoUpdate",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"readOnly",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"copyClipboard",value:()=>!1},{kind:"field",decorators:[(0,n.MZ)({type:Boolean})],key:"hasExtraActions",value:()=>!1},{kind:"field",decorators:[(0,n.wk)()],key:"_yaml",value:()=>""},{kind:"method",key:"setValue",value:function(e){try{this._yaml=e&&!(e=>{if("object"!=typeof e)return!1;for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i))return!1;return!0})(e)?(0,r.dump)(e,{schema:this.yamlSchema,quotingType:'"',noRefs:!0}):""}catch(i){console.error(i,e),alert(`There was an error converting to YAML: ${i}`)}}},{kind:"method",key:"firstUpdated",value:function(){this.defaultValue&&this.setValue(this.defaultValue)}},{kind:"method",key:"willUpdate",value:function(e){(0,a.A)(t,"willUpdate",this,3)([e]),this.autoUpdate&&e.has("value")&&this.setValue(this.value)}},{kind:"method",key:"render",value:function(){return void 0===this._yaml?d.s6:d.qy` ${this.label?d.qy`<p>${this.label}${this.required?" *":""}</p>`:""} <ha-code-editor .hass="${this.hass}" .value="${this._yaml}" .readOnly="${this.readOnly}" mode="yaml" autocomplete-entities autocomplete-icons .error="${!1===this.isValid}" @value-changed="${this._onChange}" dir="ltr"></ha-code-editor> ${this.copyClipboard||this.hasExtraActions?d.qy`<div class="card-actions"> ${this.copyClipboard?d.qy` <mwc-button @click="${this._copyYaml}"> ${this.hass.localize("ui.components.yaml-editor.copy_to_clipboard")} </mwc-button>`:d.s6} <slot name="extra-actions"></slot> </div>`:d.s6} `}},{kind:"method",key:"_onChange",value:function(e){let i;e.stopPropagation(),this._yaml=e.detail.value;let t=!0;if(this._yaml)try{i=(0,r.load)(this._yaml,{schema:this.yamlSchema})}catch(e){t=!1}else i={};this.value=i,this.isValid=t,(0,l.r)(this,"value-changed",{value:i,isValid:t})}},{kind:"get",key:"yaml",value:function(){return this._yaml}},{kind:"method",key:"_copyYaml",value:async function(){this.yaml&&(await(0,h.l)(this.yaml),(0,c.P)(this,{message:this.hass.localize("ui.common.copied_clipboard")}))}},{kind:"get",static:!0,key:"styles",value:function(){return[s.RF,d.AH`.card-actions{border-radius:var(--actions-border-radius,0px 0px var(--ha-card-border-radius,12px) var(--ha-card-border-radius,12px));border:1px solid var(--divider-color);padding:5px 16px}ha-code-editor{flex-grow:1}`]}}]}}),d.WF)},54117:(e,i,t)=>{t.r(i),t.d(i,{HuiSaveConfig:()=>h});var o=t(36312),a=(t(72606),t(15112)),r=t(77706),d=t(34897),n=(t(37629),t(3276),t(10900),t(24284),t(28066),t(59588),t(57641),t(55321)),l=t(84976),s=t(71797);const c={views:[{title:"Home"}]};let h=(0,o.A)([(0,r.EM)("hui-dialog-save-config")],(function(e,i){return{F:class extends i{constructor(){super(),e(this),this._saving=!1}},d:[{kind:"field",decorators:[(0,r.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_params",value:void 0},{kind:"field",decorators:[(0,r.wk)()],key:"_emptyConfig",value:()=>!1},{kind:"field",decorators:[(0,r.wk)()],key:"_saving",value:void 0},{kind:"method",key:"showDialog",value:function(e){this._params=e,this._emptyConfig=!1}},{kind:"method",key:"closeDialog",value:function(){return this._params=void 0,(0,d.r)(this,"dialog-closed",{dialog:this.localName}),!0}},{kind:"method",key:"render",value:function(){if(!this._params)return a.s6;const e=this.hass.localize("ui.panel.lovelace.editor.save_config.header");return a.qy` <ha-dialog open scrimClickAction escapeKeyAction @closed="${this._close}" .heading="${e}"> <ha-dialog-header slot="heading"> <ha-icon-button slot="navigationIcon" dialogAction="cancel" .label="${this.hass.localize("ui.common.close")}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}"></ha-icon-button> <span slot="title">${e}</span> <a href="${(0,l.o)(this.hass,"/lovelace/")}" title="${this.hass.localize("ui.panel.lovelace.menu.help")}" target="_blank" rel="noreferrer" slot="actionItems"> <ha-icon-button .path="${"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"}" .label="${this.hass.localize("ui.common.help")}"></ha-icon-button> </a> </ha-dialog-header> <div> <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.para")} </p> ${"storage"===this._params.mode?a.qy` <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.para_sure")} </p> <ha-formfield .label="${this.hass.localize("ui.panel.lovelace.editor.save_config.empty_config")}"> <ha-switch .checked="${this._emptyConfig}" @change="${this._emptyConfigChanged}" dialogInitialFocus></ha-switch></ha-formfield> `:a.qy` <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_mode")} </p> <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_control")} </p> <p> ${this.hass.localize("ui.panel.lovelace.editor.save_config.yaml_config")} </p> <ha-yaml-editor .hass="${this.hass}" .defaultValue="${this._params.lovelace.config}" dialogInitialFocus></ha-yaml-editor> `} </div> ${"storage"===this._params.mode?a.qy` <mwc-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.cancel")} </mwc-button> <mwc-button slot="primaryAction" ?disabled="${this._saving}" @click="${this._saveConfig}"> ${this._saving?a.qy`<ha-circular-progress indeterminate size="small" aria-label="Saving"></ha-circular-progress>`:""} ${this.hass.localize("ui.panel.lovelace.editor.save_config.save")} </mwc-button> `:a.qy` <mwc-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.panel.lovelace.editor.save_config.close")}</mwc-button> `} </ha-dialog> `}},{kind:"method",key:"_close",value:function(e){e&&e.stopPropagation(),this.closeDialog()}},{kind:"method",key:"_emptyConfigChanged",value:function(e){this._emptyConfig=e.target.checked}},{kind:"method",key:"_saveConfig",value:async function(){if(this.hass&&this._params){this._saving=!0;try{const e=this._params.lovelace;await e.saveConfig(this._emptyConfig?c:await(0,s.d4)(e.config,this.hass)),e.setEditMode(!0),this._saving=!1,this.closeDialog()}catch(e){alert(`Saving failed: ${e.message}`),this._saving=!1}}}},{kind:"get",static:!0,key:"styles",value:function(){return[n.nA,a.AH`ha-dialog{--dialog-content-padding:0 24px 24px 24px}ha-dialog-header a{color:inherit;text-decoration:none}`]}}]}}),a.WF)}};
//# sourceMappingURL=54117.9nxrZWGWA2w.js.map