{"version":3,"file":"dash_model_viewer.min.js","mappings":"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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///external window \"React\"","webpack:///external window \"PropTypes\"","webpack:///./src/lib/components/DashModelViewer.react.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","var getCurrentScript = function() {\n    var script = document.currentScript;\n    if (!script) {\n        /* Shim for IE11 and below */\n        /* Do not take into account async scripts and inline scripts */\n\n        var doc_scripts = document.getElementsByTagName('script');\n        var scripts = [];\n\n        for (var i = 0; i < doc_scripts.length; i++) {\n            scripts.push(doc_scripts[i]);\n        }\n\n        scripts = scripts.filter(function(s) { return !s.async && !s.text && !s.textContent; });\n        script = scripts.slice(-1)[0];\n    }\n\n    return script;\n};\n\nvar isLocalScript = function(script) {\n    return /\\/_dash-component-suites\\//.test(script.src);\n};\n\nObject.defineProperty(__webpack_require__, 'p', {\n    get: (function () {\n        var script = getCurrentScript();\n\n        var url = script.src.split('/').slice(0, -1).join('/') + '/';\n\n        return function() {\n            return url;\n        };\n    })()\n});\n\nif (typeof jsonpScriptSrc !== 'undefined') {\n    var __jsonpScriptSrc__ = jsonpScriptSrc;\n    jsonpScriptSrc = function(chunkId) {\n        var script = getCurrentScript();\n        var isLocal = isLocalScript(script);\n\n        var src = __jsonpScriptSrc__(chunkId);\n\n        if(!isLocal) {\n            return src;\n        }\n\n        var srcFragments = src.split('/');\n        var fileFragments = srcFragments.slice(-1)[0].split('.');\n\n        fileFragments.splice(1, 0, \"v0_0_1m1744909483\");\n        srcFragments.splice(-1, 1, fileFragments.join('.'))\n\n        return srcFragments.join('/');\n    };\n}\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"PropTypes\"];","// --- START OF FILE ModelViewer.react.js ---\n\nimport React, { useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\n\n// Import utilities for Dash 2/3 compatibility\n// Adjust the path based on your file structure (assuming dash3.js is compiled)\nimport { useLoadingState, setPersistence, getChildLayout, setComponentProps } from '../utils/dash3'; // Example path\n\n// --- Dash 3 Compatibility Notes ---\n// 1. Default Props: Moved from `ModelViewer.defaultProps` to function signature (below).\n// 2. Loading State: Uses `useLoadingState` utility (if needed) to handle Dash 2/3.\n// 3. Persistence: Uses `setPersistence` utility (if needed) called *outside* the component definition.\n// 4. Child Layout: Uses `getChildLayout` utility (if needed) for inspecting children.\n// 5. Typing: Generated by `dash-generate-components` v3+. Requires adding 'proptypes.js'\n//    to _js_dist in your package's __init__.py if using TypeScript source.\n// ---\n\n// Component definition with default props in the signature\nconst DashModelViewer = ({\n  // Required props (no defaults needed here)\n  id,\n  src,\n  alt,\n\n  // Props with defaults defined directly here\n  cameraControls = true,\n  touchAction = \"pan-y\",\n  ar = true,\n  hotspots = [],\n  style = {},\n  toneMapping = 'neutral',\n  arModes = \"basic_annotations scene-viewer quick-look\",\n  shadowIntensity = 0,\n  arScale = 'auto',\n  interpolationDecay = 50,\n  fieldOfView = 'auto',\n  minFieldOfView = '25deg',\n  maxFieldOfView = 'auto',\n  maxCameraOrbit = 'auto auto auto',\n  minCameraOrbit = 'auto auto auto',\n  arButtonText = 'View in your space',\n  customArPrompt = null,\n  customArFailure = null,\n  variantName = null, // Explicit null default\n\n  // Props without defaults (will be undefined if not provided by user)\n  cameraOrbit,\n  cameraTarget,\n  poster,\n\n  // Dash internal props (passed automatically)\n  setProps,\n  loading_state // Passed by Dash for both v2 and v3\n}) => {\n  const modelViewerRef = useRef(null);\n\n  // --- Example: Using the loading state utility ---\n  // If you needed to render differently based on loading state:\n  // const isLoading = useLoadingState(loading_state);\n  // if (isLoading) {\n  //   return <div>Loading model...</div>;\n  // }\n  // ---\n\n  // Effect to load the model-viewer script and set up initial listeners\n  useEffect(() => {\n    const existingScript = document.querySelector('script[src=\"https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js\"]');\n    let script;\n\n    const initializeModelViewer = () => {\n      customElements.whenDefined('model-viewer').then(() => {\n         if (modelViewerRef.current) {\n            setupModelViewerListeners(); // Run combined setup\n         }\n      });\n    };\n\n    if (!existingScript) {\n        script = document.createElement('script');\n        script.src = \"https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js\";\n        script.type = \"module\";\n        script.addEventListener('load', initializeModelViewer);\n        document.body.appendChild(script);\n    } else {\n        if (customElements.get('model-viewer')) {\n            initializeModelViewer();\n        } else {\n            customElements.whenDefined('model-viewer').then(() => {\n                if (modelViewerRef.current) {\n                   initializeModelViewer();\n                }\n            });\n        }\n    }\n\n    return () => {\n      // Cleanup script if it was added by this instance\n      if (script && script.parentElement === document.body) {\n        document.body.removeChild(script);\n      }\n      // Note: Robust listener cleanup might require storing handler references\n      // outside the setup functions or using useCallback if handlers depend on props/state.\n    };\n  }, []); // Empty dependency array: run only once on mount\n\n  // Combined setup function for listeners\n  const setupModelViewerListeners = () => {\n        setupHotspots(); // Setup/update hotspot listeners\n        setupAR();       // Setup/update AR listeners\n   };\n\n\n  // Setup Hotspots - including CLICK logic for camera views\n  const setupHotspots = () => {\n    const modelViewer = modelViewerRef.current;\n    if (!modelViewer) return;\n\n    const handleAnnotationClick = (event) => {\n      const annotation = event.currentTarget;\n      const modelViewerElement = modelViewerRef.current;\n      if (!modelViewerElement) return;\n      const dataset = annotation.dataset;\n\n      let updatedProps = {}; // Collect props to update via setProps\n\n      if (dataset.target && dataset.orbit) {\n          modelViewerElement.cameraTarget = dataset.target;\n          modelViewerElement.cameraOrbit = dataset.orbit;\n          // Update Dash state if these props are controllable\n          // updatedProps.cameraTarget = dataset.target; // Example\n          // updatedProps.cameraOrbit = dataset.orbit;   // Example\n\n          if (dataset.fov) {\n             modelViewerElement.fieldOfView = dataset.fov;\n             // updatedProps.fieldOfView = dataset.fov; // Example\n          } else {\n             modelViewerElement.fieldOfView = '45deg'; // Default FoV for camera view hotspots\n             // updatedProps.fieldOfView = '45deg'; // Example\n          }\n      }\n      // Add other click logic if needed\n\n      // Call setProps if there are changes to report back to Dash\n      if (Object.keys(updatedProps).length > 0 && setProps) {\n        // setProps(updatedProps); // Uncomment if you add controllable props based on clicks\n      }\n    };\n\n    const hotspotElements = modelViewer.querySelectorAll('.hotspot');\n\n    // Re-attach listeners\n    hotspotElements.forEach((hotspot) => {\n      hotspot.removeEventListener('click', handleAnnotationClick); // Remove first\n      hotspot.addEventListener('click', handleAnnotationClick);   // Add updated handler\n    });\n  };\n\n  // Setup AR Listeners and Button Logic\n  const setupAR = () => {\n    const modelViewer = modelViewerRef.current;\n    if (!modelViewer) return;\n\n    const arButton = modelViewer.querySelector('#ar-button');\n    const arPrompt = modelViewer.querySelector('#ar-prompt');\n    const arFailure = modelViewer.querySelector('#ar-failure');\n\n    // Use stable function references or useCallback if needed for robust removal\n    const handleARButtonClick = () => { if (modelViewer?.canActivateAR) { modelViewer.activateAR(); } };\n    const handleArStatus = (event) => { if (arPrompt) { arPrompt.style.display = event.detail.status === 'session-started' ? 'block' : 'none'; } };\n    const handleArTracking = (event) => { if (arFailure) { arFailure.style.display = event.detail.status === 'not-tracking' ? 'block' : 'none'; } };\n\n    if (arButton) {\n        arButton.removeEventListener('click', handleARButtonClick); // Attempt removal\n        arButton.addEventListener('click', handleARButtonClick);\n    }\n    modelViewer.removeEventListener('ar-status', handleArStatus); // Attempt removal\n    modelViewer.addEventListener('ar-status', handleArStatus);\n    modelViewer.removeEventListener('ar-tracking', handleArTracking); // Attempt removal\n    modelViewer.addEventListener('ar-tracking', handleArTracking);\n  };\n\n  // Effect to re-run setupHotspots when the 'hotspots' prop changes\n  // Note: React's default comparison is shallow. If hotspot objects *within* the array\n  // change identity or content without the array itself changing, this might not re-run.\n  // For complex cases, you might need a deep comparison or a different trigger.\n  useEffect(() => {\n    customElements.whenDefined('model-viewer').then(() => {\n       if (modelViewerRef.current) {\n            setupHotspots(); // Re-attach click listeners\n       }\n    });\n  }, [hotspots]); // Dependency on the hotspots prop array\n\n  // Convert boolean props for attributes where needed\n  // model-viewer attributes often just need to exist, not have a value='true'\n  const cameraControlsAttr = cameraControls ? '' : null;\n  const arAttr = ar ? '' : null;\n\n  return (\n    <model-viewer\n      ref={modelViewerRef}\n      id={id}\n      src={src}\n      alt={alt}\n      // Pass attributes directly using the derived values\n      camera-controls={cameraControls ? '' : undefined} // Use undefined to remove attribute if false\n      touch-action={touchAction}\n      camera-orbit={cameraOrbit}\n      camera-target={cameraTarget}\n      field-of-view={fieldOfView}\n      min-field-of-view={minFieldOfView}\n      max-field-of-view={maxFieldOfView}\n      interpolation-decay={interpolationDecay}\n      min-camera-orbit={minCameraOrbit}\n      max-camera-orbit={maxCameraOrbit}\n      poster={poster}\n      ar={ar ? '' : undefined} // Use undefined to remove attribute if false\n      style={style}\n      tone-mapping={toneMapping}\n      ar-modes={arModes}\n      shadow-intensity={shadowIntensity}\n      ar-scale={arScale}\n      // Handle 'default' variant name - model-viewer expects attribute removal for default\n      variant-name={variantName === 'default' ? undefined : variantName}\n    >\n      {/* Render hotspot divs based on the hotspots prop array */}\n      {hotspots && hotspots.map((hotspot, index) => (\n        <div\n          key={hotspot.slot || `hotspot-${index}`}\n          className={`hotspot ${hotspot.children_classname || ''}`.trim()}\n          slot={hotspot.slot || `hotspot-${index + 1}`}\n          data-position={hotspot.position}\n          data-normal={hotspot.normal}\n          // Conditionally add data attributes only if they exist in the hotspot object\n          {...(hotspot.orbit && { 'data-orbit': hotspot.orbit })}\n          {...(hotspot.target && { 'data-target': hotspot.target })}\n          {...(hotspot.fov && { 'data-fov': hotspot.fov })}\n        >\n          {/* Text content (button label) */}\n          {hotspot.text}\n        </div>\n      ))}\n\n      {/* AR Button Slot */}\n      <div id=\"ar-button\" slot=\"ar-button\">\n        {arButtonText} {/* Default value handled in props destructuring */}\n      </div>\n\n      {/* AR Prompt Slot */}\n      <div id=\"ar-prompt\" style={{display: 'none'}}>\n         {/* Default value (null) handled in props destructuring, render conditionally */}\n        {customArPrompt || <img src=\"https://modelviewer.dev/assets/hand.png\" alt=\"AR Prompt\"/>}\n      </div>\n\n      {/* AR Failure Slot */}\n      <div id=\"ar-failure\" style={{display: 'none'}}>\n         {/* Default value (null) handled in props destructuring, render conditionally */}\n        {customArFailure || \"AR is not tracking!\"}\n      </div>\n    </model-viewer>\n  );\n};\n\n// --- Remove the defaultProps block ---\n// ModelViewer.defaultProps = { ... }; // DELETED\n\n// --- Keep Prop Types ---\n// Prop types are still needed for dash-generate-components and developer documentation\nDashModelViewer.propTypes = {\n  /** Component ID */\n  id: PropTypes.string.isRequired,\n  /** Model source URL (.glb or .gltf) */\n  src: PropTypes.string.isRequired,\n  /** Alt text for accessibility */\n  alt: PropTypes.string.isRequired,\n  /** Enable camera controls */\n  cameraControls: PropTypes.bool,\n  /** Touch action behavior */\n  touchAction: PropTypes.oneOf(['pan-y', 'pan-x', 'none']),\n  /** Initial camera orbital position ($theta $phi $radius) */\n  cameraOrbit: PropTypes.string,\n  /** Initial camera target point ($X $Y $Z) */\n  cameraTarget: PropTypes.string,\n  /** Camera field of view */\n  fieldOfView: PropTypes.string,\n  /** Minimum camera field of view */\n  minFieldOfView: PropTypes.string,\n  /** Maximum camera field of view */\n  maxFieldOfView: PropTypes.string,\n  /** Camera interpolation decay rate */\n  interpolationDecay: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /** Minimum camera orbit bounds */\n  minCameraOrbit: PropTypes.string,\n  /** Maximum camera orbit bounds */\n  maxCameraOrbit: PropTypes.string,\n  /** Poster image URL */\n  poster: PropTypes.string,\n  /** Enable AR features */\n  ar: PropTypes.bool,\n\n  /** Array of hotspot objects passed from the server */\n  hotspots: PropTypes.arrayOf(PropTypes.shape({\n    slot: PropTypes.string,\n    position: PropTypes.string,\n    normal: PropTypes.string,\n    orbit: PropTypes.string,    // Camera orbit for click\n    target: PropTypes.string,   // Camera target for click\n    fov: PropTypes.string,      // Optional: Field of view for click\n    text: PropTypes.string,\n    children_classname: PropTypes.string, // CSS class name (e.g., 'view-button')\n  })),\n\n  /** Text for the default AR button */\n  arButtonText: PropTypes.string,\n  /** Custom React element for the AR prompt */\n  customArPrompt: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n  /** Custom React element for the AR failure message */\n  customArFailure: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\n  /** CSS Style object */\n  style: PropTypes.object,\n\n  // --- Rendering & AR Prop Types ---\n  toneMapping: PropTypes.oneOf(['neutral', 'aces', 'agx', 'reinhard', 'cineon', 'linear', 'none']),\n  arModes: PropTypes.string,\n  shadowIntensity: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  arScale: PropTypes.oneOf(['auto', 'fixed']),\n  variantName: PropTypes.string,\n\n  /** Dash-assigned callback that should be called whenever any of the\n   * properties change. */\n  setProps: PropTypes.func,\n\n  /** Object that holds the loading state object coming from dash-renderer */\n  loading_state: PropTypes.shape({\n    /** Determines if the component is loading or not */\n    is_loading: PropTypes.bool,\n    /** Holds which property is loading */\n    prop_name: PropTypes.string,\n    /** Holds the name of the component that is loading */\n    component_name: PropTypes.string,\n  }),\n};\n\n// --- Example: Setting Persistence (if needed) ---\n// If you wanted 'cameraOrbit' and 'cameraTarget' to persist in local storage:\n// setPersistence(ModelViewer, ['cameraOrbit', 'cameraTarget']);\n// --- This call MUST be outside the component function definition ---\n\nexport default DashModelViewer;\n// --- END OF FILE ModelViewer.react.js ---"],"names":["url","__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getCurrentScript","script","document","currentScript","doc_scripts","getElementsByTagName","scripts","i","length","push","filter","s","async","text","textContent","slice","src","split","join","jsonpScriptSrc","__jsonpScriptSrc__","chunkId","isLocal","test","srcFragments","fileFragments","splice","window","DashModelViewer","_ref","id","alt","_ref$cameraControls","cameraControls","_ref$touchAction","touchAction","_ref$ar","ar","_ref$hotspots","hotspots","_ref$style","style","_ref$toneMapping","toneMapping","_ref$arModes","arModes","_ref$shadowIntensity","shadowIntensity","_ref$arScale","arScale","_ref$interpolationDec","interpolationDecay","_ref$fieldOfView","fieldOfView","_ref$minFieldOfView","minFieldOfView","_ref$maxFieldOfView","maxFieldOfView","_ref$maxCameraOrbit","maxCameraOrbit","_ref$minCameraOrbit","minCameraOrbit","_ref$arButtonText","arButtonText","_ref$customArPrompt","customArPrompt","_ref$customArFailure","customArFailure","_ref$variantName","variantName","cameraOrbit","cameraTarget","poster","modelViewerRef","setProps","loading_state","useRef","useEffect","existingScript","querySelector","initializeModelViewer","customElements","whenDefined","then","current","setupModelViewerListeners","createElement","type","addEventListener","body","appendChild","parentElement","removeChild","setupHotspots","setupAR","modelViewer","handleAnnotationClick","event","annotation","currentTarget","modelViewerElement","dataset","target","orbit","fov","keys","querySelectorAll","forEach","hotspot","removeEventListener","arButton","arPrompt","arFailure","handleARButtonClick","canActivateAR","activateAR","handleArStatus","display","detail","status","handleArTracking","React","ref","undefined","map","index","_extends","slot","concat","className","children_classname","trim","position","normal","propTypes","PropTypes","isRequired","is_loading","prop_name","component_name"],"sourceRoot":""}