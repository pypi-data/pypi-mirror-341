var Yr=Object.defineProperty;var tr=i=>{throw TypeError(i)};var Br=(i,t,e)=>t in i?Yr(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var O=(i,t,e)=>Br(i,typeof t!="symbol"?t+"":t,e),Ye=(i,t,e)=>t.has(i)||tr("Cannot "+e);var p=(i,t,e)=>(Ye(i,t,"read from private field"),e?e.call(i):t.get(i)),T=(i,t,e)=>t.has(i)?tr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),Lt=(i,t,e,r)=>(Ye(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e),F=(i,t,e)=>(Ye(i,t,"access private method"),e);import{N as Be,d as Ve,O as Gr,h as K,s as B,a as Ct,m as Ie,p as Ur,l as He,q as Ne,y as Re,w as hr,Q as fr,A as vr,R as pr,U as gr,V as mr,W as br,X as _r,Y as xr,Z as yr,_ as wr,n as er,e as De,C as Wr,b as jr,c as Sr,j as ot,$ as Hr,a0 as Jr,a1 as Qr,a2 as Zr,a3 as ts,a4 as rr,a5 as es,a6 as sr,o as Nt,u as Pr,B as Kt,a7 as rs,k as ss,a8 as as,a9 as ns}from"../chunks/Bav1VHWD.js";import{z as Ge,j as o,q as Y,p as I,f as S,a as N,l as b,c as w,v as et,r as y,t as H,h as oe,o as bt,a2 as is,aE as ar,Z as qt,w as os,s as P,al as gt,aH as Pt,aG as Ar,e as ls}from"../chunks/CXd5mRv3.js";import{c as Et}from"../chunks/BzArsHZA.js";import{a as ds,r as cs}from"../chunks/0_lnsz43.js";import{r as de}from"../chunks/Cbydd1_z.js";import{c as R,a as g,t as $,o as kt,s as ft,b as Qt}from"../chunks/B2uy2sCz.js";import{p as A,i as vt,r as X,a as it,s as re,c as rt,d as j,e as st,b as ce}from"../chunks/CMPZDoqW.js";import{p as us}from"../chunks/DxnnO0rt.js";import{a as Oe,T as hs,f as Xt,A as fs,S as Tr}from"../chunks/qr4QHHeZ.js";import{S as vs,s as ps,h as nr,n as $r,a as kr,i as gs,b as ms,u as Cr,l as bs}from"../chunks/CGPq7xzK.js";import"../chunks/CXw7gMMa.js";import{a as Er,L as _s}from"../chunks/QURVZ6B5.js";import{g as ir}from"../chunks/pKKESLv8.js";import{o as Mr,i as xs,g as ys,D as ws,a as Ss}from"../chunks/CM5dqvxf.js";var Ps=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],As=["difference","intersection","symmetricDifference","union"],or=!1,Bt,lt,At,he,Vr;const fe=class fe extends Set{constructor(e){super();T(this,he);T(this,Bt,new Map);T(this,lt,Ge(0));T(this,At,Ge(0));if(e){for(var r of e)super.add(r);p(this,At).v=super.size}or||F(this,he,Vr).call(this)}has(e){var r=super.has(e),s=p(this,Bt),a=s.get(e);if(a===void 0){if(!r)return o(p(this,lt)),!1;a=Ge(!0),s.set(e,a)}return o(a),r}add(e){return super.has(e)||(super.add(e),Y(p(this,At),super.size),Be(p(this,lt))),this}delete(e){var r=super.delete(e),s=p(this,Bt),a=s.get(e);return a!==void 0&&(s.delete(e),Y(a,!1)),r&&(Y(p(this,At),super.size),Be(p(this,lt))),r}clear(){if(super.size!==0){super.clear();var e=p(this,Bt);for(var r of e.values())Y(r,!1);e.clear(),Y(p(this,At),0),Be(p(this,lt))}}keys(){return this.values()}values(){return o(p(this,lt)),super.values()}entries(){return o(p(this,lt)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return o(p(this,At))}};Bt=new WeakMap,lt=new WeakMap,At=new WeakMap,he=new WeakSet,Vr=function(){or=!0;var e=fe.prototype,r=Set.prototype;for(const s of Ps)e[s]=function(...a){return o(p(this,lt)),r[s].apply(this,a)};for(const s of As)e[s]=function(...a){o(p(this,lt));var n=r[s].apply(this,a);return new fe(n)}};let Ue=fe;var Ts=$("<div><!></div>");function $s(i,t){I(t,!0);let e=A(t,"id",19,Ve),r=A(t,"ref",15,null),s=X(t,["$$slots","$$events","$$legacy","id","children","child","ref"]);const a=Gr({id:K.with(()=>e()),ref:K.with(()=>r(),u=>r(u))}),n=b(()=>Ie(s,a.props));var l=R(),c=S(l);{var d=u=>{var f=R(),v=S(f);B(v,()=>t.child,()=>({props:o(n)})),g(u,f)},h=u=>{var f=Ts();let v;var _=w(f);B(_,()=>t.children??et),y(f),H(()=>v=Ct(f,v,{...o(n)})),g(u,f)};vt(c,u=>{t.child?u(d):u(h,!1)})}g(i,l),N()}function ks(i,t,e){const r={position:"absolute"};return i==="lr"?(r.left=`${t}%`,r.right=`${e}%`):i==="rl"?(r.right=`${t}%`,r.left=`${e}%`):i==="bt"?(r.bottom=`${t}%`,r.top=`${e}%`):(r.top=`${t}%`,r.bottom=`${e}%`),r}function Ir(i,t){const e={position:"absolute"};return i==="lr"?(e.left=`${t}%`,e.translate="-50% 0"):i==="rl"?(e.right=`${t}%`,e.translate="50% 0"):i==="bt"?(e.bottom=`${t}%`,e.translate="0 50%"):(e.top=`${t}%`,e.translate="0 -50%"),e}function Nr(i,t,e){const r={position:"absolute"};return i==="lr"?(r.left=`${t}%`,r.translate=`${e}% 0`):i==="rl"?(r.right=`${t}%`,r.translate=`${-e}% 0`):i==="bt"?(r.bottom=`${t}%`,r.translate=`0 ${-e}%`):(r.top=`${t}%`,r.translate=`0 ${e}%`),r}function Yt(i,t,e,r){const s=(i-(Number.isNaN(t)?0:t))%r;let a=Math.abs(s)*2>=r?i+Math.sign(s)*(r-Math.abs(s)):i-s;Number.isNaN(t)?!Number.isNaN(e)&&a>e&&(a=Math.floor(e/r)*r):a<t?a=t:!Number.isNaN(e)&&a>e&&(a=t+Math.floor((e-t)/r)*r);const n=r.toString(),l=n.indexOf("."),c=l>=0?n.length-l:0;if(c>0){const d=10**c;a=Math.round(a*d)/d}return a}const Cs="data-slider-root",ue="data-slider-thumb",Es="data-slider-range",Rr="data-slider-tick";var Zt,ve,pe,ge;class Dr{constructor(t){O(this,"opts");T(this,Zt,bt(!1));T(this,ve,b(()=>this.opts.orientation.current==="horizontal"?this.opts.dir.current==="rtl"?"rl":"lr":this.opts.dir.current==="rtl"?"tb":"bt"));T(this,pe,b(()=>{if(!this.opts.disabled.current)return this.opts.orientation.current==="horizontal"?"pan-y":"pan-x"}));O(this,"getAllThumbs",()=>{const t=this.opts.ref.current;return t?Array.from(t.querySelectorAll(`[${ue}]`)):[]});T(this,ge,b(()=>({id:this.opts.id.current,"data-orientation":Re(this.opts.orientation.current),"data-disabled":Ne(this.opts.disabled.current),style:{touchAction:o(p(this,pe))},[Cs]:""})));this.opts=t,He(t)}get isActive(){return o(p(this,Zt))}set isActive(t){Y(p(this,Zt),it(t))}get direction(){return o(p(this,ve))}get props(){return o(p(this,ge))}}Zt=new WeakMap,ve=new WeakMap,pe=new WeakMap,ge=new WeakMap;var me,be,_e,xe,ye;class Ms extends Dr{constructor(e){super(e);O(this,"opts");O(this,"isMulti",!1);O(this,"updateValue",e=>{this.opts.value.current=Yt(e,this.opts.min.current,this.opts.max.current,this.opts.step.current)});O(this,"handlePointerMove",e=>{if(!this.isActive||this.opts.disabled.current)return;e.preventDefault(),e.stopPropagation();const r=this.opts.ref.current,s=this.getAllThumbs()[0];if(!r||!s)return;s.focus();const{left:a,right:n,top:l,bottom:c}=r.getBoundingClientRect();this.direction==="lr"?this.applyPosition({clientXY:e.clientX,start:a,end:n}):this.direction==="rl"?this.applyPosition({clientXY:e.clientX,start:n,end:a}):this.direction==="bt"?this.applyPosition({clientXY:e.clientY,start:c,end:l}):this.direction==="tb"&&this.applyPosition({clientXY:e.clientY,start:l,end:c})});O(this,"handlePointerDown",e=>{if(e.button!==0||this.opts.disabled.current)return;const r=this.opts.ref.current,s=this.getAllThumbs()[0];if(!s||!r)return;const a=e.target;!fr(a)||!r.contains(a)||(e.preventDefault(),s.focus(),this.isActive=!0,this.handlePointerMove(e))});O(this,"handlePointerUp",()=>{this.opts.disabled.current||(this.isActive&&this.opts.onValueCommit.current(oe(()=>this.opts.value.current)),this.isActive=!1)});O(this,"getPositionFromValue",e=>{const r=this.opts.min.current,s=this.opts.max.current;return(e-r)/(s-r)*100});T(this,me,b(()=>{const e=this.opts.value.current;return Array.from({length:1},()=>{const r=e,s=this.getPositionFromValue(r??0),a=Ir(this.direction,s);return{role:"slider","aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":r,"aria-disabled":pr(this.opts.disabled.current),"aria-orientation":vr(this.opts.orientation.current),"data-value":r,tabindex:this.opts.disabled.current?-1:0,style:a,[ue]:""}})}));T(this,be,b(()=>this.thumbsPropsArr.map((e,r)=>r)));T(this,_e,b(()=>{const e=this.opts.max.current,r=this.opts.min.current,s=this.opts.step.current,a=e-r;let n=Math.ceil(a/s);a%s==0&&n++;const l=this.opts.value.current;return Array.from({length:n},(c,d)=>{const h=d*(s/a)*100,u=d===0,f=d===n-1,v=u?0:f?-100:-50,_=Nr(this.direction,h,v),m=r+d*s,x=m<=l;return{"data-disabled":Ne(this.opts.disabled.current),"data-orientation":Re(this.opts.orientation.current),"data-bounded":x?"":void 0,"data-value":m,style:_,[Rr]:""}})}));T(this,xe,b(()=>this.ticksPropsArr.map((e,r)=>r)));T(this,ye,b(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));this.opts=e,Mr(()=>gr(kt(document,"pointerdown",this.handlePointerDown),kt(document,"pointerup",this.handlePointerUp),kt(document,"pointermove",this.handlePointerMove),kt(document,"pointerleave",this.handlePointerUp))),hr([()=>this.opts.step.current,()=>this.opts.min.current,()=>this.opts.max.current,()=>this.opts.value.current],([r,s,a,n])=>{const l=d=>Yt(d,s,a,r)===d,c=d=>Yt(d,s,a,r);l(n)||(this.opts.value.current=c(n))})}applyPosition({clientXY:e,start:r,end:s}){const a=this.opts.min.current,n=this.opts.max.current,c=(e-r)/(s-r)*(n-a)+a;if(c<a)this.updateValue(a);else if(c>n)this.updateValue(n);else{const d=this.opts.step.current,h=Math.floor((c-a)/d),u=a+h*d+d/2,f=a+(h+1)*d+d/2,v=c>=u&&c<f?(h+1)*d+a:h*d+a;v<=n&&this.updateValue(v)}}get thumbsPropsArr(){return o(p(this,me))}get thumbsRenderArr(){return o(p(this,be))}get ticksPropsArr(){return o(p(this,_e))}get ticksRenderArr(){return o(p(this,xe))}get snippetProps(){return o(p(this,ye))}}me=new WeakMap,be=new WeakMap,_e=new WeakMap,xe=new WeakMap,ye=new WeakMap;var te,ee,we,Se,Pe,Ae,Te,$e;class Vs extends Dr{constructor(e){super(e);O(this,"opts");O(this,"isMulti",!0);T(this,te,bt(null));T(this,ee,bt(0));T(this,we,e=>{const r=this.getAllThumbs();if(!r.length)return;for(const l of r)l.blur();const s=r.map(l=>{if(this.opts.orientation.current==="horizontal"){const{left:c,right:d}=l.getBoundingClientRect();return Math.abs(e.clientX-(c+d)/2)}else{const{top:c,bottom:d}=l.getBoundingClientRect();return Math.abs(e.clientY-(c+d)/2)}}),a=r[s.indexOf(Math.min(...s))],n=r.indexOf(a);return{node:a,idx:n}});O(this,"handlePointerMove",e=>{if(!this.isActive||this.opts.disabled.current)return;e.preventDefault(),e.stopPropagation();const r=this.opts.ref.current,s=this.activeThumb;if(!r||!s)return;s.node.focus();const{left:a,right:n,top:l,bottom:c}=r.getBoundingClientRect(),d=this.direction;d==="lr"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:s.idx,start:a,end:n}):d==="rl"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:s.idx,start:n,end:a}):d==="bt"?this.applyPosition({clientXY:e.clientY,activeThumbIdx:s.idx,start:c,end:l}):d==="tb"&&this.applyPosition({clientXY:e.clientY,activeThumbIdx:s.idx,start:l,end:c})});O(this,"handlePointerDown",e=>{if(e.button!==0||this.opts.disabled.current)return;const r=this.opts.ref.current,s=p(this,we).call(this,e);if(!s||!r)return;const a=e.target;!fr(a)||!r.contains(a)||(e.preventDefault(),this.activeThumb=s,s.node.focus(),this.isActive=!0,this.handlePointerMove(e))});O(this,"handlePointerUp",()=>{this.opts.disabled.current||(this.isActive&&this.opts.onValueCommit.current(oe(()=>this.opts.value.current)),this.isActive=!1)});O(this,"getPositionFromValue",e=>{const r=this.opts.min.current,s=this.opts.max.current;return(e-r)/(s-r)*100});O(this,"getAllThumbs",()=>{const e=this.opts.ref.current;return e?Array.from(e.querySelectorAll(`[${ue}]`)):[]});O(this,"updateValue",(e,r)=>{const s=this.opts.value.current;if(!s.length){this.opts.value.current.push(e);return}if(s[r]===e)return;const n=[...s];if(!xs(r,n))return;const l=n[r]>e?-1:1,c=()=>{var _;const f=r+l;n[r]=n[f],n[f]=e;const v=this.getAllThumbs();v.length&&((_=v[f])==null||_.focus(),this.activeThumb={node:v[f],idx:f})};if(this.opts.autoSort.current&&(l===-1&&e<n[r-1]||l===1&&e>n[r+1])){c(),this.opts.value.current=n;return}const d=this.opts.min.current,h=this.opts.max.current,u=this.opts.step.current;n[r]=Yt(e,d,h,u),this.opts.value.current=n});T(this,Se,b(()=>{const e=this.opts.value.current;return Array.from({length:e.length||1},(r,s)=>{const a=oe(()=>this.currentThumbIdx);a<e.length&&oe(()=>{this.currentThumbIdx=a+1});const n=e[s],l=this.getPositionFromValue(n??0),c=Ir(this.direction,l);return{role:"slider","aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":n,"aria-disabled":pr(this.opts.disabled.current),"aria-orientation":vr(this.opts.orientation.current),"data-value":n,tabindex:this.opts.disabled.current?-1:0,style:c,[ue]:""}})}));T(this,Pe,b(()=>this.thumbsPropsArr.map((e,r)=>r)));T(this,Ae,b(()=>{const e=this.opts.max.current,r=this.opts.min.current,s=this.opts.step.current,a=e-r;let n=Math.ceil(a/s);a%s==0&&n++;const l=this.opts.value.current;return Array.from({length:n},(c,d)=>{const h=d*(s/a)*100,u=d===0,f=d===n-1,v=u?0:f?-100:-50,_=Nr(this.direction,h,v),m=r+d*s,x=l.length===1?m<=l[0]:l[0]<=m&&m<=l[l.length-1];return{"data-disabled":Ne(this.opts.disabled.current),"data-orientation":Re(this.opts.orientation.current),"data-bounded":x?"":void 0,"data-value":m,style:_,[Rr]:""}})}));T(this,Te,b(()=>this.ticksPropsArr.map((e,r)=>r)));T(this,$e,b(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));this.opts=e,Mr(()=>gr(kt(document,"pointerdown",this.handlePointerDown),kt(document,"pointerup",this.handlePointerUp),kt(document,"pointermove",this.handlePointerMove),kt(document,"pointerleave",this.handlePointerUp))),hr([()=>this.opts.step.current,()=>this.opts.min.current,()=>this.opts.max.current,()=>this.opts.value.current],([r,s,a,n])=>{const l=d=>Yt(d,s,a,r)===d,c=d=>Yt(d,s,a,r);n.some(d=>!l(d))&&(this.opts.value.current=n.map(c))})}get activeThumb(){return o(p(this,te))}set activeThumb(e){Y(p(this,te),it(e))}get currentThumbIdx(){return o(p(this,ee))}set currentThumbIdx(e){Y(p(this,ee),it(e))}applyPosition({clientXY:e,activeThumbIdx:r,start:s,end:a}){const n=this.opts.min.current,l=this.opts.max.current,d=(e-s)/(a-s)*(l-n)+n;if(d<n)this.updateValue(n,r);else if(d>l)this.updateValue(l,r);else{const h=this.opts.step.current,u=Math.floor((d-n)/h),f=n+u*h+h/2,v=n+(u+1)*h+h/2,_=d>=f&&d<v?(u+1)*h+n:u*h+n;_<=l&&this.updateValue(_,r)}}get thumbsPropsArr(){return o(p(this,Se))}get thumbsRenderArr(){return o(p(this,Pe))}get ticksPropsArr(){return o(p(this,Ae))}get ticksRenderArr(){return o(p(this,Te))}get snippetProps(){return o(p(this,$e))}}te=new WeakMap,ee=new WeakMap,we=new WeakMap,Se=new WeakMap,Pe=new WeakMap,Ae=new WeakMap,Te=new WeakMap,$e=new WeakMap;const Is=[mr,br,_r,xr,yr,wr];var ke,Ce;class Ns{constructor(t,e){O(this,"opts");O(this,"root");T(this,ke,b(()=>{const t=Array.isArray(this.root.opts.value.current)&&this.root.opts.value.current.length>1?this.root.getPositionFromValue(Math.min(...this.root.opts.value.current)??0):0,e=Array.isArray(this.root.opts.value.current)?100-this.root.getPositionFromValue(Math.max(...this.root.opts.value.current)??0):100-this.root.getPositionFromValue(this.root.opts.value.current);return{position:"absolute",...ks(this.root.direction,t,e)}}));T(this,Ce,b(()=>({id:this.opts.id.current,"data-orientation":Re(this.root.opts.orientation.current),"data-disabled":Ne(this.root.opts.disabled.current),style:this.rangeStyles,[Es]:""})));this.opts=t,this.root=e,He(t)}get rangeStyles(){return o(p(this,ke))}get props(){return o(p(this,Ce))}}ke=new WeakMap,Ce=new WeakMap;var Ee,U,Z,Me;class Rs{constructor(t,e){T(this,U);O(this,"opts");O(this,"root");T(this,Ee,b(()=>this.root.opts.disabled.current||this.opts.disabled.current));T(this,Me,b(()=>({...this.root.thumbsPropsArr[this.opts.index.current],id:this.opts.id.current,onkeydown:this.onkeydown})));this.opts=t,this.root=e,He(t),this.onkeydown=this.onkeydown.bind(this)}onkeydown(t){if(o(p(this,Ee)))return;const e=this.opts.ref.current;if(!e)return;const r=this.root.getAllThumbs();if(!r.length)return;const s=r.indexOf(e);if(this.root.isMulti&&(this.root.currentThumbIdx=s),!Is.includes(t.key))return;t.preventDefault();const a=this.root.opts.min.current,n=this.root.opts.max.current,l=this.root.opts.value.current,c=Array.isArray(l)?l[s]:l,d=this.root.opts.orientation.current,h=this.root.direction,u=this.root.opts.step.current;switch(t.key){case yr:F(this,U,Z).call(this,a);break;case wr:F(this,U,Z).call(this,n);break;case mr:if(d!=="horizontal")break;if(t.metaKey){const f=h==="rl"?n:a;F(this,U,Z).call(this,f)}else h==="rl"&&c<n?F(this,U,Z).call(this,c+u):h==="lr"&&c>a&&F(this,U,Z).call(this,c-u);break;case br:if(d!=="horizontal")break;if(t.metaKey){const f=h==="rl"?a:n;F(this,U,Z).call(this,f)}else h==="rl"&&c>a?F(this,U,Z).call(this,c-u):h==="lr"&&c<n&&F(this,U,Z).call(this,c+u);break;case _r:if(t.metaKey){const f=h==="tb"?a:n;F(this,U,Z).call(this,f)}else h==="tb"&&c>a?F(this,U,Z).call(this,c-u):h!=="tb"&&c<n&&F(this,U,Z).call(this,c+u);break;case xr:if(t.metaKey){const f=h==="tb"?n:a;F(this,U,Z).call(this,f)}else h==="tb"&&c<n?F(this,U,Z).call(this,c+u):h!=="tb"&&c>a&&F(this,U,Z).call(this,c-u);break}this.root.opts.onValueCommit.current(this.root.opts.value.current)}get props(){return o(p(this,Me))}}Ee=new WeakMap,U=new WeakSet,Z=function(t){this.root.isMulti?this.root.updateValue(t,this.opts.index.current):this.root.updateValue(t)},Me=new WeakMap;const Je=new Ur("Slider.Root");function Ds(i){const{type:t,...e}=i,r=t==="single"?new Ms(e):new Vs(e);return Je.set(r)}function Os(i){return new Ns(i,Je.get())}function zs(i){return new Rs(i,Je.get())}var Fs=$("<span><!></span>");function Ls(i,t){I(t,!0);let e=A(t,"id",19,Ve),r=A(t,"ref",15,null),s=A(t,"value",15),a=A(t,"onValueChange",3,er),n=A(t,"onValueCommit",3,er),l=A(t,"disabled",3,!1),c=A(t,"min",3,0),d=A(t,"max",3,100),h=A(t,"step",3,1),u=A(t,"dir",3,"ltr"),f=A(t,"autoSort",3,!0),v=A(t,"orientation",3,"horizontal"),_=X(t,["$$slots","$$events","$$legacy","children","child","id","ref","value","type","onValueChange","onValueCommit","disabled","min","max","step","dir","autoSort","orientation"]);s()===void 0&&s(t.type==="single"?0:[]);const m=Ds({id:K.with(()=>e()),ref:K.with(()=>r(),k=>r(k)),value:K.with(()=>s(),k=>{s(k),a()(k)}),onValueCommit:K.with(()=>n()),disabled:K.with(()=>l()),min:K.with(()=>c()),max:K.with(()=>d()),step:K.with(()=>h()),dir:K.with(()=>u()),autoSort:K.with(()=>f()),orientation:K.with(()=>v()),type:t.type}),x=b(()=>Ie(_,m.props));var D=R(),E=S(D);{var L=k=>{var z=R(),q=S(z),V=is(()=>({props:o(x),...m.snippetProps}));B(q,()=>t.child,()=>o(V)),g(k,z)},M=k=>{var z=Fs();let q;var V=w(z);B(V,()=>t.children??et,()=>m.snippetProps),y(z),H(()=>q=Ct(z,q,{...o(x)})),g(k,z)};vt(E,k=>{t.child?k(L):k(M,!1)})}g(i,D),N()}var qs=$("<span><!></span>");function Ks(i,t){I(t,!0);let e=A(t,"ref",15,null),r=A(t,"id",19,Ve),s=X(t,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=Os({id:K.with(()=>r()),ref:K.with(()=>e(),u=>e(u))}),n=b(()=>Ie(s,a.props));var l=R(),c=S(l);{var d=u=>{var f=R(),v=S(f);B(v,()=>t.child,()=>({props:o(n)})),g(u,f)},h=u=>{var f=qs();let v;var _=w(f);B(_,()=>t.children??et),y(f),H(()=>v=Ct(f,v,{...o(n)})),g(u,f)};vt(c,u=>{t.child?u(d):u(h,!1)})}g(i,l),N()}var Xs=$("<span><!></span>");function Ys(i,t){I(t,!0);let e=A(t,"ref",15,null),r=A(t,"id",19,Ve),s=A(t,"disabled",3,!1),a=X(t,["$$slots","$$events","$$legacy","children","child","ref","id","index","disabled"]);const n=zs({id:K.with(()=>r()),ref:K.with(()=>e(),f=>e(f)),index:K.with(()=>t.index),disabled:K.with(()=>s())}),l=b(()=>Ie(a,n.props));var c=R(),d=S(c);{var h=f=>{var v=R(),_=S(v);B(_,()=>t.child,()=>({props:o(l)})),g(f,v)},u=f=>{var v=Xs();let _;var m=w(v);B(m,()=>t.children??et),y(v),H(()=>_=Ct(v,_,{...o(l)})),g(f,v)};vt(d,f=>{t.child?f(h):f(u,!1)})}g(i,c),N()}var Tt,$t,tt,mt,_t,le,We,ur,Bs=(ur=class extends vs{constructor(t,e){super();T(this,_t);T(this,Tt);T(this,$t);T(this,tt);T(this,mt);Lt(this,Tt,t),this.setOptions(e),this.bindMethods(),F(this,_t,le).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=p(this,Tt).defaultMutationOptions(t),ps(this.options,e)||p(this,Tt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:p(this,tt),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&nr(e.mutationKey)!==nr(this.options.mutationKey)?this.reset():((r=p(this,tt))==null?void 0:r.state.status)==="pending"&&p(this,tt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=p(this,tt))==null||t.removeObserver(this)}onMutationUpdate(t){F(this,_t,le).call(this),F(this,_t,We).call(this,t)}getCurrentResult(){return p(this,$t)}reset(){var t;(t=p(this,tt))==null||t.removeObserver(this),Lt(this,tt,void 0),F(this,_t,le).call(this),F(this,_t,We).call(this)}mutate(t,e){var r;return Lt(this,mt,e),(r=p(this,tt))==null||r.removeObserver(this),Lt(this,tt,p(this,Tt).getMutationCache().build(p(this,Tt),this.options)),p(this,tt).addObserver(this),p(this,tt).execute(t)}},Tt=new WeakMap,$t=new WeakMap,tt=new WeakMap,mt=new WeakMap,_t=new WeakSet,le=function(){var e;const t=((e=p(this,tt))==null?void 0:e.state)??ys();Lt(this,$t,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},We=function(t){$r.batch(()=>{var e,r,s,a,n,l,c,d;if(p(this,mt)&&this.hasListeners()){const h=p(this,$t).variables,u=p(this,$t).context;(t==null?void 0:t.type)==="success"?((r=(e=p(this,mt)).onSuccess)==null||r.call(e,t.data,h,u),(a=(s=p(this,mt)).onSettled)==null||a.call(s,t.data,null,h,u)):(t==null?void 0:t.type)==="error"&&((l=(n=p(this,mt)).onError)==null||l.call(n,t.error,h,u),(d=(c=p(this,mt)).onSettled)==null||d.call(c,void 0,t.error,h,u))}this.listeners.forEach(h=>{h(p(this,$t))})})},ur);function Gs(i,t){const e=kr(),r=gs(i)?i:ar(i),s=new Bs(e,qt(r));let a;r.subscribe(c=>{a=(d,h)=>{s.mutate(d,h).catch(ms)},s.setOptions(c)});const n=ar(s.getCurrentResult(),c=>s.subscribe($r.batchCalls(d=>c(d)))),{subscribe:l}=os(n,c=>({...c,mutate:a,mutateAsync:c.mutate}));return{subscribe:l}}var Us=$('<div class="flex items-center space-x-2 py-1"><!></div>'),Ws=$("<p>No tag, create a tag</p>"),js=$('<div class="mb-3 w-full space-y-2"></div>');function Hs(i,t){I(t,!0);const[e,r]=re(),s=()=>rt(o(l),"$tags",e),a=()=>rt(o(c),"$tagsSelected",e),n=b(()=>Cr({dataset_id:t.dataset_id,kind:[t.gridType==="annotations"?"annotation":"sample"]})),l=b(()=>o(n).tags),c=b(()=>o(n).tagsSelected),d=b(()=>o(n).tagSelectionToggle);Oe(i,{title:"Tags",icon:hs,children:(h,u)=>{var f=js();De(f,5,s,v=>v.tag_id,(v,_)=>{var m=Us(),x=w(m);const D=b(()=>a().has(o(_).tag_id));Er(x,{get name(){return o(_).tag_id},get isChecked(){return o(D)},get label(){return o(_).name},onCheckedChange:()=>o(d)(o(_).tag_id)}),y(m),g(v,m)},v=>{var _=Ws();g(v,_)}),y(f),g(h,f)}}),N(),r()}var Js=$('<div class="h-3 w-3 rounded-sm border"></div> <p class="flex-1 truncate text-base font-normal"> </p> <span class="text-sm text-diffuse-foreground"> </span>',1),Qs=$('<div class="width-full flex items-center space-x-2"><!> <!></div>'),Zs=$('<div class="width-full space-y-2 overflow-hidden"></div>');function ta(i,t){I(t,!0);const[e,r]=re(),s=()=>rt(a(),"$annotationFilters",e);let a=A(t,"annotationFilters",19,()=>[]);Oe(i,{title:"Labels",children:(n,l)=>{var c=Zs();De(c,5,s,({label_name:d,current_count:h,total_count:u,selected:f})=>d,(d,h)=>{let u=()=>o(h).label_name,f=()=>o(h).current_count,v=()=>o(h).total_count,_=()=>o(h).selected;var m=Qs(),x=w(m);const D=b(()=>`${u()}-label`);Wr(x,{get id(){return u()},get checked(){return _()},get"aria-labelledby"(){return o(D)},onCheckedChange:()=>t.onToggleAnnotationFilter(u())});var E=P(x,2);const L=b(()=>`${u()}-label`);_s(E,{get id(){return o(L)},get for(){return u()},class:"flex min-w-0 flex-1 cursor-pointer items-center space-x-2 text-nowrap peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(M,k)=>{var z=Js(),q=S(z),V=P(q,2),at=w(V,!0);y(V);var W=P(V,2),pt=w(W);y(W),H((xt,yt,dt)=>{jr(q,xt),ft(at,u()),ft(pt,`${yt??""} of ${dt??""}`)},[()=>`
                            border-color: ${ir(u()).color};
                            background-color: ${ir(u(),_()?1:.6).color};
                        `,()=>Xt(f()),()=>Xt(v())]),g(M,z)},$$slots:{default:!0}}),y(m),H(()=>Sr(m,"title",u())),g(d,m)}),y(c),g(n,c)},$$slots:{default:!0}}),N(),r()}function ea(i,t){I(t,!0);let e=A(t,"ref",15,null),r=X(t,["$$slots","$$events","$$legacy","ref","class"]);var s=R(),a=S(s);const n=b(()=>ot("text-lg font-semibold leading-none tracking-tight",t.class));j(a,()=>ws,(l,c)=>{c(l,st({get class(){return o(n)}},()=>r,{get ref(){return e()},set ref(d){e(d)}}))}),g(i,s),N()}var ra=$("<div><!></div>");function sa(i,t){I(t,!0);let e=A(t,"ref",15,null),r=X(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=ra();let a;var n=w(s);B(n,()=>t.children??et),y(s),ce(s,l=>e(l),()=>e()),H(l=>a=Ct(s,a,{class:l,...r}),[()=>ot("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t.class)]),g(i,s),N()}var aa=$("<div><!></div>");function na(i,t){I(t,!0);let e=A(t,"ref",15,null),r=X(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=aa();let a;var n=w(s);B(n,()=>t.children??et),y(s),ce(s,l=>e(l),()=>e()),H(l=>a=Ct(s,a,{class:l,...r}),[()=>ot("flex flex-col space-y-1.5 text-center sm:text-left",t.class)]),g(i,s),N()}function ia(i,t){I(t,!0);let e=A(t,"ref",15,null),r=X(t,["$$slots","$$events","$$legacy","ref","class"]);var s=R(),a=S(s);const n=b(()=>ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",t.class));j(a,()=>Hr,(l,c)=>{c(l,st({get class(){return o(n)}},()=>r,{get ref(){return e()},set ref(d){e(d)}}))}),g(i,s),N()}var oa=$('<!> <span class="sr-only">Close</span>',1),la=$("<!> <!>",1),da=$("<!> <!>",1);function ca(i,t){I(t,!0);let e=A(t,"ref",15,null),r=X(t,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var s=R(),a=S(s);j(a,()=>fa,(n,l)=>{l(n,st(()=>t.portalProps,{children:(c,d)=>{var h=da(),u=S(h);j(u,()=>ia,(_,m)=>{m(_,{})});var f=P(u,2);const v=b(()=>ot("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] bg-background fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",t.class));j(f,()=>Jr,(_,m)=>{m(_,st({get class(){return o(v)}},()=>r,{get ref(){return e()},set ref(x){e(x)},children:(x,D)=>{var E=la(),L=S(E);B(L,()=>t.children??et);var M=P(L,2);j(M,()=>Qr,(k,z)=>{z(k,{class:"ring-offset-background focus:ring-ring absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(q,V)=>{var at=oa(),W=S(at);Zr(W,{class:"size-4"}),gt(2),g(q,at)},$$slots:{default:!0}})}),g(x,E)},$$slots:{default:!0}}))}),g(c,h)},$$slots:{default:!0}}))}),g(i,s),N()}function ua(i,t){I(t,!0);let e=A(t,"ref",15,null),r=X(t,["$$slots","$$events","$$legacy","ref","class"]);var s=R(),a=S(s);const n=b(()=>ot("text-muted-foreground text-sm",t.class));j(a,()=>$s,(l,c)=>{c(l,st({get class(){return o(n)}},()=>r,{get ref(){return e()},set ref(d){e(d)}}))}),g(i,s),N()}const ha=Ss,fa=ts,va=async({dataset_id:i,tag_id:t,annotationIdsBody:e})=>{const r={data:void 0,error:void 0};try{const s=await Et.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/annotations",{params:{path:{dataset_id:i,tag_id:t}},body:e});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No data");r.data=s.data}catch(s){r.error="Error assigning annotationIds to a tag: "+String(s)}return r};var pa=$("<input>"),ga=$("<input>");function Or(i,t){I(t,!0);let e=A(t,"ref",15,null),r=A(t,"value",15),s=A(t,"files",15),a=X(t,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var n=R(),l=S(n);{var c=h=>{var u=pa();rr(u);let f;ce(u,v=>e(v),()=>e()),H(v=>f=Ct(u,f,{class:v,type:"file",...a}),[()=>ot("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)]),es(u,s),sr(u,r),g(h,u)},d=h=>{var u=ga();rr(u);let f;ce(u,v=>e(v),()=>e()),H(v=>f=Ct(u,f,{class:v,type:t.type,...a}),[()=>ot("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)]),sr(u,r),g(h,u)};vt(l,h=>{t.type==="file"?h(c):h(d,!1)})}g(i,n),N()}const ma=async({dataset_id:i,tag_id:t,sampleIdsBody:e})=>{const r={data:void 0,error:void 0};try{const s=await Et.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/samples",{params:{path:{dataset_id:i,tag_id:t}},body:e});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No data");r.data=s.data}catch(s){r.error="Error assigning sampleIds to tag: "+String(s)}return r},ba=async({dataset_id:i,tagInputBody:t})=>{const e={data:void 0,error:void 0};try{const r=await Et.POST("/api/datasets/{dataset_id}/tags",{params:{path:{dataset_id:i}},body:t});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No data");e.data=r.data}catch(r){e.error="Error creating tag: "+String(r)}return e};function _a(i,t){I(t,!0);let e=X(t,["$$slots","$$events","$$legacy"]);Nt(i,st({name:"eraser"},()=>e,{iconNode:[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}],["path",{d:"M22 21H7"}],["path",{d:"m5 11 9 9"}]],children:(s,a)=>{var n=R(),l=S(n);B(l,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),N()}function xa(i,t){I(t,!0);let e=X(t,["$$slots","$$events","$$legacy"]);Nt(i,st({name:"plus"},()=>e,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(s,a)=>{var n=R(),l=S(n);B(l,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),N()}var ya=$("<!> Create new Tags",1),wa=$("<!> <!>",1),Sa=$('<div class="flex space-x-2 py-1"><!></div>'),Pa=$('<!> <!> <div class="grid gap-4"><!></div> <div><!> <!></div> <!>',1),Aa=$('<div class="flex space-x-1"><!> <!></div> <!>',1);function Ta(i,t){I(t,!0);const[e,r]=re(),s=()=>rt(f,"$selectedSampleIds",e),a=()=>rt(v,"$selectedSampleAnnotationCropIds",e),n=()=>rt(o(u),"$tags",e),l=()=>rt(o(D),"$itemsSelected",e),c=()=>rt(yt,"$submitTagAndMutate",e);let d=b(()=>t.gridType==="samples"?"sample":"annotation");const h=b(()=>Cr({dataset_id:t.datasetId,kind:[o(d)]})),u=b(()=>o(h).tags),{selectedSampleIds:f,selectedSampleAnnotationCropIds:v,clearSelectedSampleAnnotationCrops:_,clearSelectedSamples:m}=Pr(),x=b(()=>t.gridType==="samples"?m:_),D=b(()=>t.gridType==="samples"?f:v);let E=bt(!1);const L=b(()=>s().size>0&&t.gridType==="samples"||a().size>0&&t.gridType==="annotations");let M=bt(""),k=bt(it([])),z=()=>{o(k).push(o(M)),V.add(o(M)),Y(M,"")};const q=b(()=>[...o(k).map(C=>({tag_id:C,name:C,kind:o(d)})),...n()].filter(C=>C.name.includes(o(M))));let V=it(new Ue);const at=C=>{V.has(C)?(V.delete(C),o(k).splice(o(k).indexOf(C),1)):V.add(C)};let W=bt(null);const pt=async()=>{await Promise.all([...o(k)].map(async C=>{var ct;const J=await ba({dataset_id:t.datasetId,tagInputBody:{name:C,description:`${C} description`,kind:o(d)}});if(J.error)throw J.error;return(ct=J.data)!=null&&ct.tag_id&&(V.delete(C),V.add(J.data.tag_id)),J})),await Promise.all([...V].map(async C=>{const J=o(d)==="sample"?await ma({dataset_id:t.datasetId,tag_id:C,sampleIdsBody:{sample_ids:[...l()]}}):await va({dataset_id:t.datasetId,tag_id:C,annotationIdsBody:{annotation_ids:[...l()]}});if(J.error)throw J.error;return J}))},xt=kr(),yt=Gs({mutationFn:async()=>{await pt()},onError:C=>{Y(W,it(C))},onSuccess:()=>{xt.invalidateQueries({queryKey:bs({dataset_id:t.datasetId})}),o(x)(),dt(!1)}}),dt=C=>{Y(E,it(C)),Y(W,null),Y(M,""),Y(k,it([])),V.clear()},Rt=b(()=>V.size>0||o(k).length>0);var Dt=Aa(),Mt=S(Dt),Gt=w(Mt);const Ut=b(()=>!o(L));Kt(Gt,{variant:"outline",get disabled(){return o(Ut)},class:"flex-1",onclick:()=>Y(E,!0),children:(C,J)=>{var ct=ya(),jt=S(ct);xa(jt,{}),gt(),g(C,ct)},$$slots:{default:!0}});var Wt=P(Gt,2);const ze=b(()=>!o(L));Kt(Wt,{variant:"outline",get disabled(){return o(ze)},size:"icon",title:"Clear selection",get onclick(){return o(x)},children:(C,J)=>{_a(C,{})},$$slots:{default:!0}}),y(Mt);var Fe=P(Mt,2);j(Fe,()=>ha,(C,J)=>{J(C,{onOpenChange:dt,get open(){return o(E)},children:(ct,jt)=>{var se=R(),Q=S(se);j(Q,()=>ca,(wt,St)=>{St(wt,{class:"sm:max-w-[425px]",children:(Ot,ae)=>{var ne=Pa(),zt=S(ne);j(zt,()=>na,(G,nt)=>{nt(G,{children:(ut,Vt)=>{var ht=wa(),Ft=S(ht);j(Ft,()=>ea,(It,Ht)=>{Ht(It,{children:(ie,Xe)=>{gt();var Jt=Qt();H(()=>ft(Jt,`Add the selected ${o(d)??""} to a tag`)),g(ie,Jt)},$$slots:{default:!0}})});var Ke=P(Ft,2);j(Ke,()=>ua,(It,Ht)=>{Ht(It,{children:(ie,Xe)=>{gt();var Jt=Qt();H(()=>ft(Jt,`Add the selected ${l().size??""}
                ${o(d)??""} to an new or existing tag. Tags can later be exported.`)),g(ie,Jt)},$$slots:{default:!0}})}),g(ut,ht)},$$slots:{default:!0}})});var Qe=P(zt,2);{var Fr=G=>{fs(G,{title:"Error occured",children:(nt,ut)=>{gt();var Vt=Qt();H(()=>ft(Vt,o(W))),g(nt,Vt)}})};vt(Qe,G=>{o(W)&&G(Fr)})}var Le=P(Qe,2),Lr=w(Le);Or(Lr,{type:"text",placeholder:"Create or search tags",autofocus:!0,get value(){return o(M)},set value(G){Y(M,it(G))}}),y(Le);var qe=P(Le,2),Ze=w(qe);De(Ze,17,()=>o(q),G=>G.tag_id,(G,nt)=>{var ut=Sa(),Vt=w(ut);const ht=b(()=>`tagCreateDialog-tag-${o(nt).tag_id}`),Ft=b(()=>V.has(o(nt).tag_id));Er(Vt,{get name(){return o(ht)},get isChecked(){return o(Ft)},get label(){return o(nt).name},onCheckedChange:()=>at(o(nt).tag_id)}),y(ut),g(G,ut)});var qr=P(Ze,2);{var Kr=G=>{const nt=b(()=>ot("",...rs({variant:"outline"})));Kt(G,{type:"button",variant:"outline",get class(){return o(nt)},onclick:z,children:(ut,Vt)=>{gt();var ht=Qt();H(()=>ft(ht,`Create tag "${o(M)??""}"`)),g(ut,ht)},$$slots:{default:!0}})};vt(qr,G=>{o(M)&&G(Kr)})}y(qe);var Xr=P(qe,2);j(Xr,()=>sa,(G,nt)=>{nt(G,{children:(ut,Vt)=>{var ht=R(),Ft=S(ht);{var Ke=It=>{Kt(It,{type:"submit",onclick:()=>c().mutate(),children:(Ht,ie)=>{gt();var Xe=Qt("Save changes");g(Ht,Xe)},$$slots:{default:!0}})};vt(Ft,It=>{o(Rt)&&It(Ke)})}g(ut,ht)},$$slots:{default:!0}})}),g(Ot,ne)},$$slots:{default:!0}})}),g(ct,se)},$$slots:{default:!0}})}),g(i,Dt),N(),r()}var $a=$(`<span class="bg-secondary relative grow overflow-hidden rounded-full data-[orientation='horizontal']:h-2 data-[orientation='vertical']:h-full data-[orientation='horizontal']:w-full data-[orientation='vertical']:w-2"><!></span> <!>`,1);function je(i,t){I(t,!0);let e=A(t,"ref",15,null),r=A(t,"value",15),s=A(t,"orientation",3,"horizontal"),a=X(t,["$$slots","$$events","$$legacy","ref","value","orientation","class"]);var n=R(),l=S(n);const c=b(()=>ot("relative flex touch-none select-none items-center data-[orientation='vertical']:h-full data-[orientation='vertical']:min-h-44 data-[orientation='horizontal']:w-full data-[orientation='vertical']:w-auto data-[orientation='vertical']:flex-col",t.class));j(l,()=>Ls,(d,h)=>{h(d,st({get orientation(){return s()},get class(){return o(c)}},()=>a,{get ref(){return e()},set ref(f){e(f)},get value(){return r()},set value(f){r(f)},children:(f,v)=>{let _=()=>v==null?void 0:v().thumbs;var m=$a(),x=S(m),D=w(x);j(D,()=>Ks,(L,M)=>{M(L,{class:"bg-primary absolute data-[orientation='horizontal']:h-full data-[orientation='vertical']:w-full"})}),y(x);var E=P(x,2);De(E,17,_,ss,(L,M)=>{var k=R(),z=S(k);j(z,()=>Ys,(q,V)=>{V(q,{get index(){return o(M)},class:"border-primary bg-background ring-offset-background focus-visible:ring-ring block size-5 rounded-full border-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})}),g(L,k)}),H(()=>Sr(x,"data-orientation",s())),g(f,m)},$$slots:{default:!0}}))}),g(i,n),N()}function ka(i,t){I(t,!0);let e=X(t,["$$slots","$$events","$$legacy"]);Nt(i,st({name:"component"},()=>e,{iconNode:[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}]],children:(s,a)=>{var n=R(),l=S(n);B(l,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),N()}function Ca(i,t){I(t,!0);let e=X(t,["$$slots","$$events","$$legacy"]);Nt(i,st({name:"grid-3x3"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]],children:(s,a)=>{var n=R(),l=S(n);B(l,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),N()}function zr(i,t){I(t,!0);let e=X(t,["$$slots","$$events","$$legacy"]);Nt(i,st({name:"image"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(s,a)=>{var n=R(),l=S(n);B(l,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),N()}function Ea(i,t){I(t,!0);let e=X(t,["$$slots","$$events","$$legacy"]);Nt(i,st({name:"search"},()=>e,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(s,a)=>{var n=R(),l=S(n);B(l,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),N()}function Ma(i,t){I(t,!0);let e=X(t,["$$slots","$$events","$$legacy"]);Nt(i,st({name:"sliders-horizontal"},()=>e,{iconNode:[["line",{x1:"21",x2:"14",y1:"4",y2:"4"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22"}]],children:(s,a)=>{var n=R(),l=S(n);B(l,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),N()}var Va=$('<div class="w-300 flex space-x-4 text-diffuse-foreground"><!> <!> <!></div>');function Ia(i,t){I(t,!0);const e=A(t,"min",3,100),r=A(t,"max",3,1500),s=as.throttle(h=>{t.onChange(h[0])},100);var a=Va(),n=w(a);Ca(n,{class:"h-6 w-6"});var l=P(n,2);const c=b(()=>[t.width]);je(l,{class:"w-full flex-1",get value(){return o(c)},get min(){return e()},get max(){return r()},step:1,onValueChange:s});var d=P(l,2);zr(d,{class:"h-6 w-6"}),y(a),g(i,a),N()}var Na=$('<div class="space-y-4"><div class="space-y-1"><h2 class="text-md">Width Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div> <div class="space-y-1"><h2 class="text-md">Height Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div></div>');function Ra(i,t){I(t,!0);const[e,r]=re(),s=()=>rt(t.dimensions,"$dimensions",e),{min_width:a,max_width:n,min_height:l,max_height:c}=s(),d=u=>{t.onChange({min_width:u[0],max_width:u[1],min_height:l,max_height:c})},h=u=>{t.onChange({min_width:a,max_width:n,min_height:u[0],max_height:u[1]})};Oe(i,{title:"Metadata",children:(u,f)=>{var v=Na(),_=w(v),m=P(w(_),2),x=w(m),D=w(x);y(x);var E=P(x,2),L=w(E);y(E),y(m);var M=P(m,2),k=w(M);je(k,{type:"multiple",class:"filter-width",min:a,max:n,value:[a,n],onValueChange:d}),y(M),y(_);var z=P(_,2),q=P(w(z),2),V=w(q),at=w(V);y(V);var W=P(V,2),pt=w(W);y(W),y(q);var xt=P(q,2),yt=w(xt);je(yt,{type:"multiple",class:"filter-height",min:l,max:c,value:[l,c],onValueChange:h}),y(xt),y(z),y(v),H((dt,Rt,Dt,Mt)=>{ft(D,`${dt??""}px`),ft(L,`${Rt??""}px`),ft(at,`${Dt??""}px`),ft(pt,`${Mt??""}px`)},[()=>Xt(s().min_width),()=>Xt(s().max_width),()=>Xt(s().min_height),()=>Xt(s().max_height)]),g(u,v)},$$slots:{default:!0}}),N(),r()}var Da=$("<!> Samples",1),Oa=$("<!> Annotations",1),za=$('<div class="mb-5 mt-2 text-lg font-semibold">Collections</div> <!> <div class="flex space-x-2"><!> <!></div>',1);function Fa(i,t){I(t,!0);var e=za(),r=P(S(e),2);Tr(r,{class:"mb-4 bg-border-hard"});var s=P(r,2),a=w(s);const n=b(()=>ot("flex-1","px-2",t.gridType=="samples"&&"inline-flex rounded-md bg-muted")),l=b(()=>de.toSamples(t.datasetId));Kt(a,{variant:"ghost",get class(){return o(n)},get href(){return o(l)},"data-sveltekit-noscroll":!0,children:(u,f)=>{var v=Da(),_=S(v);zr(_,{class:"size-4"}),gt(),g(u,v)},$$slots:{default:!0}});var c=P(a,2);const d=b(()=>ot("flex-1","px-2",t.gridType=="annotations"&&"inline-flex rounded-md bg-muted")),h=b(()=>de.toAnnotations(t.datasetId));Kt(c,{get class(){return o(d)},variant:"ghost",get href(){return o(h)},"data-sveltekit-noscroll":!0,children:(u,f)=>{var v=Oa(),_=S(v);ka(_,{class:"size-4"}),gt(),g(u,v)},$$slots:{default:!0}}),y(s),g(i,e),N()}function La(){const i=Pt({width:200,height:200});return{sampleSize:i,updateWidth:e=>{i.set({width:e,height:e})}}}const lr=async({dataset_id:i,filtered_labels:t,dimensions:e})=>{const r={data:[],error:void 0};try{const s=await Et.GET("/api/annotations/count",{params:{query:{dataset_id:i,...t&&{filtered_labels:t},...(e==null?void 0:e.min_width)&&{min_width:e.min_width},...(e==null?void 0:e.max_width)&&{max_width:e.max_width},...(e==null?void 0:e.min_height)&&{min_height:e.min_height},...(e==null?void 0:e.max_height)&&{max_height:e.max_height}}}});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No annotation counts found");r.data=s.data.map(a=>({label_name:a.label_name,total_count:a.total_count,current_count:a.current_count}))}catch(s){console.error("Error loading annotation counts:",s),r.error="Error loading annotation counts: "+String(s)}return r},qa=async()=>{const i={data:[],error:void 0};try{const t=await Et.GET("/api/annotation_labels");t.data&&(i.data=t.data)}catch(t){i.error="Error loading annotation labels: "+String(t)}return i},Ka=async({dataset_id:i,annotation_labels:t})=>{const e={data:void 0,error:void 0};try{const r=await Et.GET("/api/samples/dimensions",{params:{query:{dataset_id:i,annotation_labels:t}}});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No dimension bounds data");e.data=r.data}catch(r){e.error="Error loading dimension bounds: "+String(r)}return e},dr=(i,t)=>i.map(e=>({...e,selected:t.includes(e.label_name)})),cr=i=>t=>t.includes(i)?t.filter(e=>e!==i):[...t,i],Xa=async({params:{dataset_id:i}})=>{const{data:t,error:e}=await ds(i);if(e||!t)throw cs(307,de.toHome());const r=Pt({min_width:0,max_width:0,min_height:0,max_height:0}),{selectedAnnotationFilterIds:s}=Pr(),a=Array.from(qt(s)),n=Pt([]),l=Pt(a),c=Pt([]),d=Pt(void 0),h=m=>{d.set(m)},[u]=await Promise.all([qa().then(m=>{const x=m.data.reduce((E,L)=>({...E,[L.annotation_label_name]:L.annotation_label_id}),{}),D=Object.entries(x).filter(([,E])=>a.includes(E)).map(([E])=>E);return n.set(D),x}),Ka({dataset_id:i}).then(({data:m})=>{m&&r.set(m)}),lr({dataset_id:i}).then(({data:m})=>{if(m){const x=qt(n);c.set(dr(m,x))}})]),f=async()=>{try{const m=qt(n),{data:x}=await lr({dataset_id:i,filtered_labels:m.length>0?m:void 0,dimensions:qt(r)});x&&c.update(()=>dr(x||[],m))}catch(m){d.set(`Failed to load annotations: ${String(m)}`)}},v=m=>{m&&(r.set(m),f())};return{datasetId:i,annotationFilters:c,toggleAnnotationFilterSelection:m=>{n.update(cr(m));const x=u[m];s.update(D=>(D.has(x)?D.delete(x):D.add(x),D)),l.update(cr(x)),f()},annotationFilterLabels:u,selectedAnnotationFilter:n,selectedAnnotationFilterIds:l,dimensions:Ar(r),updateDimensions:v,error:qt(d),setError:h,sampleSize:La()}},un=Object.freeze(Object.defineProperty({__proto__:null,load:Xa},Symbol.toStringTag,{value:"Module"})),Ya=async({query_text:i="",model_id:t=""})=>{const e={data:[],error:void 0};try{const r=await Et.GET("/api/text_embedding/embed_text",{params:{query:{query_text:i,model_id:t}}});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No data");e.data=r.data}catch(r){e.error="Error creating text embedding: "+String(r)}return e},Ba=()=>{const i=Pt([]),t=Pt(null);return Et.GET("/api/features").then(e=>{e.data&&i.set(e.data)}).catch(e=>{t.set(e)}),{error:t,featureFlags:Ar(i)}};var Ga=$('<div class="space-y-2"><!> <!></div>'),Ua=$('<div class="relative"><!> <!></div>'),Wa=$('<div class="flex h-full w-full space-x-4 px-4 pb-4"><div class="flex w-80 flex-col space-y-6 rounded-[1vw] bg-card py-4"><div class="px-4"><!></div> <div class="min-h-0 flex-1 space-y-2 overflow-y-auto px-4 dark:[color-scheme:dark]"><div><!> <!></div> <!></div></div> <div class="flex1 flex flex-grow flex-col space-y-4 rounded-[1vw] bg-card p-4"><div class="my-2 flex items-center space-x-4"><div class="flex-1"><!></div> <div class="w-4/12"><!></div></div> <!> <div class="flex min-h-0 flex-1"><!></div></div></div>');function hn(i,t){I(t,!0);const[e,r]=re(),s=()=>rt(us,"$page",e),a=()=>rt(x,"$textEmbedding",e),n=()=>rt(q,"$featureFlags",e),l=()=>rt(L,"$bonndedSampleSize",e);let c=s().params.dataset_id;const{dimensions:d,updateDimensions:h,annotationFilters:u,toggleAnnotationFilterSelection:f,sampleSize:v,setError:_,globalStorage:{setTextEmbedding:m,textEmbedding:x,setLastGridType:D}}=t.data;let E=bt("samples");ls(()=>{Y(E,it(s().url.pathname===de.toAnnotations(c)?"annotations":"samples")),D(o(E))});const L=v.sampleSize;let M=bt(it(a()?a().queryText:""));async function k(){if(o(M).trim()!=="")try{return(await Ya({query_text:o(M),model_id:void 0})).data}catch(Q){_(Q.message),console.error("Error during API call:",Q)}}async function z(Q){if(Q.key==="Enter"){const wt=await k();m({queryText:o(M),embedding:wt})}}const{featureFlags:q}=Ba(),V=b(()=>n().some(Q=>Q==="embeddingSearchEnabled"));var at=Wa(),W=w(at),pt=w(W),xt=w(pt);Fa(xt,{datasetId:c,get gridType(){return o(E)}}),y(pt);var yt=P(pt,2),dt=w(yt),Rt=w(dt);Hs(Rt,{dataset_id:c,get gridType(){return o(E)}});var Dt=P(Rt,2);Ta(Dt,{datasetId:c,get gridType(){return o(E)}}),y(dt);var Mt=P(dt,2);Oe(Mt,{title:"Filters",icon:Ma,children:(Q,wt)=>{var St=Ga(),Ot=w(St);ta(Ot,{annotationFilters:u,onToggleAnnotationFilter:f});var ae=P(Ot,2);{var ne=zt=>{Ra(zt,{dimensions:d,onChange:h})};vt(ae,zt=>{d&&zt(ne)})}y(St),g(Q,St)}}),y(yt),y(W);var Gt=P(W,2),Ut=w(Gt),Wt=w(Ut),ze=w(Wt);{var Fe=Q=>{var wt=Ua(),St=w(wt);Ea(St,{class:"absolute left-2 top-[50%] h-4 w-4 translate-y-[-50%] text-muted-foreground"});var Ot=P(St,2);Or(Ot,{placeholder:"Search",class:"pl-8",onkeydown:z,get value(){return o(M)},set value(ae){Y(M,it(ae))}}),y(wt),g(Q,wt)};vt(ze,Q=>{o(E)==="samples"&&o(V)&&Q(Fe)})}y(Wt);var C=P(Wt,2),J=w(C);Ia(J,{get width(){return l().width},get onChange(){return v.updateWidth}}),y(C),y(Ut);var ct=P(Ut,2);Tr(ct,{class:"mb-4 bg-border-hard"});var jt=P(ct,2),se=w(jt);ns(se,t,"default",{},null),y(jt),y(Gt),y(at),g(i,at),N(),r()}export{hn as component,un as universal};
