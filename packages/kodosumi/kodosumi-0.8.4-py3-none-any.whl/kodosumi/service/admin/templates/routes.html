{% extends "_main.html" %}

{% block head %}
<style>
    block
</style>
{% endblock %}

{% block headline %}
Agentic Routes
{% endblock %}

{% block menu %}
<div class="field prefix">
    <i>directions</i>
    <input type="text" readonly placeholder="Routes"/>
</div>
{% endblock %}

{% block main %}
<div class="large"></div>
<p>
    The following agentic nodes have been registered. The endpoints either
    address an <code>openapi.json</code> endpoint or a <code>/-/routes</code>
    endpoint.
</p>
<form method="POST">
    <div class="field textarea border large">
        <div class="row right-align">
            <div>
                <a target="_blank"href="/schema/swagger">
                    <i class="small">help</i>
                    <div>&nbsp;openapi</div>
                </a>
            </div>
          </div>
        <textarea name="routes">{{ items | join("\n") }}</textarea>
    </div>
    <div class="space"></div>
    <button class="tertiary" type="submit">Reconnect</button>
</form>

{% if routes %}
<div class="space large"></div>
<h3>Connected Service Routes:</h3>
<div class="space large"></div>
    {% for route in routes %}
    <details>
        <summary>
            <i class="small">expand_content</i>
            <bold>
                {{ route }}
            </bold>
        </summary>
        <p><article><pre style="font-family: monospace; white-space: pre-wrap;">{{ routes[route] | tojson(indent=2) }}</article></pre></p>
      </details>
    <div class="space"></div>
    {% endfor %}
</div>
{% endif %}

{% endblock %}