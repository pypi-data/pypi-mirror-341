import{a as U,b as J,t as bt,c as an}from"./disclose-version.CZXCSga2.mjs";import{i as Ye}from"./legacy.Cvgq_wkp.mjs";import{h as Sn,e as la,i as ca,b0 as ua,L as fa,d as da,A as ma,z as ga,U as pa,C as ha,p as xe,X as zn,I as Ae,t as fe,b as Ue,_ as Te,f as Se,g as n,c as ye,N as he,r as de,aD as ie,a_ as Nt,s as T,n as lt,m as X,a1 as _a,l as Qe,a as zt,b1 as yn,M as Qt,aG as Ft,Z as Ta,b2 as bn,a$ as Rn}from"./runtime.NF8NW0fQ.mjs";import{s as Ct,e as W,p as Nn,b as ct,a as je}from"./store.CrzbHEEA.mjs";import{p as D,i as ut}from"./props.C4_rjmFK.mjs";import{c as Wn}from"./Container.6BinmbdA.mjs";import{p as va,e as $n,i as Ea}from"./theme.Bkixu2VD.mjs";import{r as Aa,as as Sa,u as ft,q as Bn,t as Pe,by as ya,bz as ba,bA as Ra,bB as Na}from"./runtime-require.D-4W5vzX.mjs";import{b as Gn}from"./IconButton.fMA_6rdY.mjs";import{s as Ca,b as ee,p as rt,t as wa,v as Da,f as jn,I as Ht,w as Oa,x as La,S as Mt,g as Pt,y as Ia,o as ka,a as Yn,z as Ma,A as Pa,B as xa,C as Cn,j as Ua,i as Fa}from"./Shortcut.CnncW8ov.mjs";import{s as et,x as Ha}from"./backend.CuvxjHSt.mjs";import{c as qe,o as qn}from"./index-client.CMnCpbS1.mjs";import{d as za,w as Xn}from"./index.BmKPAsrv.mjs";import{d as on,W as Kn,P as Vn,D as jt,B as Wa}from"./Badge.DMAIrrU1.mjs";import{a as $a}from"./input.Cvf2xTFQ.mjs";import{b as sn}from"./this.COGKo2H1.mjs";import{W as Ba}from"./WithTooltip.DifYCkA1.mjs";function Ga(a,e,l){Sn&&la();var s=a,_=pa,g,c=ca()?ua:fa;da(()=>{c(_,_=e())&&(g&&ma(g),g=ga(()=>l(s)))}),Sn&&(s=ha)}function Zn(a){const e=a.getRootNode();return e.getSelection?e.getSelection():document.getSelection()}function ja(a){const e=a.rangeCount;return e===0?null:a.getRangeAt(e-1)}const ms=Symbol("direction"),rn=Symbol("tagActionsShortcuts");function Ya(a,e,l){document.execCommand(a,e,l)}function Jn(a,e,l){if(!a.parentNode||a===e)return l;{const s=a.parentNode,_=[Array.prototype.indexOf.call(a.parentNode.childNodes,a),...l];return Jn(s,e,_)}}function wn(a,e){return Jn(a,e,[])}function ln(a,e){if(e.length===0)return a;if(a.childNodes[e[0]]){const[l,...s]=e;return ln(a.childNodes[l],s)}else return null}var cn=(a=>(a[a.Before=-1]="Before",a[a.Equal=0]="Equal",a[a.After=1]="After",a))(cn||{});function qa(a,e){const l=Math.min(a.coordinates.length,e.coordinates.length);for(let s=0;s<=l;s++){if(a.coordinates.length===s)return e.coordinates.length===s?a.offset<e.offset?-1:a.offset>e.offset?1:0:-1;if(e.coordinates.length===s)return 1;if(a.coordinates[s]<e.coordinates[s])return-1;if(a.coordinates[s]>e.coordinates[s])return 1}throw new Error("compareLocations: Should never happen")}function Xa(a){const e=Zn(a),l=ja(e);if(!l)return null;const s=l.collapsed,g={coordinates:wn(e.anchorNode,a),offset:e.anchorOffset};if(s)return{anchor:g,collapsed:s};const f={coordinates:wn(e.focusNode,a),offset:e.focusOffset},E=qa(g,f)===cn.After?"backward":"forward";return{anchor:g,focus:f,collapsed:s,direction:E}}function Ka(a){a.empty()}function Va(a,e,l,s){const _=s.focus,g=_.offset,c=ln(a,_.coordinates);s.direction==="forward"?(l.setEnd(c,g),e.addRange(l)):(e.addRange(l),e.extend(c,g))}function Za(a){return Xa(a)}function Ja(a,e){const l=Zn(a);Ka(l);const s=new Range,_=ln(a,e.anchor.coordinates);s.setStart(_,e.anchor.offset),e.collapsed?(s.collapse(!0),l.addRange(s)):Va(a,l,s,e)}Aa("anki/location",{Position:cn,restoreSelection:Ja,saveSelection:Za});/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:Qn,setPrototypeOf:Dn,isFrozen:Qa,getPrototypeOf:eo,getOwnPropertyDescriptor:to}=Object;let{freeze:me,seal:be,create:ea}=Object,{apply:en,construct:tn}=typeof Reflect<"u"&&Reflect;me||(me=function(e){return e});be||(be=function(e){return e});en||(en=function(e,l,s){return e.apply(l,s)});tn||(tn=function(e,l){return new e(...l)});const It=ge(Array.prototype.forEach),no=ge(Array.prototype.lastIndexOf),On=ge(Array.prototype.pop),vt=ge(Array.prototype.push),ao=ge(Array.prototype.splice),xt=ge(String.prototype.toLowerCase),Yt=ge(String.prototype.toString),Ln=ge(String.prototype.match),Et=ge(String.prototype.replace),oo=ge(String.prototype.indexOf),so=ge(String.prototype.trim),Ce=ge(Object.prototype.hasOwnProperty),ue=ge(RegExp.prototype.test),At=io(TypeError);function ge(a){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var l=arguments.length,s=new Array(l>1?l-1:0),_=1;_<l;_++)s[_-1]=arguments[_];return en(a,e,s)}}function io(a){return function(){for(var e=arguments.length,l=new Array(e),s=0;s<e;s++)l[s]=arguments[s];return tn(a,l)}}function C(a,e){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xt;Dn&&Dn(a,null);let s=e.length;for(;s--;){let _=e[s];if(typeof _=="string"){const g=l(_);g!==_&&(Qa(e)||(e[s]=g),_=g)}a[_]=!0}return a}function ro(a){for(let e=0;e<a.length;e++)Ce(a,e)||(a[e]=null);return a}function Je(a){const e=ea(null);for(const[l,s]of Qn(a))Ce(a,l)&&(Array.isArray(s)?e[l]=ro(s):s&&typeof s=="object"&&s.constructor===Object?e[l]=Je(s):e[l]=s);return e}function St(a,e){for(;a!==null;){const s=to(a,e);if(s){if(s.get)return ge(s.get);if(typeof s.value=="function")return ge(s.value)}a=eo(a)}function l(){return null}return l}const In=me(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qt=me(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Xt=me(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),lo=me(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Kt=me(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),co=me(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kn=me(["#text"]),Mn=me(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Vt=me(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pn=me(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),kt=me(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),uo=be(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fo=be(/<%[\w\W]*|[\w\W]*%>/gm),mo=be(/\$\{[\w\W]*/gm),go=be(/^data-[\-\w.\u00B7-\uFFFF]+$/),po=be(/^aria-[\-\w]+$/),ta=be(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ho=be(/^(?:\w+script|data):/i),_o=be(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),na=be(/^html$/i),To=be(/^[a-z][.\w]*(-[.\w]+)+$/i);var xn=Object.freeze({__proto__:null,ARIA_ATTR:po,ATTR_WHITESPACE:_o,CUSTOM_ELEMENT:To,DATA_ATTR:go,DOCTYPE_NAME:na,ERB_EXPR:fo,IS_ALLOWED_URI:ta,IS_SCRIPT_OR_DATA:ho,MUSTACHE_EXPR:uo,TMPLIT_EXPR:mo});const yt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},vo=function(){return typeof window>"u"?null:window},Eo=function(e,l){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const _="data-tt-policy-suffix";l&&l.hasAttribute(_)&&(s=l.getAttribute(_));const g="dompurify"+(s?"#"+s:"");try{return e.createPolicy(g,{createHTML(c){return c},createScriptURL(c){return c}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},Un=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function aa(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vo();const e=h=>aa(h);if(e.version="3.2.5",e.removed=[],!a||!a.document||a.document.nodeType!==yt.document||!a.Element)return e.isSupported=!1,e;let{document:l}=a;const s=l,_=s.currentScript,{DocumentFragment:g,HTMLTemplateElement:c,Node:f,Element:v,NodeFilter:E,NamedNodeMap:R=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:L,DOMParser:A,trustedTypes:r}=a,M=v.prototype,w=St(M,"cloneNode"),te=St(M,"remove"),$=St(M,"nextSibling"),G=St(M,"childNodes"),H=St(M,"parentNode");if(typeof c=="function"){const h=l.createElement("template");h.content&&h.content.ownerDocument&&(l=h.content.ownerDocument)}let d,j="";const{implementation:P,createNodeIterator:y,createDocumentFragment:I,getElementsByTagName:Y}=l,{importNode:ne}=s;let x=Un();e.isSupported=typeof Qn=="function"&&typeof H=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:re,ERB_EXPR:F,TMPLIT_EXPR:b,DATA_ATTR:u,ARIA_ATTR:N,IS_SCRIPT_OR_DATA:k,ATTR_WHITESPACE:oe,CUSTOM_ELEMENT:K}=xn;let{IS_ALLOWED_URI:_e}=xn,O=null;const le=C({},[...In,...qt,...Xt,...Kt,...kn]);let q=null;const De=C({},[...Mn,...Vt,...Pn,...kt]);let B=Object.seal(ea(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xe=null,dt=null,wt=!0,tt=!0,Dt=!1,Fe=!0,Re=!1,nt=!0,ke=!1,Oe=!1,mt=!1,He=!1,ze=!1,Ke=!1,gt=!0,at=!1;const ot="user-content-";let st=!0,We=!1,$e={},Ne=null;const Ve=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let pt=null;const Ot=C({},["audio","video","img","source","image","track"]);let o=null;const m=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),S="http://www.w3.org/1998/Math/MathML",V="http://www.w3.org/2000/svg",Z="http://www.w3.org/1999/xhtml";let Be=Z,ht=!1,_t=null;const Wt=C({},[S,V,Z],Yt);let ve=C({},["mi","mo","mn","ms","mtext"]),Ee=C({},["annotation-xml"]);const $t=C({},["title","style","font","a","script"]);let Ze=null;const Ge=["application/xhtml+xml","text/html"],oa="text/html";let Q=null,it=null;const sa=l.createElement("form"),un=function(t){return t instanceof RegExp||t instanceof Function},Bt=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(it&&it===t)){if((!t||typeof t!="object")&&(t={}),t=Je(t),Ze=Ge.indexOf(t.PARSER_MEDIA_TYPE)===-1?oa:t.PARSER_MEDIA_TYPE,Q=Ze==="application/xhtml+xml"?Yt:xt,O=Ce(t,"ALLOWED_TAGS")?C({},t.ALLOWED_TAGS,Q):le,q=Ce(t,"ALLOWED_ATTR")?C({},t.ALLOWED_ATTR,Q):De,_t=Ce(t,"ALLOWED_NAMESPACES")?C({},t.ALLOWED_NAMESPACES,Yt):Wt,o=Ce(t,"ADD_URI_SAFE_ATTR")?C(Je(m),t.ADD_URI_SAFE_ATTR,Q):m,pt=Ce(t,"ADD_DATA_URI_TAGS")?C(Je(Ot),t.ADD_DATA_URI_TAGS,Q):Ot,Ne=Ce(t,"FORBID_CONTENTS")?C({},t.FORBID_CONTENTS,Q):Ve,Xe=Ce(t,"FORBID_TAGS")?C({},t.FORBID_TAGS,Q):{},dt=Ce(t,"FORBID_ATTR")?C({},t.FORBID_ATTR,Q):{},$e=Ce(t,"USE_PROFILES")?t.USE_PROFILES:!1,wt=t.ALLOW_ARIA_ATTR!==!1,tt=t.ALLOW_DATA_ATTR!==!1,Dt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Fe=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Re=t.SAFE_FOR_TEMPLATES||!1,nt=t.SAFE_FOR_XML!==!1,ke=t.WHOLE_DOCUMENT||!1,He=t.RETURN_DOM||!1,ze=t.RETURN_DOM_FRAGMENT||!1,Ke=t.RETURN_TRUSTED_TYPE||!1,mt=t.FORCE_BODY||!1,gt=t.SANITIZE_DOM!==!1,at=t.SANITIZE_NAMED_PROPS||!1,st=t.KEEP_CONTENT!==!1,We=t.IN_PLACE||!1,_e=t.ALLOWED_URI_REGEXP||ta,Be=t.NAMESPACE||Z,ve=t.MATHML_TEXT_INTEGRATION_POINTS||ve,Ee=t.HTML_INTEGRATION_POINTS||Ee,B=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&un(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(B.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&un(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(B.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(B.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Re&&(tt=!1),ze&&(He=!0),$e&&(O=C({},kn),q=[],$e.html===!0&&(C(O,In),C(q,Mn)),$e.svg===!0&&(C(O,qt),C(q,Vt),C(q,kt)),$e.svgFilters===!0&&(C(O,Xt),C(q,Vt),C(q,kt)),$e.mathMl===!0&&(C(O,Kt),C(q,Pn),C(q,kt))),t.ADD_TAGS&&(O===le&&(O=Je(O)),C(O,t.ADD_TAGS,Q)),t.ADD_ATTR&&(q===De&&(q=Je(q)),C(q,t.ADD_ATTR,Q)),t.ADD_URI_SAFE_ATTR&&C(o,t.ADD_URI_SAFE_ATTR,Q),t.FORBID_CONTENTS&&(Ne===Ve&&(Ne=Je(Ne)),C(Ne,t.FORBID_CONTENTS,Q)),st&&(O["#text"]=!0),ke&&C(O,["html","head","body"]),O.table&&(C(O,["tbody"]),delete Xe.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw At('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw At('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');d=t.TRUSTED_TYPES_POLICY,j=d.createHTML("")}else d===void 0&&(d=Eo(r,_)),d!==null&&typeof j=="string"&&(j=d.createHTML(""));me&&me(t),it=t}},fn=C({},[...qt,...Xt,...lo]),dn=C({},[...Kt,...co]),ia=function(t){let i=H(t);(!i||!i.tagName)&&(i={namespaceURI:Be,tagName:"template"});const p=xt(t.tagName),z=xt(i.tagName);return _t[t.namespaceURI]?t.namespaceURI===V?i.namespaceURI===Z?p==="svg":i.namespaceURI===S?p==="svg"&&(z==="annotation-xml"||ve[z]):!!fn[p]:t.namespaceURI===S?i.namespaceURI===Z?p==="math":i.namespaceURI===V?p==="math"&&Ee[z]:!!dn[p]:t.namespaceURI===Z?i.namespaceURI===V&&!Ee[z]||i.namespaceURI===S&&!ve[z]?!1:!dn[p]&&($t[p]||!fn[p]):!!(Ze==="application/xhtml+xml"&&_t[t.namespaceURI]):!1},Le=function(t){vt(e.removed,{element:t});try{H(t).removeChild(t)}catch{te(t)}},Lt=function(t,i){try{vt(e.removed,{attribute:i.getAttributeNode(t),from:i})}catch{vt(e.removed,{attribute:null,from:i})}if(i.removeAttribute(t),t==="is")if(He||ze)try{Le(i)}catch{}else try{i.setAttribute(t,"")}catch{}},mn=function(t){let i=null,p=null;if(mt)t="<remove></remove>"+t;else{const ae=Ln(t,/^[\r\n\t ]+/);p=ae&&ae[0]}Ze==="application/xhtml+xml"&&Be===Z&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const z=d?d.createHTML(t):t;if(Be===Z)try{i=new A().parseFromString(z,Ze)}catch{}if(!i||!i.documentElement){i=P.createDocument(Be,"template",null);try{i.documentElement.innerHTML=ht?j:z}catch{}}const se=i.body||i.documentElement;return t&&p&&se.insertBefore(l.createTextNode(p),se.childNodes[0]||null),Be===Z?Y.call(i,ke?"html":"body")[0]:ke?i.documentElement:se},gn=function(t){return y.call(t.ownerDocument||t,t,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},Gt=function(t){return t instanceof L&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof R)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},pn=function(t){return typeof f=="function"&&t instanceof f};function Me(h,t,i){It(h,p=>{p.call(e,t,i,it)})}const hn=function(t){let i=null;if(Me(x.beforeSanitizeElements,t,null),Gt(t))return Le(t),!0;const p=Q(t.nodeName);if(Me(x.uponSanitizeElement,t,{tagName:p,allowedTags:O}),t.hasChildNodes()&&!pn(t.firstElementChild)&&ue(/<[/\w!]/g,t.innerHTML)&&ue(/<[/\w!]/g,t.textContent)||t.nodeType===yt.progressingInstruction||nt&&t.nodeType===yt.comment&&ue(/<[/\w]/g,t.data))return Le(t),!0;if(!O[p]||Xe[p]){if(!Xe[p]&&Tn(p)&&(B.tagNameCheck instanceof RegExp&&ue(B.tagNameCheck,p)||B.tagNameCheck instanceof Function&&B.tagNameCheck(p)))return!1;if(st&&!Ne[p]){const z=H(t)||t.parentNode,se=G(t)||t.childNodes;if(se&&z){const ae=se.length;for(let pe=ae-1;pe>=0;--pe){const Ie=w(se[pe],!0);Ie.__removalCount=(t.__removalCount||0)+1,z.insertBefore(Ie,$(t))}}}return Le(t),!0}return t instanceof v&&!ia(t)||(p==="noscript"||p==="noembed"||p==="noframes")&&ue(/<\/no(script|embed|frames)/i,t.innerHTML)?(Le(t),!0):(Re&&t.nodeType===yt.text&&(i=t.textContent,It([re,F,b],z=>{i=Et(i,z," ")}),t.textContent!==i&&(vt(e.removed,{element:t.cloneNode()}),t.textContent=i)),Me(x.afterSanitizeElements,t,null),!1)},_n=function(t,i,p){if(gt&&(i==="id"||i==="name")&&(p in l||p in sa))return!1;if(!(tt&&!dt[i]&&ue(u,i))){if(!(wt&&ue(N,i))){if(!q[i]||dt[i]){if(!(Tn(t)&&(B.tagNameCheck instanceof RegExp&&ue(B.tagNameCheck,t)||B.tagNameCheck instanceof Function&&B.tagNameCheck(t))&&(B.attributeNameCheck instanceof RegExp&&ue(B.attributeNameCheck,i)||B.attributeNameCheck instanceof Function&&B.attributeNameCheck(i))||i==="is"&&B.allowCustomizedBuiltInElements&&(B.tagNameCheck instanceof RegExp&&ue(B.tagNameCheck,p)||B.tagNameCheck instanceof Function&&B.tagNameCheck(p))))return!1}else if(!o[i]){if(!ue(_e,Et(p,oe,""))){if(!((i==="src"||i==="xlink:href"||i==="href")&&t!=="script"&&oo(p,"data:")===0&&pt[t])){if(!(Dt&&!ue(k,Et(p,oe,"")))){if(p)return!1}}}}}}return!0},Tn=function(t){return t!=="annotation-xml"&&Ln(t,K)},vn=function(t){Me(x.beforeSanitizeAttributes,t,null);const{attributes:i}=t;if(!i||Gt(t))return;const p={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let z=i.length;for(;z--;){const se=i[z],{name:ae,namespaceURI:pe,value:Ie}=se,Tt=Q(ae);let ce=ae==="value"?Ie:so(Ie);if(p.attrName=Tt,p.attrValue=ce,p.keepAttr=!0,p.forceKeepAttr=void 0,Me(x.uponSanitizeAttribute,t,p),ce=p.attrValue,at&&(Tt==="id"||Tt==="name")&&(Lt(ae,t),ce=ot+ce),nt&&ue(/((--!?|])>)|<\/(style|title)/i,ce)){Lt(ae,t);continue}if(p.forceKeepAttr||(Lt(ae,t),!p.keepAttr))continue;if(!Fe&&ue(/\/>/i,ce)){Lt(ae,t);continue}Re&&It([re,F,b],An=>{ce=Et(ce,An," ")});const En=Q(t.nodeName);if(_n(En,Tt,ce)){if(d&&typeof r=="object"&&typeof r.getAttributeType=="function"&&!pe)switch(r.getAttributeType(En,Tt)){case"TrustedHTML":{ce=d.createHTML(ce);break}case"TrustedScriptURL":{ce=d.createScriptURL(ce);break}}try{pe?t.setAttributeNS(pe,ae,ce):t.setAttribute(ae,ce),Gt(t)?Le(t):On(e.removed)}catch{}}}Me(x.afterSanitizeAttributes,t,null)},ra=function h(t){let i=null;const p=gn(t);for(Me(x.beforeSanitizeShadowDOM,t,null);i=p.nextNode();)Me(x.uponSanitizeShadowNode,i,null),hn(i),vn(i),i.content instanceof g&&h(i.content);Me(x.afterSanitizeShadowDOM,t,null)};return e.sanitize=function(h){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=null,p=null,z=null,se=null;if(ht=!h,ht&&(h="<!-->"),typeof h!="string"&&!pn(h))if(typeof h.toString=="function"){if(h=h.toString(),typeof h!="string")throw At("dirty is not a string, aborting")}else throw At("toString is not a function");if(!e.isSupported)return h;if(Oe||Bt(t),e.removed=[],typeof h=="string"&&(We=!1),We){if(h.nodeName){const Ie=Q(h.nodeName);if(!O[Ie]||Xe[Ie])throw At("root node is forbidden and cannot be sanitized in-place")}}else if(h instanceof f)i=mn("<!---->"),p=i.ownerDocument.importNode(h,!0),p.nodeType===yt.element&&p.nodeName==="BODY"||p.nodeName==="HTML"?i=p:i.appendChild(p);else{if(!He&&!Re&&!ke&&h.indexOf("<")===-1)return d&&Ke?d.createHTML(h):h;if(i=mn(h),!i)return He?null:Ke?j:""}i&&mt&&Le(i.firstChild);const ae=gn(We?h:i);for(;z=ae.nextNode();)hn(z),vn(z),z.content instanceof g&&ra(z.content);if(We)return h;if(He){if(ze)for(se=I.call(i.ownerDocument);i.firstChild;)se.appendChild(i.firstChild);else se=i;return(q.shadowroot||q.shadowrootmode)&&(se=ne.call(s,se,!0)),se}let pe=ke?i.outerHTML:i.innerHTML;return ke&&O["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&ue(na,i.ownerDocument.doctype.name)&&(pe="<!DOCTYPE "+i.ownerDocument.doctype.name+`>
`+pe),Re&&It([re,F,b],Ie=>{pe=Et(pe,Ie," ")}),d&&Ke?d.createHTML(pe):pe},e.setConfig=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bt(h),Oe=!0},e.clearConfig=function(){it=null,Oe=!1},e.isValidAttribute=function(h,t,i){it||Bt({});const p=Q(h),z=Q(t);return _n(p,z,i)},e.addHook=function(h,t){typeof t=="function"&&vt(x[h],t)},e.removeHook=function(h,t){if(t!==void 0){const i=no(x[h],t);return i===-1?void 0:ao(x[h],i,1)[0]}return On(x[h])},e.removeHooks=function(h){x[h]=[]},e.removeAllHooks=function(){x=Un()},e}aa();const we="∷";function nn(a){return a.replace(/::/g,we)}function Ut(a){return a.replace(/\u2237/gu,"::")}function Fn(a){let e=a.trim();for(;e.startsWith(":")||e.startsWith(we);)e=e.slice(1).trimStart();for(;e.endsWith(":")||e.endsWith(we);)e=e.slice(0,-1).trimEnd();return e}function Zt(a){return{id:Math.random().toString(36).substring(2),name:a,selected:!1,flash:()=>{}}}function Ao(a){return a.name}const Rt=Xn(null);za(Rt,a=>()=>a==null?void 0:a.blur());var So=J('<input type="text" tabindex="-1" size="1">');function yo(a,e){xe(e,!1);const l=Ct(),s=()=>ct(Rt,"$currentTagInput",l);let _=D(e,"id",8,void 0),g=D(e,"class",8,""),c=D(e,"name",12),f=D(e,"input",12),v=D(e,"disabled",8);const E=qe();function R(){return f().selectionStart===f().selectionEnd}function L(){return f().selectionStart===0&&f().selectionEnd===0}function A(){return f().selectionStart===f().value.length&&f().selectionEnd===f().value.length}function r(u){f().setSelectionRange(u,u)}function M(){return c().length===0}async function w(u){const N=f().value.length;E("tagjoinprevious"),await Te(),r(f().value.length-N),u.preventDefault()}async function te(u,N){if(N>c().length)return;c().slice(0,N).endsWith(we)&&(c(c().slice(0,N-1)+c().slice(N,c().length)),await Te(),u.preventDefault(),r(N-1),E("taginput"))}function $(u){L()?w(u):te(u,f().selectionStart)}async function G(u){const N=f().value.length;E("tagjoinnext"),await Te(),r(N),u.preventDefault()}function H(u){A()?G(u):te(u,f().selectionStart+2)}function d(){c(Fn(c())),c().length===0&&E("tagdelete"),E("tagaccept")}function j(u){E("tagsplit",{start:f().selectionStart,end:f().selectionEnd}),u.preventDefault()}async function P(u,N=!1){const k=f().selectionStart,oe=f().selectionEnd,K=c().slice(0,k),_e=c().slice(oe,c().length);if(K.endsWith(we)){u.preventDefault(),u.stopPropagation();return}else if(K.endsWith(":")){u.preventDefault(),c(`${K.slice(0,-1)}${we}${c().slice(oe,c().length)}`),await Te(),r(k),E("taginput");return}else if(_e.startsWith(":"))u.preventDefault(),c(`${K}${we}${c().slice(oe+1,c().length)}`);else{if(N)return;u.preventDefault(),c(`${K}${we}${_e}`)}await Te(),r(k+1),E("taginput")}function y(u){switch(u.code){case"Enter":j(u);break;case"Backspace":R()&&$(u);break;case"Delete":R()&&H(u);break}wa(u)?M()?w(u):L()&&(E("tagmoveprevious"),u.preventDefault()):Da(u)?M()?G(u):A()&&(E("tagmovenext"),u.preventDefault()):u.key===" "?P(u,!1):u.key===":"&&P(u,!0)}function I(u){const N=document.getSelection();u.clipboardData.setData("text/plain",Ut(N.toString()))}async function Y(u){I(u);const N=f().selectionStart,k=f().selectionEnd;c(c().slice(0,N)+c().slice(k)),await Te(),r(N),E("taginput")}function ne(u){if(!u.clipboardData)return;const k=(c()+u.clipboardData.getData("text/plain")).split(/\s+/).map(Fn).filter(K=>K.length>0).map(nn);if(k.length===0)return;const oe=k.pop();for(const K of k.reverse())c(K),E("tagadd");c(oe)}function x(u){c().length===0&&(u.preventDefault(),u.stopPropagation(),E("tagselectall"))}const{selectAllShortcut:re}=zn(rn);qn(()=>{Ca(x,re,{target:f()}),f().focus()});function F(u){return Nn(Rt,u),{destroy(){s()===u&&Nn(Rt,null)}}}Ye();var b=So();Sa(b),sn(b,u=>f(u),()=>f()),Ae(()=>$a(b,c)),Ae(()=>W("focus",b,function(u){ee.call(this,e,u)})),Ae(()=>W("blur",b,rt(d))),Ae(()=>W("keydown",b,y)),Ae(()=>W("keydown",b,function(u){ee.call(this,e,u)})),Ae(()=>W("keyup",b,function(u){ee.call(this,e,u)})),Ae(()=>W("input",b,()=>E("taginput"))),Ae(()=>W("copy",b,rt(I))),Ae(()=>W("cut",b,rt(Y))),Ae(()=>W("paste",b,rt(ne))),on(b,u=>F==null?void 0:F(u)),fe(()=>{var u;ft(b,"id",_()),Bn(b,`tag-input ${(u=g())!=null?u:""} svelte-1nk8ij0`),Pe(b,"disabled",v())}),U(a,b),Ue()}var bo=J("<!> <!>",1),Ro=J('<div class="tag-add-button svelte-1fo7hj6" role="button"><!> <span class="tags-info svelte-1fo7hj6"><!></span></div> <!>',1);function No(a,e){xe(e,!1);const l=Ct(),s=()=>ct(Rt,"$currentTagInput",l);let _=D(e,"keyCombination",8);const g=qe();function c(){g("tagappend")}Ye();var f=Ro(),v=Se(f);const E=ie(()=>{var w;return(w=ya())!=null?w:""}),R=ie(()=>{var w;return(w=Pt(_()))!=null?w:""});fe(()=>ft(v,"title",`${n(E)} (${n(R)})`));var L=ye(v);jn(L,{children:(w,te)=>{var $=bo(),G=Se($);Ht(G,{icon:Oa});var H=he(G,2);Ht(H,{icon:La}),U(w,$)},$$slots:{default:!0}});var A=he(L,2),r=ye(A);et(r,e,"default",{}),de(A),de(v);var M=he(v,2);Mt(M,{get keyCombination(){return _()},$$events:{action:()=>g("tagappend")}}),fe(()=>ft(v,"tabindex",s()?-1:0)),W("click",v,c),W("focus",v,c),U(a,f),Ue()}var Co=J('<div class="tags-selected-button svelte-y9jxqs" role="button" tabindex="0"><!></div>'),wo=J("<!> <!> <!>",1);function Do(a,e){xe(e,!1);const l=qe();let s=X(!1);const{selectAllShortcut:_,copyShortcut:g,removeShortcut:c}=zn(rn);Ye(),Kn(a,{get show(){return n(s)},preferredPlacement:"top",portalTarget:document.body,shift:0,children:Nt,$$slots:{default:(f,v)=>{const E=ie(()=>v.asReference);var R=Co(),L=_a(()=>ka(()=>T(s,!n(s)))),A=ye(R);jn(A,{children:(r,M)=>{Ht(r,{icon:Ia})},$$slots:{default:!0}}),de(R),on(R,r=>{var M;return(M=n(E))==null?void 0:M(r)}),Ae(()=>W("click",R,()=>T(s,!n(s)))),Ae(()=>W("keydown",R,function(...r){var M;(M=n(L))==null||M.apply(this,r)})),U(f,R)},floating:(f,v)=>{Vn(f,{slot:"floating",children:(E,R)=>{var L=wo(),A=Se(L);jt(A,{$$events:{click:()=>l("tagselectall")},children:(w,te)=>{lt();var $=bt();const G=ie(()=>{var d;return(d=ba())!=null?d:""}),H=ie(()=>{var d;return(d=Pt(_))!=null?d:""});fe(()=>je($,`${n(G)} (${n(H)})`)),U(w,$)},$$slots:{default:!0}});var r=he(A,2);jt(r,{$$events:{click:()=>l("tagcopy")},children:(w,te)=>{lt();var $=bt();const G=ie(()=>{var d;return(d=Ra())!=null?d:""}),H=ie(()=>{var d;return(d=Pt(g))!=null?d:""});fe(()=>je($,`${n(G)} (${n(H)})`)),U(w,$)},$$slots:{default:!0}});var M=he(r,2);jt(M,{$$events:{click:()=>l("tagdelete")},children:(w,te)=>{lt();var $=bt();const G=ie(()=>{var d;return(d=Na())!=null?d:""}),H=ie(()=>{var d;return(d=Pt(c))!=null?d:""});fe(()=>je($,`${n(G)} (${n(H)})`)),U(w,$)},$$slots:{default:!0}}),U(E,L)},$$slots:{default:!0}})}}}),Ue()}var Oo=J('<div class="tag-options-button gap svelte-16efk4p"><!></div>');function Lo(a,e){let l=D(e,"badgeHeight",12),s=D(e,"tagsSelected",8),_=D(e,"keyCombination",8);var g=Oo(),c=ye(g);Ga(c,s,f=>{var v=an(),E=Se(v);{var R=A=>{Do(A,{$$events:{tagselectall(r){ee.call(this,e,r)},tagcopy(r){ee.call(this,e,r)},tagdelete(r){ee.call(this,e,r)}}})},L=A=>{No(A,{get keyCombination(){return _()},$$events:{tagappend(r){ee.call(this,e,r)}}})};ut(E,A=>{s()?A(R):A(L,!1)})}U(f,v)}),de(g),Yn(g,"offsetHeight",l),W("mousedown",g,rt(function(f){ee.call(this,e,f)})),U(a,g)}function Io(a,e){let l=D(e,"class",8,"");Wa(a,{get class(){var s;return`d-flex align-items-center ms-1 ${(s=l())!=null?s:""}`},iconSize:80,$$events:{click(s){ee.call(this,e,s)}},children:(s,_)=>{Ht(s,{icon:Ma})},$$slots:{default:!0}})}var ko=J('<button tabindex="-1"><!></button>');function Jt(a,e){xe(e,!1);let l=D(e,"class",8,""),s=D(e,"tagName",8),_=D(e,"tooltip",8,void 0),g=D(e,"selected",8,!1);const c=qe();let f=X(!1);function v(){T(f,!0),setTimeout(()=>T(f,!1),300)}let E=X();qn(()=>c("mount",{button:n(E)})),Ye();var R=ko(),L=ye(R);return et(L,e,"default",{}),de(R),sn(R,A=>T(E,A),()=>n(E)),fe(()=>{var A;Bn(R,`tag d-inline-flex align-items-center text-nowrap ps-2 pe-1 ${(A=l())!=null?A:""} svelte-1ywoj88`),ft(R,"title",_()),ft(R,"data-addon-tag",s()),Pe(R,"selected",g()),Pe(R,"flashing",n(f))}),W("mousemove",R,function(A){ee.call(this,e,A)}),W("click",R,function(A){ee.call(this,e,A)}),U(a,R),Gn(e,"flash",v),Ue({flash:v})}var Mo=J(" <!>",1),Po=J("<span> </span> <!>",1),xo=J("<span> </span> <!>",1),Uo=J('<div class="svelte-11ejbji"><!></div>');function Fo(a,e){xe(e,!1);const l=Ct(),s=()=>ct(va,"$pageTheme",l),_=X();let g=D(e,"name",8),c=D(e,"class",8,""),f=D(e,"tooltip",8),v=D(e,"selected",12),E=D(e,"active",8),R=D(e,"shorten",8),L=D(e,"flash",12);const A=qe();let r=X(!1),M=X(!1);function w(I){T(r,Pa(I)),T(M,xa(I))}function te(){n(M)?A("tagrange"):n(r)?A("tagselect"):A("tagclick")}function $(I){const Y=I.split(we);return Y.length===1?I:`…${we}`+Y[Y.length-1]}function G(I){return I.split(we).length>1}const H="tag-icon-hover";Qe(()=>(n(r),n(M)),()=>{T(_,n(r)||n(M))}),zt(),Ye();var d=Uo();W("keydown",yn.body,w),W("keyup",yn.body,w);var j=ye(d);{var P=I=>{Jt(I,{get class(){return c()},get tagName(){return g()},$$events:{mousemove:w,click:te},children:(Y,ne)=>{lt();var x=Mo(),re=Se(x),F=he(re);et(F,e,"default",{get selectMode(){return n(_)},hoverClass:H}),fe(()=>{var b;return je(re,`${(b=g())!=null?b:""} `)}),U(Y,x)},$$slots:{default:!0}})},y=I=>{var Y=an(),ne=Se(Y);{var x=F=>{Ba(F,{get tooltip(){return f()},trigger:"hover",placement:"top",children:Nt,$$slots:{default:(b,u)=>{const N=ie(()=>u.createTooltip);Jt(b,{get class(){return c()},get tagName(){return g()},get flash(){return L()},set flash(k){L(k)},get selected(){return v()},set selected(k){v(k)},$$events:{mousemove:w,click:te,mount:k=>n(N)(k.detail.button)},children:(k,oe)=>{var K=Po(),_e=Se(K),O=ye(_e,!0);fe(()=>je(O,$(g()))),de(_e);var le=he(_e,2);et(le,e,"default",{get selectMode(){return n(_)},hoverClass:H}),U(k,K)},$$slots:{default:!0},$$legacy:!0})}}})},re=F=>{Jt(F,{get class(){return c()},get tagName(){return g()},get flash(){return L()},set flash(b){L(b)},get selected(){return v()},set selected(b){v(b)},$$events:{mousemove:w,click:te},children:(b,u)=>{var N=xo(),k=Se(N),oe=ye(k,!0);de(k);var K=he(k,2);et(K,e,"default",{get selectMode(){return n(_)},hoverClass:H}),fe(()=>je(oe,g())),U(b,N)},$$slots:{default:!0},$$legacy:!0})};ut(ne,F=>{R()&&G(g())?F(x):F(re,!1)},!0)}U(I,Y)};ut(j,I=>{E()?I(P):I(y,!1)})}de(d),fe(()=>{Pe(d,"select-mode",n(_)),Pe(d,"night-mode",s().isDark),Pe(d,"empty",g()==="")}),U(a,d),Ue()}function Ho(a,e){xe(e,!1);let l=D(e,"name",8),s=D(e,"class",8,""),_=D(e,"tooltip",8),g=D(e,"selected",8),c=D(e,"active",8),f=D(e,"shorten",8),v=D(e,"flash",8);const E=qe();function R(){E("tagdelete")}Ye(),Fo(a,{get name(){return l()},get class(){return s()},get tooltip(){return _()},get selected(){return g()},get active(){return c()},get shorten(){return f()},get flash(){return v()},$$events:{tagrange(L){ee.call(this,e,L)},tagselect(L){ee.call(this,e,L)},tagclick:()=>E("tagedit")},children:Nt,$$slots:{default:(L,A)=>{const r=ie(()=>A.selectMode),M=ie(()=>A.hoverClass);Io(L,{get class(){return n(M)},$$events:{click:w=>{n(r)||(R(),w.stopPropagation())}}})}}}),Ue()}var zo=J('<div class="tag-spacer svelte-1k3couf" role="textbox" tabindex="-1"><br></div>');function Wo(a,e){var l=zo();W("click",l,function(s){ee.call(this,e,s)}),U(a,l)}var $o=J('<div tabindex="-1" class="autocomplete-item svelte-1pjq6zk" role="button"><!></div>');function Hn(a,e){xe(e,!1);let l=D(e,"selected",8,!1),s=D(e,"active",8,!1),_=D(e,"suggestion",8),g=X();Qe(()=>(Qt(l()),n(g)),()=>{l()&&n(g)&&n(g).scrollIntoViewIfNeeded({behavior:"smooth",block:"start"})}),zt();var c=$o(),f=ye(c);et(f,e,"default",{}),de(c),sn(c,v=>T(g,v),()=>n(g)),fe(()=>{ft(c,"data-addon-suggestion",_()),Pe(c,"selected",l()),Pe(c,"active",s())}),W("mousedown",c,rt(function(v){ee.call(this,e,v)})),W("mouseup",c,function(v){ee.call(this,e,v)}),W("mouseenter",c,function(v){ee.call(this,e,v)}),W("mouseleave",c,function(v){ee.call(this,e,v)}),U(a,c),Ue()}var Bo=J('<span class="autocomplete-reference svelte-1bkz961"><!></span>'),Go=J('<div class="autocomplete-menu svelte-1bkz961"></div>'),jo=J('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Yo(a,e){xe(e,!1);const l=Ct(),s=()=>ct(g(),"$show",l);let _=D(e,"suggestionsPromise",8),g=D(e,"show",8),c=X([]),f=X(null),v=X(!1);const E=qe();function R(){n(f)===null?T(f,0):n(f)>=n(c).length-1?T(f,null):Ft(f)}function L(){n(f)===null?T(f,n(c).length-1):n(f)===0?T(f,null):Ft(f,-1)}async function A(){var y;E("select",{selected:n(c)[(y=n(f))!=null?y:-1]})}async function r(){R(),await A()}async function M(){L(),await A()}async function w(){var y;n(c).length&&(T(v,!0),E("choose",{chosen:n(c)[(y=n(f))!=null?y:-1]}),await Te(),g().set(!1))}async function te(){await Te(),E("update")}function $(){return n(f)!==null}function G(){return{selectPrevious:M,selectNext:r,chooseSelected:w,update:te,hasSelected:$}}function H(y){T(f,y),T(v,!0)}function d(y){H(y)}async function j(y){T(v,!1),E("select",{selected:n(c)[y]})}function P(y,I){y.buttons===1&&H(I)}Qe(()=>(Qt(_()),Qt(g()),Cn),()=>{_().then(y=>{g().set(y.length>0),Cn()&&navigator.userAgent.match(/Chrome\/77/)&&(y=y.slice(0,10)),T(c,y)})}),zt(),Ye(),Kn(a,{keepOnKeyup:!0,get show(){return s()},preferredPlacement:"top",portalTarget:document.body,$$events:{close:()=>g().set(!1)},children:Nt,$$slots:{default:(y,I)=>{const Y=ie(()=>I.asReference);var ne=Bo(),x=ye(ne);et(x,e,"default",{createAutocomplete:G}),de(ne),on(ne,re=>{var F;return(F=n(Y))==null?void 0:F(re)}),U(y,ne)},floating:(y,I)=>{var Y=jo(),ne=Se(Y);Wn(ne,()=>({"--popover-padding-inline":"0"})),Vn(ne.lastChild,{slot:"floating",children:(x,re)=>{var F=Go();$n(F,5,()=>n(c),Ea,(b,u,N)=>{var k=an(),oe=Se(k);{var K=O=>{Hn(O,{selected:!0,get active(){return n(v)},get suggestion(){return n(u)},$$events:{mousedown:()=>d(N),mouseup:()=>{j(N),w()},mouseenter:le=>P(le,N),mouseleave:()=>T(v,!1)},children:(le,q)=>{lt();var De=bt();fe(()=>je(De,n(u))),U(le,De)},$$slots:{default:!0}})},_e=O=>{Hn(O,{get suggestion(){return n(u)},$$events:{mousedown:()=>d(N),mouseup:()=>{j(N),w()},mouseenter:le=>P(le,N)},children:(le,q)=>{lt();var De=bt();fe(()=>je(De,n(u))),U(le,De)},$$slots:{default:!0}})};ut(oe,O=>{N===n(f)?O(K):O(_e,!1)})}U(b,k)}),de(F),U(x,F)},$$slots:{default:!0}}),de(ne),U(y,Y)}}}),Ue()}var qo=J("<!> <!> <!>",1),Xo=J('<div class="tag-relative svelte-1tsu84n"><!> <!></div>'),Ko=J('<!> <div class="tag-editor svelte-1tsu84n"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>',1);function gs(a,e){xe(e,!1);const l=Ct(),s=()=>ct(v(),"$tags",l),_=()=>ct(w,"$show",l),g=X(),c=X(),f=X();let v=D(e,"tags",8),E=D(e,"keyCombination",8,"Control+Shift+T");const R="Control+A",L="Control+C",A="Backspace";Ta(rn,{selectAllShortcut:R,copyShortcut:L,removeShortcut:A});let r=X();function M(o){T(r,o.map(m=>Zt(nn(m))))}const w=Xn(!1),te=qe(),$=Promise.resolve([]);let G=X($);function H(){const o=n(r).map(m=>m.name).map(Ut);te("tagsupdate",{tags:o}),T(G,$)}let d=X(null),j=null,P=X(""),y=X(),I=X(),Y=X(!1);async function ne(o){const{tags:m}=await Ha({input:o,matchLimit:500});return m}const x=/^:?([^:].*?[^:]):?$/;function re(){const m=n(r)[n(d)].name;if(T(Y,m.length===0),n(Y))T(G,$);else{const S=Ut(m),V=x.test(S)?S.replace(x,"$1"):S;T(G,ne(V).then(Z=>(T(Y,Z.length===0),Z.map(nn))))}}function F(o){const m=n(r)[n(d)];T(P,o!=null?o:m.name);const S=n(y).value.length;n(y).setSelectionRange(S,S)}async function b(o){o.name=n(P),T(r,n(r)),await Te(),n(y)&&n(I).update()}function u(o){j===null&&(j=o)}function N(){Oe();const o=n(r)[n(r).length-1];(!o||o.name.length>0)&&k(n(r).length-1,"");const m=n(d)===null;T(d,null),m&&tt()}function k(o,m){n(r).splice(o+1,0,Zt(m)),T(r,n(r)),u(o+1)}function oe(o){const m=n(r).map(Ao);m.splice(o,1);const S=m.indexOf(n(P));return S>=0?(n(r)[S>=o?S+1:S].flash(),!1):!0}async function K(o,m,S){const V=n(P).slice(0,m),Z=n(P).slice(S);T(P,V),await Te(),k(o,Z),T(d,null),await Te(),o!==n(d)&&n(y).setSelectionRange(0,0)}function _e(o){oe(o)&&(n(r).splice(o,0,Zt(n(P))),Ft(d),T(r,n(r)))}function O(o){const m=n(r).splice(o,1)[0];return T(r,n(r)),j!==null&&j>o&&j--,m}function le(o){return o===0}function q(o){return o===n(r).length-1}function De(o){if(le(o))return;const m=O(o-1);T(P,m.name+n(P)),Ft(d,-1),b(n(r)[n(d)])}function B(o){if(q(o))return;const m=O(o+1);T(P,n(P)+m.name),b(n(r)[n(d)])}function Xe(o){le(o)||(j=o-1,T(d,null),n(y).blur())}async function dt(o){if(q(o)){n(P).length!==0&&(k(o,""),T(d,null));return}j=o+1,T(d,null),n(y).blur(),await Te(),n(y).setSelectionRange(0,0)}function wt(o,m){n(r).includes(o)&&(oe(m)||O(m))}function tt(){T(d,j),j=null}function Dt(o){if(Ua(o)){n(I).selectPrevious(),o.preventDefault();return}else if(Fa(o)){n(I).selectNext(),o.preventDefault();return}switch(o.code){case"Tab":if(_())o.shiftKey?n(I).selectPrevious():n(I).selectNext();else break;o.preventDefault();break;case"Enter":n(I).chooseSelected(),o.preventDefault();break}}let Fe=null,Re=null;function nt(o){Rn(r,n(r)[o].selected=!n(r)[o].selected),T(r,n(r)),Fe=o}function ke(o){if(Fe===null){nt(o);return}Re=o;const m=Math.min(Fe,Re),S=Math.max(Fe,Re);for(let V=m;V<=S;V++)Rn(r,n(r)[V].selected=!0);T(r,n(r))}function Oe(){T(r,n(r).map(o=>({...o,selected:!1}))),Fe=null,Re=null}function mt(o){const m=o.currentTarget;(o.relatedTarget===null||!m.contains(o.relatedTarget))&&Oe()}function He(o){const m=document.createElement("textarea");m.value=o,m.setAttribute("readonly",""),m.style.position="absolute",m.style.left="-9999px",document.body.appendChild(m),m.select(),Ya("copy"),document.body.removeChild(m)}function ze(){for(const o of n(r))o.selected=!0;T(r,n(r))}function Ke(){const o=n(r).filter(m=>m.selected).map(m=>Ut(m.name)).join(`
`);He(o),Oe()}function gt(){n(r).map((o,m)=>[o.selected,m]).filter(([o])=>o).reverse().forEach(([,o])=>O(o)),Oe(),H()}let at=X(),ot=X();Qe(()=>s(),()=>{M(s())}),Qe(()=>(n(at),n(ot)),()=>{T(g,Math.floor(n(at)/n(ot)))}),Qe(()=>(n(c),n(g)),()=>{T(c,n(c)||n(g)>2)}),Qe(()=>n(r),()=>{T(f,n(r).some(o=>o.selected))}),zt(),Ye();var st=Ko(),We=Se(st);{var $e=o=>{var m=qo(),S=Se(m);Mt(S,{keyCombination:R,$$events:{action:ze}});var V=he(S,2);Mt(V,{keyCombination:L,$$events:{action:Ke}});var Z=he(V,2);Mt(Z,{keyCombination:A,$$events:{action:gt}}),U(o,m)};ut(We,o=>{n(f)&&o($e)})}var Ne=he(We,2),Ve=ye(Ne);Wn(Ve,()=>({"--icon-align":"baseline"})),Lo(Ve.lastChild,{get tagsSelected(){return n(f)},get keyCombination(){return E()},get badgeHeight(){return n(ot)},set badgeHeight(o){T(ot,o)},$$events:{tagselectall:ze,tagcopy:Ke,tagdelete:gt,tagappend:N},$$legacy:!0}),de(Ve);var pt=he(Ve,2);$n(pt,3,()=>n(r),o=>o.id,(o,m,S)=>{var V=Xo(),Z=ye(V),Be=ie(()=>n(S)===n(d)?n(P):n(m).name),ht=ie(()=>n(S)===n(d));Ho(Z,{class:"ms-0",get name(){return n(Be)},get tooltip(){return n(m).name},get active(){return n(ht)},get shorten(){return n(c)},get flash(){return n(m).flash},set flash(ve){n(m).flash=ve,bn(()=>n(r))},get selected(){return n(m).selected},set selected(ve){n(m).selected=ve,bn(()=>n(r))},$$events:{tagedit:()=>{T(d,n(S)),Oe()},tagselect:()=>nt(n(S)),tagrange:()=>ke(n(S)),tagdelete:()=>{Oe(),O(n(S)),H()}},$$legacy:!0});var _t=he(Z,2);{var Wt=ve=>{Yo(ve,{get suggestionsPromise(){return n(G)},show:w,$$events:{update:re,select:({detail:Ee})=>F(Ee.selected),choose:({detail:Ee})=>{F(Ee.chosen),K(n(S),Ee.chosen.length,Ee.chosen.length)}},children:Nt,$$slots:{default:(Ee,$t)=>{const Ze=ie(()=>$t.createAutocomplete);yo(Ee,{get id(){return n(m).id},class:"position-absolute start-0 top-0 bottom-0 ps-2 py-0",get disabled(){return n(Y)},get name(){return n(P)},set name(Ge){T(P,Ge)},get input(){return n(y)},set input(Ge){T(y,Ge)},$$events:{focus:()=>{te("tagsFocused"),T(P,n(m).name),T(I,n(Ze)())},keydown:Dt,keyup:()=>{n(P).length===0&&(w==null||w.set(!1))},taginput:()=>b(n(m)),tagsplit:({detail:Ge})=>K(n(S),Ge.start,Ge.end),tagadd:()=>_e(n(S)),tagdelete:()=>O(n(S)),tagselectall:async()=>{n(r).length<=1||(n(y).blur(),await Te(),ze())},tagjoinprevious:()=>De(n(S)),tagjoinnext:()=>B(n(S)),tagmoveprevious:()=>Xe(n(S)),tagmovenext:()=>dt(n(S)),tagaccept:()=>{wt(n(m),n(S)),n(m)&&b(n(m)),H(),tt()}},$$legacy:!0})}}})};ut(_t,ve=>{n(S)===n(d)&&ve(Wt)})}de(V),fe(()=>Pe(V,"hide-tag",n(S)===n(d))),U(o,V)});var Ot=he(pt,2);return Wo(Ot,{$$events:{click:N}}),de(Ne),W("focusout",Ne,mt),Yn(Ne,"offsetHeight",o=>T(at,o)),U(a,st),Gn(e,"appendEmptyTag",N),Ue({appendEmptyTag:N})}export{gs as T,ms as d,Ya as e};
