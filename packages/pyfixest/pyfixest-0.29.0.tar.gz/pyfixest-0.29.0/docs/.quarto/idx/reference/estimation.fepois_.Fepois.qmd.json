{"title":"estimation.fepois_.Fepois","markdown":{"headingText":"estimation.fepois_.Fepois","headingAttr":{"id":"pyfixest.estimation.fepois_.Fepois","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n```python\nestimation.fepois_.Fepois(\n    self,\n    FixestFormula,\n    data,\n    ssc_dict,\n    drop_singletons,\n    drop_intercept,\n    weights,\n    weights_type,\n    collin_tol,\n    fixef_tol,\n    lookup_demeaned_data,\n    tol,\n    maxiter,\n    solver='np.linalg.solve',\n    demeaner_backend='numba',\n    context=0,\n    store_data=True,\n    copy_data=True,\n    lean=False,\n    sample_split_var=None,\n    sample_split_value=None,\n    separation_check=None,\n)\n```\n\nEstimate a Poisson regression model.\n\nNon user-facing class to estimate a Poisson regression model via Iterated\nWeighted Least Squares (IWLS).\n\nInherits from the Feols class. Users should not directly instantiate this class,\nbut rather use the [fepois()](/reference/estimation.fepois.qmd) function.\nNote that no demeaning is performed in this class: demeaning is performed in the\n[FixestMulti](/reference/estimation.fixest_multi.qmd) class (to allow for caching\nof demeaned variables for multiple estimation).\n\nThe method implements the algorithm from Stata's `ppmlhdfe` module.\n\n## Attributes {.doc-section .doc-section-attributes}\n\n| Name             | Type                                                                                          | Description                                                                                                                                                                                                                                                          |\n|------------------|-----------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| _Y               | np.ndarray                                                                                    | The demeaned dependent variable, a two-dimensional numpy array.                                                                                                                                                                                                      |\n| _X               | np.ndarray                                                                                    | The demeaned independent variables, a two-dimensional numpy array.                                                                                                                                                                                                   |\n| _fe              | np.ndarray                                                                                    | Fixed effects, a two-dimensional numpy array or None.                                                                                                                                                                                                                |\n| weights          | np.ndarray                                                                                    | Weights, a one-dimensional numpy array or None.                                                                                                                                                                                                                      |\n| coefnames        | list\\[str\\]                                                                                   | Names of the coefficients in the design matrix X.                                                                                                                                                                                                                    |\n| drop_singletons  | bool                                                                                          | Whether to drop singleton fixed effects.                                                                                                                                                                                                                             |\n| collin_tol       | float                                                                                         | Tolerance level for the detection of collinearity.                                                                                                                                                                                                                   |\n| maxiter          | Optional\\[int\\], default=25                                                                   | Maximum number of iterations for the IRLS algorithm.                                                                                                                                                                                                                 |\n| tol              | Optional\\[float\\], default=1e-08                                                              | Tolerance level for the convergence of the IRLS algorithm.                                                                                                                                                                                                           |\n| solver           | (Literal\\[\\'np.linalg.lstsq\\', \\'np.linalg.solve\\', \\'scipy.sparse.linalg.lsqr\\', \\'jax\\'\\],) | default is 'np.linalg.solve'. Solver to use for the estimation.                                                                                                                                                                                                      |\n| demeaner_backend | Literal\\[\\'numba\\', \\'jax\\'\\]                                                                 | The backend used for demeaning.                                                                                                                                                                                                                                      |\n| fixef_tol        | float, default = 1e-08.                                                                       | Tolerance level for the convergence of the demeaning algorithm.                                                                                                                                                                                                      |\n| context          | int or Mapping\\[str, Any\\]                                                                    | A dictionary containing additional context variables to be used by formulaic during the creation of the model matrix. This can include custom factorization functions, transformations, or any other variables that need to be available in the formula environment. |\n| weights_name     | Optional\\[str\\]                                                                               | Name of the weights variable.                                                                                                                                                                                                                                        |\n| weights_type     | Optional\\[str\\]                                                                               | Type of weights variable.                                                                                                                                                                                                                                            |\n| _data            | pd.DataFrame                                                                                  | The data frame used in the estimation. None if arguments `lean = True` or `store_data = False`.                                                                                                                                                                      |\n\n## Methods\n\n| Name | Description |\n| --- | --- |\n| [get_fit](#pyfixest.estimation.fepois_.Fepois.get_fit) | Fit a Poisson Regression Model via Iterated Weighted Least Squares (IWLS). |\n| [predict](#pyfixest.estimation.fepois_.Fepois.predict) | Return predicted values from regression model. |\n| [prepare_model_matrix](#pyfixest.estimation.fepois_.Fepois.prepare_model_matrix) | Prepare model inputs for estimation. |\n| [resid](#pyfixest.estimation.fepois_.Fepois.resid) | Return residuals from regression model. |\n| [to_array](#pyfixest.estimation.fepois_.Fepois.to_array) | Turn estimation DataFrames to np arrays. |\n\n### get_fit { #pyfixest.estimation.fepois_.Fepois.get_fit }\n\n```python\nestimation.fepois_.Fepois.get_fit()\n```\n\nFit a Poisson Regression Model via Iterated Weighted Least Squares (IWLS).\n\n#### Returns {.doc-section .doc-section-returns}\n\n| Name   | Type   | Description   |\n|--------|--------|---------------|\n|        | None   |               |\n\n#### Attributes {.doc-section .doc-section-attributes}\n\n| Name     | Type       | Description                                                                     |\n|----------|------------|---------------------------------------------------------------------------------|\n| beta_hat | np.ndarray | Estimated coefficients.                                                         |\n| Y_hat    | np.ndarray | Estimated dependent variable.                                                   |\n| u_hat    | np.ndarray | Estimated residuals.                                                            |\n| weights  | np.ndarray | Weights (from the last iteration of the IRLS algorithm).                        |\n| X        | np.ndarray | Demeaned independent variables (from the last iteration of the IRLS algorithm). |\n| Z        | np.ndarray | Demeaned independent variables (from the last iteration of the IRLS algorithm). |\n| Y        | np.ndarray | Demeaned dependent variable (from the last iteration of the IRLS algorithm).    |\n\n### predict { #pyfixest.estimation.fepois_.Fepois.predict }\n\n```python\nestimation.fepois_.Fepois.predict(\n    newdata=None,\n    atol=1e-06,\n    btol=1e-06,\n    type='link',\n    se_fit=False,\n    interval=None,\n    alpha=0.05,\n)\n```\n\nReturn predicted values from regression model.\n\nReturn a flat np.array with predicted values of the regression model.\nIf new fixed effect levels are introduced in `newdata`, predicted values\nfor such observations\nwill be set to NaN.\n\n#### Parameters {.doc-section .doc-section-parameters}\n\n| Name     | Type                               | Description                                                                                                                                                                                                                                                                                                        | Default   |\n|----------|------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n| newdata  | Union\\[None, pd.DataFrame\\]        | A pd.DataFrame with the new data, to be used for prediction. If None (default), uses the data used for fitting the model.                                                                                                                                                                                          | `None`    |\n| atol     | Float                              | Stopping tolerance for scipy.sparse.linalg.lsqr(). See https://docs.scipy.org/doc/     scipy/reference/generated/scipy.sparse.linalg.lsqr.html                                                                                                                                                                     | `1e-6`    |\n| btol     | Float                              | Another stopping tolerance for scipy.sparse.linalg.lsqr(). See https://docs.scipy.org/doc/     scipy/reference/generated/scipy.sparse.linalg.lsqr.html                                                                                                                                                             | `1e-6`    |\n| type     | str                                | The type of prediction to be computed. Can be either \"response\" (default) or \"link\". If type=\"response\", the output is at the level of the response variable, i.e., it is the expected predictor E(Y\\|X). If \"link\", the output is at the level of the explanatory variables, i.e., the linear predictor X @ beta. | `'link'`  |\n| atol     | Float                              | Stopping tolerance for scipy.sparse.linalg.lsqr(). See https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.lsqr.html                                                                                                                                                                          | `1e-6`    |\n| btol     | Float                              | Another stopping tolerance for scipy.sparse.linalg.lsqr(). See https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.lsqr.html                                                                                                                                                                  | `1e-6`    |\n| se_fit   | Optional\\[bool\\]                   | If True, the standard error of the prediction is computed. Only feasible for models without fixed effects. GLMs are not supported. Defaults to False.                                                                                                                                                              | `False`   |\n| interval | Optional\\[PredictionErrorOptions\\] | The type of interval to compute. Can be either 'prediction' or None.                                                                                                                                                                                                                                               | `None`    |\n| alpha    | float                              | The alpha level for the confidence interval. Defaults to 0.05. Only used if interval = \"prediction\" is not None.                                                                                                                                                                                                   | `0.05`    |\n\n#### Returns {.doc-section .doc-section-returns}\n\n| Name   | Type                              | Description                                                                                                                                                                                                                        |\n|--------|-----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|        | Union\\[np.ndarray, pd.DataFrame\\] | Returns a pd.Dataframe with columns \"fit\", \"se_fit\" and CIs if argument \"interval=prediction\". Otherwise, returns a np.ndarray with the predicted values of the model or the prediction standard errors if argument \"se_fit=True\". |\n\n### prepare_model_matrix { #pyfixest.estimation.fepois_.Fepois.prepare_model_matrix }\n\n```python\nestimation.fepois_.Fepois.prepare_model_matrix()\n```\n\nPrepare model inputs for estimation.\n\n### resid { #pyfixest.estimation.fepois_.Fepois.resid }\n\n```python\nestimation.fepois_.Fepois.resid(type='response')\n```\n\nReturn residuals from regression model.\n\n#### Parameters {.doc-section .doc-section-parameters}\n\n| Name   | Type   | Description                                                                            | Default      |\n|--------|--------|----------------------------------------------------------------------------------------|--------------|\n| type   | str    | The type of residuals to be computed. Can be either \"response\" (default) or \"working\". | `'response'` |\n\n#### Returns {.doc-section .doc-section-returns}\n\n| Name   | Type       | Description                                              |\n|--------|------------|----------------------------------------------------------|\n|        | np.ndarray | A flat array with the residuals of the regression model. |\n\n### to_array { #pyfixest.estimation.fepois_.Fepois.to_array }\n\n```python\nestimation.fepois_.Fepois.to_array()\n```\n\nTurn estimation DataFrames to np arrays.","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"python":"/pyfixest/.pixi/envs/docs/Scripts/python.exe","engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"estimation.fepois_.Fepois.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.32","quartodoc":{"package":"pyfixest","title":"PyFixest Function Reference","parser":"numpy","rewrite_all_pages":false,"sidebar":"../_sidebar.yml","sections":[{"title":"Estimation Functions","desc":"User facing estimation functions\n","contents":["estimation.estimation.feols","estimation.estimation.fepois","estimation.estimation.feglm","did.estimation.did2s","did.estimation.lpdid","did.estimation.event_study","estimation.bonferroni","estimation.rwolf"]},{"title":"Estimation Classes","desc":"Details on Methods and Attributes\n","contents":["estimation.feols_.Feols","estimation.fepois_.Fepois","estimation.feiv_.Feiv","estimation.feglm_.Feglm","estimation.felogit_.Felogit","estimation.feprobit_.Feprobit","estimation.fegaussian_.Fegaussian","estimation.feols_compressed_.FeolsCompressed"]},{"title":"Summarize and Visualize","desc":"Post-Processing of Estimation Results\n","contents":["did.visualize.panelview","report.summary","report.etable","report.dtable","report.coefplot","report.iplot","did.visualize.panelview"]},{"title":"Misc / Utilities","desc":"PyFixest internals and utilities\n","contents":["estimation.demean","estimation.detect_singletons","estimation.model_matrix_fixest"]}]}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}