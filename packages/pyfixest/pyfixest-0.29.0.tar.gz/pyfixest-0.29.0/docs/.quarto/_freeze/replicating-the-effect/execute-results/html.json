{
  "hash": "f1b5a6b75db6f71b0d58e0364268d7af",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Replicating Examples from \"The Effect\"\nformat:\n  html:\n    html-table-processing: none\ntoc: true\ntoc-title: \"On this page\"\ntoc-location: left\n---\n\n\n\n\nThis notebook replicates code examples from Nick Huntington-Klein's book on causal inference, [The Effect](https://theeffectbook.net/).\n\n::: {#289e0fdb .cell execution_count=1}\n``` {.python .cell-code}\nfrom causaldata import Mroz, gapminder, organ_donations, restaurant_inspections\n\nimport pyfixest as pf\n\n%load_ext watermark\n%watermark --iversions\n```\n\n::: {.cell-output .cell-output-display}\n```{=html}\n\n            <div id=\"CTAM5T\"></div>\n            <script type=\"text/javascript\" data-lets-plot-script=\"library\">\n                if(!window.letsPlotCallQueue) {\n                    window.letsPlotCallQueue = [];\n                }; \n                window.letsPlotCall = function(f) {\n                    window.letsPlotCallQueue.push(f);\n                };\n                (function() {\n                    var script = document.createElement(\"script\");\n                    script.type = \"text/javascript\";\n                    script.src = \"https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.5.2/js-package/distr/lets-plot.min.js\";\n                    script.onload = function() {\n                        window.letsPlotCall = function(f) {f();};\n                        window.letsPlotCallQueue.forEach(function(f) {f();});\n                        window.letsPlotCallQueue = [];\n                        \n                    };\n                    script.onerror = function(event) {\n                        window.letsPlotCall = function(f) {};    // noop\n                        window.letsPlotCallQueue = [];\n                        var div = document.createElement(\"div\");\n                        div.style.color = 'darkred';\n                        div.textContent = 'Error loading Lets-Plot JS';\n                        document.getElementById(\"CTAM5T\").appendChild(div);\n                    };\n                    var e = document.getElementById(\"CTAM5T\");\n                    e.appendChild(script);\n                })()\n            </script>\n            \n```\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n\n            <div id=\"YC6SkV\"></div>\n            <script type=\"text/javascript\" data-lets-plot-script=\"library\">\n                if(!window.letsPlotCallQueue) {\n                    window.letsPlotCallQueue = [];\n                }; \n                window.letsPlotCall = function(f) {\n                    window.letsPlotCallQueue.push(f);\n                };\n                (function() {\n                    var script = document.createElement(\"script\");\n                    script.type = \"text/javascript\";\n                    script.src = \"https://cdn.jsdelivr.net/gh/JetBrains/lets-plot@v4.5.2/js-package/distr/lets-plot.min.js\";\n                    script.onload = function() {\n                        window.letsPlotCall = function(f) {f();};\n                        window.letsPlotCallQueue.forEach(function(f) {f();});\n                        window.letsPlotCallQueue = [];\n                        \n                    };\n                    script.onerror = function(event) {\n                        window.letsPlotCall = function(f) {};    // noop\n                        window.letsPlotCallQueue = [];\n                        var div = document.createElement(\"div\");\n                        div.style.color = 'darkred';\n                        div.textContent = 'Error loading Lets-Plot JS';\n                        document.getElementById(\"YC6SkV\").appendChild(div);\n                    };\n                    var e = document.getElementById(\"YC6SkV\");\n                    e.appendChild(script);\n                })()\n            </script>\n            \n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\ncausaldata: 0.1.5\npyfixest  : 0.28.0\n\n```\n:::\n:::\n\n\n## Chapter 4: Describing Relationships\n\n::: {#624c03a3 .cell execution_count=2}\n``` {.python .cell-code}\n# Read in data\ndt = Mroz.load_pandas().data\n# Keep just working women\ndt = dt.query(\"lfp\")\n# Create unlogged earnings\ndt.loc[:, \"earn\"] = dt[\"lwg\"].apply(\"exp\")\n\n# 5. Run multiple linear regression models by succesively adding controls\nfit = pf.feols(fml=\"lwg ~ csw(inc, wc, k5)\", data=dt, vcov=\"iid\")\npf.etable(fit)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nC:\\Users\\alexa\\AppData\\Local\\Temp\\ipykernel_17780\\786816010.py:6: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n  dt.loc[:, \"earn\"] = dt[\"lwg\"].apply(\"exp\")\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div id=\"udpcwgryqc\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#udpcwgryqc table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#udpcwgryqc thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#udpcwgryqc p { margin: 0; padding: 0; }\n #udpcwgryqc .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #udpcwgryqc .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #udpcwgryqc .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #udpcwgryqc .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #udpcwgryqc .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #udpcwgryqc .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #udpcwgryqc .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #udpcwgryqc .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 4px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #udpcwgryqc .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #udpcwgryqc .gt_column_spanner_outer:first-child { padding-left: 0; }\n #udpcwgryqc .gt_column_spanner_outer:last-child { padding-right: 0; }\n #udpcwgryqc .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: bottom; padding-top: 4px; padding-bottom: 4px; overflow-x: hidden; display: inline-block; width: 100%; }\n #udpcwgryqc .gt_spanner_row { border-bottom-style: hidden; }\n #udpcwgryqc .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #udpcwgryqc .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: middle; }\n #udpcwgryqc .gt_from_md> :first-child { margin-top: 0; }\n #udpcwgryqc .gt_from_md> :last-child { margin-bottom: 0; }\n #udpcwgryqc .gt_row { padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #udpcwgryqc .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #udpcwgryqc .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #udpcwgryqc .gt_row_group_first td { border-top-width: 0.5px; }\n #udpcwgryqc .gt_row_group_first th { border-top-width: 0.5px; }\n #udpcwgryqc .gt_striped { background-color: rgba(128,128,128,0.05); }\n #udpcwgryqc .gt_table_body { border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #udpcwgryqc .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #udpcwgryqc .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #udpcwgryqc .gt_left { text-align: left; }\n #udpcwgryqc .gt_center { text-align: center; }\n #udpcwgryqc .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #udpcwgryqc .gt_font_normal { font-weight: normal; }\n #udpcwgryqc .gt_font_bold { font-weight: bold; }\n #udpcwgryqc .gt_font_italic { font-style: italic; }\n #udpcwgryqc .gt_super { font-size: 65%; }\n #udpcwgryqc .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #udpcwgryqc .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"3\" scope=\"colgroup\" id=\"lwg\">\n    <span class=\"gt_column_spanner\">lwg</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"(1)\">(1)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"(2)\">(2)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"(3)\">(3)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">inc</th>\n    <td class=\"gt_row gt_center\">0.010** <br> (0.003)</td>\n    <td class=\"gt_row gt_center\">0.005 <br> (0.003)</td>\n    <td class=\"gt_row gt_center\">0.005 <br> (0.003)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">wc</th>\n    <td class=\"gt_row gt_center\"></td>\n    <td class=\"gt_row gt_center\">0.342*** <br> (0.075)</td>\n    <td class=\"gt_row gt_center\">0.349*** <br> (0.075)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">k5</th>\n    <td class=\"gt_row gt_center\"></td>\n    <td class=\"gt_row gt_center\"></td>\n    <td class=\"gt_row gt_center\">-0.072 <br> (0.087)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Intercept</th>\n    <td class=\"gt_row gt_center\">1.007*** <br> (0.071)</td>\n    <td class=\"gt_row gt_center\">0.972*** <br> (0.070)</td>\n    <td class=\"gt_row gt_center\">0.982*** <br> (0.071)</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"4\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">428</td>\n    <td class=\"gt_row gt_center\">428</td>\n    <td class=\"gt_row gt_center\">428</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">S.E. type</th>\n    <td class=\"gt_row gt_center\">iid</td>\n    <td class=\"gt_row gt_center\">iid</td>\n    <td class=\"gt_row gt_center\">iid</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.020</td>\n    <td class=\"gt_row gt_center\">0.066</td>\n    <td class=\"gt_row gt_center\">0.068</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Adj. R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.018</td>\n    <td class=\"gt_row gt_center\">0.062</td>\n    <td class=\"gt_row gt_center\">0.061</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"4\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell:\nCoefficient \n (Std. Error)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n## Chapter 13: Regression\n\n### Example 1\n\n::: {#208a2d1b .cell execution_count=3}\n``` {.python .cell-code}\nres = restaurant_inspections.load_pandas().data\nres.inspection_score = res.inspection_score.astype(float)\nres.NumberofLocations = res.NumberofLocations.astype(float)\nres.dtypes\n\nfit = pf.feols(fml=\"inspection_score ~ NumberofLocations\", data=res)\npf.etable([fit])\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div id=\"quyzglgbcq\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#quyzglgbcq table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#quyzglgbcq thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#quyzglgbcq p { margin: 0; padding: 0; }\n #quyzglgbcq .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #quyzglgbcq .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #quyzglgbcq .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #quyzglgbcq .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #quyzglgbcq .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #quyzglgbcq .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #quyzglgbcq .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #quyzglgbcq .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 4px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #quyzglgbcq .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #quyzglgbcq .gt_column_spanner_outer:first-child { padding-left: 0; }\n #quyzglgbcq .gt_column_spanner_outer:last-child { padding-right: 0; }\n #quyzglgbcq .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: bottom; padding-top: 4px; padding-bottom: 4px; overflow-x: hidden; display: inline-block; width: 100%; }\n #quyzglgbcq .gt_spanner_row { border-bottom-style: hidden; }\n #quyzglgbcq .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #quyzglgbcq .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: middle; }\n #quyzglgbcq .gt_from_md> :first-child { margin-top: 0; }\n #quyzglgbcq .gt_from_md> :last-child { margin-bottom: 0; }\n #quyzglgbcq .gt_row { padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #quyzglgbcq .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #quyzglgbcq .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #quyzglgbcq .gt_row_group_first td { border-top-width: 0.5px; }\n #quyzglgbcq .gt_row_group_first th { border-top-width: 0.5px; }\n #quyzglgbcq .gt_striped { background-color: rgba(128,128,128,0.05); }\n #quyzglgbcq .gt_table_body { border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #quyzglgbcq .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #quyzglgbcq .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #quyzglgbcq .gt_left { text-align: left; }\n #quyzglgbcq .gt_center { text-align: center; }\n #quyzglgbcq .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #quyzglgbcq .gt_font_normal { font-weight: normal; }\n #quyzglgbcq .gt_font_bold { font-weight: bold; }\n #quyzglgbcq .gt_font_italic { font-style: italic; }\n #quyzglgbcq .gt_super { font-size: 65%; }\n #quyzglgbcq .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #quyzglgbcq .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"inspection_score\">\n    <span class=\"gt_column_spanner\">inspection_score</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"(1)\">(1)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"2\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">NumberofLocations</th>\n    <td class=\"gt_row gt_center\">-0.019*** <br> (0.000)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Intercept</th>\n    <td class=\"gt_row gt_center\">94.866*** <br> (0.046)</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"2\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">27178</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">S.E. type</th>\n    <td class=\"gt_row gt_center\">iid</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.065</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Adj. R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.065</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"2\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell:\nCoefficient \n (Std. Error)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n### Example 2\n\n::: {#d826ee28 .cell execution_count=4}\n``` {.python .cell-code}\ndf = restaurant_inspections.load_pandas().data\n\nfit1 = pf.feols(\n    fml=\"inspection_score ~ NumberofLocations + I(NumberofLocations^2) + Year\", data=df\n)\nfit2 = pf.feols(fml=\"inspection_score ~ NumberofLocations*Weekend + Year\", data=df)\n\npf.etable([fit1, fit2])\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div id=\"xlvabnilri\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#xlvabnilri table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#xlvabnilri thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#xlvabnilri p { margin: 0; padding: 0; }\n #xlvabnilri .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: hidden; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #xlvabnilri .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #xlvabnilri .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #xlvabnilri .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #xlvabnilri .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #xlvabnilri .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #xlvabnilri .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #xlvabnilri .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: bottom; padding-top: 4px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #xlvabnilri .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #xlvabnilri .gt_column_spanner_outer:first-child { padding-left: 0; }\n #xlvabnilri .gt_column_spanner_outer:last-child { padding-right: 0; }\n #xlvabnilri .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: bottom; padding-top: 4px; padding-bottom: 4px; overflow-x: hidden; display: inline-block; width: 100%; }\n #xlvabnilri .gt_spanner_row { border-bottom-style: hidden; }\n #xlvabnilri .gt_group_heading { padding-top: 0px; padding-bottom: 0px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; border-left-style: none; border-left-width: 1px; border-left-color: white; border-right-style: none; border-right-width: 1px; border-right-color: white; vertical-align: middle; text-align: left; }\n #xlvabnilri .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 0px; font-weight: initial; border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 0.5px; border-bottom-color: black; vertical-align: middle; }\n #xlvabnilri .gt_from_md> :first-child { margin-top: 0; }\n #xlvabnilri .gt_from_md> :last-child { margin-bottom: 0; }\n #xlvabnilri .gt_row { padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: none; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 0px; border-left-color: white; border-right-style: none; border-right-width: 0px; border-right-color: white; vertical-align: middle; overflow-x: hidden; }\n #xlvabnilri .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: hidden; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #xlvabnilri .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #xlvabnilri .gt_row_group_first td { border-top-width: 0.5px; }\n #xlvabnilri .gt_row_group_first th { border-top-width: 0.5px; }\n #xlvabnilri .gt_striped { background-color: rgba(128,128,128,0.05); }\n #xlvabnilri .gt_table_body { border-top-style: solid; border-top-width: 0.5px; border-top-color: black; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: black; }\n #xlvabnilri .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #xlvabnilri .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #xlvabnilri .gt_left { text-align: left; }\n #xlvabnilri .gt_center { text-align: center; }\n #xlvabnilri .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #xlvabnilri .gt_font_normal { font-weight: normal; }\n #xlvabnilri .gt_font_bold { font-weight: bold; }\n #xlvabnilri .gt_font_italic { font-style: italic; }\n #xlvabnilri .gt_super { font-size: 65%; }\n #xlvabnilri .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #xlvabnilri .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n<tr class=\"gt_col_headings gt_spanner_row\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"\"></th>\n  <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"inspection_score\">\n    <span class=\"gt_column_spanner\">inspection_score</span>\n  </th>\n</tr>\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"(1)\">(1)</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"(2)\">(2)</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">coef</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">NumberofLocations</th>\n    <td class=\"gt_row gt_center\">-0.075*** <br> (0.019)</td>\n    <td class=\"gt_row gt_center\">-0.019*** <br> (0.000)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">I(NumberofLocations ^ 2)</th>\n    <td class=\"gt_row gt_center\">0.056** <br> (0.019)</td>\n    <td class=\"gt_row gt_center\"></td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Year</th>\n    <td class=\"gt_row gt_center\">-0.065*** <br> (0.006)</td>\n    <td class=\"gt_row gt_center\">-0.065*** <br> (0.006)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Weekend</th>\n    <td class=\"gt_row gt_center\"></td>\n    <td class=\"gt_row gt_center\">1.759*** <br> (0.488)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">NumberofLocations:Weekend</th>\n    <td class=\"gt_row gt_center\"></td>\n    <td class=\"gt_row gt_center\">-0.010 <br> (0.008)</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Intercept</th>\n    <td class=\"gt_row gt_center\">225.504*** <br> (12.409)</td>\n    <td class=\"gt_row gt_center\">225.126*** <br> (12.415)</td>\n  </tr>\n  <tr class=\"gt_group_heading_row\">\n    <th class=\"gt_group_heading\" colspan=\"3\">stats</th>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Observations</th>\n    <td class=\"gt_row gt_center\">27178</td>\n    <td class=\"gt_row gt_center\">27178</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">S.E. type</th>\n    <td class=\"gt_row gt_center\">iid</td>\n    <td class=\"gt_row gt_center\">iid</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.069</td>\n    <td class=\"gt_row gt_center\">0.069</td>\n  </tr>\n  <tr>\n    <th class=\"gt_row gt_left gt_stub\">Adj. R<sup>2</sup></th>\n    <td class=\"gt_row gt_center\">0.069</td>\n    <td class=\"gt_row gt_center\">0.069</td>\n  </tr>\n</tbody>\n  <tfoot class=\"gt_sourcenotes\">\n  \n  <tr>\n    <td class=\"gt_sourcenote\" colspan=\"3\">Significance levels: * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001. Format of coefficient cell:\nCoefficient \n (Std. Error)</td>\n  </tr>\n\n</tfoot>\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n### Example 3: HC Standard Errors\n\n::: {#928292d7 .cell execution_count=5}\n``` {.python .cell-code}\npf.feols(fml=\"inspection_score ~ Year + Weekend\", data=df, vcov=\"HC3\").summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: inspection_score, Fixed effects: 0\nInference:  HC3\nObservations:  27178\n\n| Coefficient   |   Estimate |   Std. Error |   t value |   Pr(>|t|) |    2.5% |   97.5% |\n|:--------------|-----------:|-------------:|----------:|-----------:|--------:|--------:|\n| Intercept     |    185.380 |       12.150 |    15.257 |      0.000 | 161.564 | 209.196 |\n| Year          |     -0.046 |        0.006 |    -7.551 |      0.000 |  -0.057 |  -0.034 |\n| Weekend       |      2.057 |        0.353 |     5.829 |      0.000 |   1.365 |   2.749 |\n---\nRMSE: 6.248 R2: 0.003 \n```\n:::\n:::\n\n\n### Example 4: Clustered Standard Errors\n\n::: {#2609ee80 .cell execution_count=6}\n``` {.python .cell-code}\npf.feols(\n    fml=\"inspection_score ~ Year + Weekend\", data=df, vcov={\"CRV1\": \"Weekend\"}\n).tidy()\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Estimate</th>\n      <th>Std. Error</th>\n      <th>t value</th>\n      <th>Pr(&gt;|t|)</th>\n      <th>2.5%</th>\n      <th>97.5%</th>\n    </tr>\n    <tr>\n      <th>Coefficient</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Intercept</th>\n      <td>185.380033</td>\n      <td>3.264345</td>\n      <td>56.789343</td>\n      <td>0.011209</td>\n      <td>143.902592</td>\n      <td>226.857474</td>\n    </tr>\n    <tr>\n      <th>Year</th>\n      <td>-0.045640</td>\n      <td>0.001624</td>\n      <td>-28.107556</td>\n      <td>0.022640</td>\n      <td>-0.066272</td>\n      <td>-0.025008</td>\n    </tr>\n    <tr>\n      <th>Weekend</th>\n      <td>2.057166</td>\n      <td>0.001401</td>\n      <td>1468.256799</td>\n      <td>0.000434</td>\n      <td>2.039364</td>\n      <td>2.074969</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Example 5: Bootstrap Inference\n\n::: {#122a6835 .cell execution_count=7}\n``` {.python .cell-code}\nfit = pf.feols(fml=\"inspection_score ~ Year + Weekend\", data=df)\nfit.wildboottest(reps=999, param=\"Year\")\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```\nparam                 Year\nt value           -7.55233\nPr(>|t|)               0.0\nbootstrap_type          11\ninference               HC\nimpose_null           True\nssc               1.000074\ndtype: object\n```\n:::\n:::\n\n\n## Chapter 16: Fixed Effects\n\n### Example 1\n\ntba\n\n### Example 2\n\n::: {#d675d580 .cell execution_count=8}\n``` {.python .cell-code}\ngm = gapminder.load_pandas().data\ngm[\"logGDPpercap\"] = gm[\"gdpPercap\"].apply(\"log\")\n\nfit = pf.feols(fml=\"lifeExp ~ C(country) + np.log(gdpPercap)\", data=gm)\nfit.tidy().head()\n```\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Estimate</th>\n      <th>Std. Error</th>\n      <th>t value</th>\n      <th>Pr(&gt;|t|)</th>\n      <th>2.5%</th>\n      <th>97.5%</th>\n    </tr>\n    <tr>\n      <th>Coefficient</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Intercept</th>\n      <td>-27.773459</td>\n      <td>2.500533</td>\n      <td>-11.107015</td>\n      <td>0.000000e+00</td>\n      <td>-32.678217</td>\n      <td>-22.868701</td>\n    </tr>\n    <tr>\n      <th>C(country)[T.Albania]</th>\n      <td>17.782625</td>\n      <td>2.195160</td>\n      <td>8.100835</td>\n      <td>1.110223e-15</td>\n      <td>13.476853</td>\n      <td>22.088397</td>\n    </tr>\n    <tr>\n      <th>C(country)[T.Algeria]</th>\n      <td>5.241055</td>\n      <td>2.214496</td>\n      <td>2.366704</td>\n      <td>1.806875e-02</td>\n      <td>0.897356</td>\n      <td>9.584755</td>\n    </tr>\n    <tr>\n      <th>C(country)[T.Angola]</th>\n      <td>-13.907122</td>\n      <td>2.201727</td>\n      <td>-6.316460</td>\n      <td>3.481857e-10</td>\n      <td>-18.225777</td>\n      <td>-9.588468</td>\n    </tr>\n    <tr>\n      <th>C(country)[T.Argentina]</th>\n      <td>8.132158</td>\n      <td>2.272781</td>\n      <td>3.578065</td>\n      <td>3.567229e-04</td>\n      <td>3.674133</td>\n      <td>12.590183</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Example 3: TWFE\n\n::: {#fe86c531 .cell execution_count=9}\n``` {.python .cell-code}\n# Set our individual and time (index) for our data\nfit = pf.feols(fml=\"lifeExp ~ np.log(gdpPercap) | country + year\", data=gm)\nfit.summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: lifeExp, Fixed effects: country+year\nInference:  CRV1\nObservations:  1704\n\n| Coefficient       |   Estimate |   Std. Error |   t value |   Pr(>|t|) |   2.5% |   97.5% |\n|:------------------|-----------:|-------------:|----------:|-----------:|-------:|--------:|\n| np.log(gdpPercap) |      1.450 |        0.679 |     2.134 |      0.035 |  0.107 |   2.793 |\n---\nRMSE: 3.267 R2: 0.936 R2 Within: 0.019 \n```\n:::\n:::\n\n\n## Chapter 18: Difference-in-Differences\n\n### Example 1\n\n::: {#7e9619de .cell execution_count=10}\n``` {.python .cell-code}\nod = organ_donations.load_pandas().data\n\n# Create Treatment Variable\nod[\"California\"] = od[\"State\"] == \"California\"\nod[\"After\"] = od[\"Quarter_Num\"] > 3\nod[\"Treated\"] = 1 * (od[\"California\"] & od[\"After\"])\n\ndid = pf.feols(fml=\"Rate ~ Treated | State + Quarter\", data=od)\ndid.summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n###\n\nEstimation:  OLS\nDep. var.: Rate, Fixed effects: State+Quarter\nInference:  CRV1\nObservations:  162\n\n| Coefficient   |   Estimate |   Std. Error |   t value |   Pr(>|t|) |   2.5% |   97.5% |\n|:--------------|-----------:|-------------:|----------:|-----------:|-------:|--------:|\n| Treated       |     -0.022 |        0.006 |    -3.663 |      0.001 | -0.035 |  -0.010 |\n---\nRMSE: 0.022 R2: 0.979 R2 Within: 0.009 \n```\n:::\n:::\n\n\n### Example 3: Dynamic Treatment Effect\n\n::: {#5beacb5c .cell execution_count=11}\n``` {.python .cell-code}\nod = organ_donations.load_pandas().data\n\n# Create Treatment Variable\nod[\"California\"] = od[\"State\"] == \"California\"\n# od[\"Quarter_Num\"] = pd.Categorical(od.Quarter_Num)\nod[\"California\"] = od.California.astype(float)\n\ndid2 = pf.feols(\n    fml=\"Rate ~ i(Quarter_Num, California,ref=3) | State + Quarter_Num\", data=od\n)\n\ndid2.tidy()\n```\n\n::: {.cell-output .cell-output-display execution_count=11}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Estimate</th>\n      <th>Std. Error</th>\n      <th>t value</th>\n      <th>Pr(&gt;|t|)</th>\n      <th>2.5%</th>\n      <th>97.5%</th>\n    </tr>\n    <tr>\n      <th>Coefficient</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>C(Quarter_Num, contr.treatment(base=3))[1]:California</th>\n      <td>-0.002942</td>\n      <td>0.005084</td>\n      <td>-0.578719</td>\n      <td>0.567759</td>\n      <td>-0.013393</td>\n      <td>0.007508</td>\n    </tr>\n    <tr>\n      <th>C(Quarter_Num, contr.treatment(base=3))[2]:California</th>\n      <td>0.006296</td>\n      <td>0.002266</td>\n      <td>2.778832</td>\n      <td>0.009997</td>\n      <td>0.001639</td>\n      <td>0.010953</td>\n    </tr>\n    <tr>\n      <th>C(Quarter_Num, contr.treatment(base=3))[4]:California</th>\n      <td>-0.021565</td>\n      <td>0.005034</td>\n      <td>-4.284177</td>\n      <td>0.000222</td>\n      <td>-0.031912</td>\n      <td>-0.011218</td>\n    </tr>\n    <tr>\n      <th>C(Quarter_Num, contr.treatment(base=3))[5]:California</th>\n      <td>-0.020292</td>\n      <td>0.004473</td>\n      <td>-4.536282</td>\n      <td>0.000114</td>\n      <td>-0.029487</td>\n      <td>-0.011097</td>\n    </tr>\n    <tr>\n      <th>C(Quarter_Num, contr.treatment(base=3))[6]:California</th>\n      <td>-0.022165</td>\n      <td>0.010013</td>\n      <td>-2.213610</td>\n      <td>0.035835</td>\n      <td>-0.042748</td>\n      <td>-0.001583</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "replicating-the-effect_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}