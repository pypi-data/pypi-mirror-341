import{Q as I,R as x,T as a,V as U,W as P,X as h,Y as C,Z as j,r,_ as E,a0 as D,a1 as F,a2 as R,j as i,a3 as b}from"./index-CvYqx80B.js";var u,L=new Uint8Array(16);function V(){if(!u&&(u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(L)}var k=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const g={randomUUID:k};function O(s,e,c){if(g.randomUUID&&!s)return g.randomUUID();s=s||{};var n=s.random||(s.rng||V)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,I(n)}function v(){x();const s=a(t=>t.setCurrentFlow),e=a(t=>t.currentFlow),c=U(t=>t.setClientId),{id:n}=P(),{mutateAsync:p}=h(),l=C(),y=a(t=>t.currentFlowId),f=a(t=>t.setIsLoading),m=j(t=>t.setPlaygroundPage);async function w(){try{return await p({id:n,public:!0})}catch(t){console.log(t),l("/")}}return r.useEffect(()=>{(async()=>{if(f(!0),y===""){const o=await w();o?s(o):l("/")}})(),f(!1)},[n]),r.useEffect(()=>{n&&E("Playground Page Loaded",{}),m(!0)},[]),r.useEffect(()=>{var t;if(document.title=(e==null?void 0:e.name)||"Langflow",e!=null&&e.data){const{inputs:o,outputs:d}=D(((t=e==null?void 0:e.data)==null?void 0:t.nodes)||[]);(o.length===0&&d.length===0||(e==null?void 0:e.access_type)!=="PUBLIC")&&l("/")}},[e]),r.useEffect(()=>{const t=F("client_id");if(t)c(t);else{const o=O(),d={secure:window.location.protocol==="https:",sameSite:"Strict"};R("client_id",o,d),c(o)}},[]),i.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center align-middle",children:e&&i.jsx(b,{open:!0,setOpen:()=>{},isPlayground:!0,playgroundPage:!0,children:i.jsx(i.Fragment,{})})})}export{v as default};
