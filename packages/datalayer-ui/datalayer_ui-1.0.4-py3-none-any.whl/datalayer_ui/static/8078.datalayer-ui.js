(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[8078],{5941:(e,t,r)=>{"use strict";r.d(t,{uJ:()=>j,zV:()=>A});var n=r(9387),o=r(97283),s=r(7282),i=r(97789);const a="python";var c=r(98820),l=r(72490),u=r(18565),p=r(58264);class h{constructor(e){this._isDisposed=!1,this._serverSettings=e.serverSettings,this._stream=new l.Stream(this)}async emit({data:e,schema_id:t}){this._stream.emit({...e,schema_id:t})}dispose(){this.isDisposed||(this._isDisposed=!0,l.Signal.clearData(this),this._stream.stop())}get isDisposed(){return this._isDisposed}get stream(){return this._stream}get serverSettings(){return this._serverSettings}}class d extends c.l{constructor(e){var t;super(e),this.name="JupyterLite Server",this.namespace=this.name,this.version="unknown",this._router=new p.I;const r={...i.ServerConnection.makeSettings(),WebSocket:u.WebSocket,fetch:null!==(t=this.fetch.bind(this))&&void 0!==t?t:void 0};this._serviceManager=new i.ServiceManager({standby:"never",serverSettings:r,events:new h({serverSettings:r})})}get router(){return this._router}get serviceManager(){return this._serviceManager}async fetch(e,t){if(!(e instanceof Request))throw Error("Request info is not a Request");return this._router.route(e)}attachShell(e){}evtResize(e){}registerPluginModule(e){let t=e.default;Object.prototype.hasOwnProperty.call(e,"__esModule")||(t=e),Array.isArray(t)||(t=[t]),t.forEach((e=>{try{this.registerPlugin(e)}catch(e){console.error(e)}}))}registerPluginModules(e){e.forEach((e=>{this.registerPluginModule(e)}))}}var g=r(63711);const f=(e=!0)=>async function(){const e=[],t=await Promise.all([r.e(484),r.e(7176),r.e(9382)]).then(r.bind(r,49382));for(const r of function*(e){let t;t=e.hasOwnProperty("__esModule")?e.default:e;const r=Array.isArray(t)?t:[t];for(const e of r)g.PageConfig.Extension.isDisabled(e.id)?console.info(`JupyterLite plugin '${e.id}' has been disabled.`):yield e}(t))e.push(r);const n=new d({});return n.registerPluginModules(e),await n.start(),n}().then((async t=>{const n="boolean"==typeof e?await Promise.all([r.e(484),r.e(5378)]).then(r.bind(r,28924)):await e;let o=n.default;Object.prototype.hasOwnProperty.call(n,"__esModule")||(o=n),Array.isArray(o)||(o=[o]);const s=o.map((e=>{try{return t.registerPlugin(e),e.id}catch(e){return console.error(e),null}}));await Promise.all(s.filter((e=>e)).map((e=>t.activatePlugin(e))));const i=t.serviceManager;return i.__NAME__="LiteServiceManager",console.log("Lite Service Manager is created",i),i}));var y=r(42968);let v,m=!1;const S=e=>{if(!v)throw new Error("Jupyter React Config must be loaded first.");g.PageConfig.setOption("baseUrl",e),g.PageConfig.setOption("wsUrl",e.replace(/^http/,"ws")),v.jupyterServerUrl=e},b=()=>{if(!v)throw new Error("Jupyter React Config must be loaded first.");return v.jupyterServerUrl},w=e=>{if(!v)throw new Error("Jupyter React Config must be loaded first.");g.PageConfig.setOption("token",e),v.jupyterServerToken=e},E=(e={})=>{const{collaborative:t,jupyterServerToken:r,jupyterServerUrl:n,lite:o,terminals:s}=e;if(v)return console.log("Returning existing Jupyter React config",v),v;if(v={jupyterServerUrl:n??"https://oss.datalayer.run/api/jupyter-server",jupyterServerToken:r??"60c1661cc408f978c309d04157af55c9588ff9557c9380e4fb50785750703da6",insideJupyterLab:!1,insideJupyterHub:!1},function(){if(!m){const e=document.getElementById("datalayer-config-data");if(e?.textContent){console.log("Found Datalayer config data in page",e);try{v={...v,...JSON.parse(e.textContent)},m=!0}catch(e){console.error("Failed to parse the Datalayer configuration.",e)}}else console.log("No Datalayer config data found in page")}}(),m)S(n||v.jupyterServerUrl),w(r||v.jupyterServerToken);else{const e=document.getElementById("jupyter-config-data");if(e){const t=JSON.parse(e.textContent||"");S(n??t.jupyterServerUrl??location.protocol+"//"+location.host+t.baseUrl),w(r??t.token??""),v.insideJupyterLab="JupyterLab"===t.appName,v.insideJupyterHub=""!==g.PageConfig.getOption("hubHost")}else S(n??v.jupyterServerUrl??location.protocol+"//"+location.host+"/api/jupyter-server"),w(r??v.jupyterServerToken??"")}return o&&S(location.protocol+"//"+location.host),v.insideJupyterLab||(g.PageConfig.setOption("baseUrl",b()),g.PageConfig.setOption("wsUrl",b().replace(/^http/,"ws")),g.PageConfig.setOption("token",(()=>{if(!v)throw new Error("Jupyter React Config must be loaded first.");return v.jupyterServerToken})()),g.PageConfig.setOption("collaborative",String(t)),g.PageConfig.setOption("disableRTC",String(!t)),g.PageConfig.setOption("terminalsAvailable",String(s)),g.PageConfig.setOption("mathjaxUrl","https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"),g.PageConfig.setOption("mathjaxConfig","TeX-AMS_CHTML-full,Safe")),console.log("Created config for Jupyter React",v),v};var k=r(42389),C=r(38921),_=r(98238),O=r(17402),R=r(36848);class M{_clientId;_connectionStatus;_id;_info;_kernelConnection;_kernelManager;_kernelName;_kernelSpecManager;_kernelSpecName;_kernelType;_path;_ready;_session;_sessionId;_sessionManager;constructor(e){const{kernelManager:t,kernelName:r,kernelType:n,kernelspecsManager:o,kernelSpecName:s,kernelModel:i,path:a,sessionManager:c}=e;this._kernelSpecManager=o,this._kernelManager=t,this._kernelName=r,this._kernelType=n??"notebook",this._kernelSpecName=s,this._sessionManager=c,this._ready=new _.PromiseDelegate,this.requestKernel(i,a)}async requestKernel(e,t){if(await this._kernelManager.ready,await this._sessionManager.ready,e){await this._kernelManager.refreshRunning();const t=Array.from(this.kernelManager.running()),r=(0,C.find)(t,(t=>e.id===t.id));if(!r)return void console.log("Something is wrong... can not find an existing model for",e);{console.log("Creating a session to an existing Jupyter Kernel model.",r);const t="kernel-"+e.id;this._path=t,this._session=await this._sessionManager.startNew({name:r.name,path:t,type:"notebook",kernel:r},{kernelConnectionOptions:{handleComms:!0}})}}else{let e=t??(0,O.Ri)(this.cookieName);e||(e="path-"+(0,O.YG)(),document.cookie=this.cookieName+"="+e),this._path=e,this._session=await this._sessionManager.startNew({name:this._kernelName,path:this._path,type:this._kernelType,kernel:{name:this._kernelSpecName}},{kernelConnectionOptions:{handleComms:!0}})}this._kernelConnection=this._session.kernel;const r=()=>{"connected"===this._connectionStatus&&(this._clientId=this._session.kernel.clientId,this._id=this._session.kernel.id,this._ready.resolve())};this._kernelConnection&&(this._sessionId=this._session.id,this._connectionStatus=this._kernelConnection.connectionStatus,r(),this._kernelConnection.connectionStatusChanged.connect(((e,t)=>{this._connectionStatus=t,r()})),this._kernelConnection.info.then((e=>{this._info=e,console.log("Kernel Information.",e),console.log("Kernel Session.",this._session),console.log("Kernel Details.",this.toJSON())})))}get clientId(){return this._clientId}get connection(){return this._kernelConnection}get cookieName(){return"jupyter-react-kernel-path_"+this._kernelSpecName}get id(){return this._id}get info(){return this._info}get kernelManager(){return this._kernelManager}get kernelSpecManager(){return this._kernelSpecManager}get path(){return this._path}get ready(){return this._ready.promise}get sessionId(){return this._sessionId}get session(){return this._session}get sessionManager(){return this._sessionManager}execute(e,{model:t,iopubMessageHooks:r=[],shellMessageHooks:n=[],silent:o,stopOnError:s,storeHistory:i,allowStdin:a,suppressCodeExecutionErrors:c=!1,onExecutionPhaseChanged:l}={}){if(this._kernelConnection){const u=new R.A({connection:this._kernelConnection,model:t,onExecutionPhaseChanged:l});return u.execute(e,{iopubMessageHooks:r,shellMessageHooks:n,silent:o,stopOnError:s,storeHistory:i,allowStdin:a,suppressCodeExecutionErrors:c}),u}}interrupt(){return this._kernelConnection?.interrupt()??Promise.resolve()}restart(){return this._kernelConnection?.restart()??Promise.resolve()}async shutdown(){await(this._session.kernel?.shutdown()),this.connection?.dispose()}toJSON(){return{path:this._path,id:this.id,clientId:this.clientId,sessionId:this.sessionId,kernelInfo:this.info}}toString(){return`id:${this.id} - client_id:${this.clientId} - session_id:${this.sessionId} - path:${this._path}`}}var N=r(19326);const P=(0,o.y)(((e,t)=>({outputs:0,adapter:void 0,execute:()=>{},setOutputs:t=>e((e=>({outputs:t}))),setAdapter:t=>e((e=>({adapter:t})))})));var L=r(16476),T=r(55388);const I=(0,o.y)(((e,t)=>({dark:!1,adapter:void 0,setDark:t=>e((e=>({dark:t}))),setAdapter:t=>e((e=>({adapter:t})))})));let x;try{const e=document.getElementById("datalayer-config-data");e?.innerText&&(x=JSON.parse(e?.innerText))}catch(e){console.debug("Issue with page configuration.",e)}const j=(0,o.y)(((e,t)=>({collaborative:!1,datalayerConfig:x,version:"",jupyterConfig:void 0,kernelIsLoading:!0,kernel:void 0,serviceManager:void 0,serverSettings:void 0,cellsStore:N.vw.getState(),consoleStore:P.getState(),notebookStore:L.Fg.getState(),outputStore:T.A4.getState(),terminalStore:I.getState(),setDatalayerConfig:t=>{e((e=>({datalayerConfig:t})))},setJupyterConfig:t=>{e((e=>({jupyterConfig:t})))},setServiceManager:t=>{e((e=>({serviceManager:t})))},setVersion:r=>{r&&!t().version&&e((e=>({version:r})))}})));function A(e){const{defaultKernelName:t=a,initCode:r="",jupyterServerToken:o=e.serviceManager?.serverSettings.token??"",jupyterServerUrl:c=e.serviceManager?.serverSettings.baseUrl??"",lite:l=!1,serverless:u,serviceManager:p,startDefaultKernel:h=!1,terminals:d=!1,useRunningKernelId:g=e.useRunningKernelId,useRunningKernelIndex:v=e.useRunningKernelIndex||-1}=e,m=(0,n.useMemo)((()=>{const e=E({lite:l,jupyterServerUrl:c,jupyterServerToken:o,terminals:d});return j.getState().setJupyterConfig(e),e}),[]),[S,w]=(0,n.useState)(p),[C,_]=(0,n.useState)(),[O,R]=(0,n.useState)(h||v>-1);return(0,n.useEffect)((()=>{p&&(console.log("Setting Service Manager from props",p),w(p),j.getState().setServiceManager(p))}),[p]),(0,n.useEffect)((()=>{if(u){const e=new k.Od;return w(e),void j.getState().setServiceManager(e)}if(!S){if(l)return void f(l).then((e=>{w(e),j.getState().setServiceManager(e)}));const e=(0,y.V9)(m.jupyterServerUrl,m.jupyterServerToken);(0,y.kA)(e).then((t=>{if(!t){const e=b()+"/login?next="+window.location;console.warn("You need to authenticate on the Jupyter Server URL",e)}if(g&&v>-1)throw new Error("You can not ask for useRunningKernelId and useRunningKernelIndex at the same time.");if(h&&(g||v>-1))throw new Error("You can not ask for startDefaultKernel and (useRunningKernelId or useRunningKernelIndex) at the same time.");const r=new i.ServiceManager({serverSettings:e});w(r),j.getState().setServiceManager(r)}))}}),[l,u,c]),(0,n.useEffect)((()=>{console.log("Checking kernels for the new Service Manager:",S),S?.kernels.ready.then((async()=>{const e=S.kernels;if(console.log("Jupyter Kernel Manager is ready",e),v>-1){await S.sessions.refreshRunning();const t=Array.from(e.running())[v],n=new M({kernelManager:e,kernelName:t.name,kernelSpecName:t.name,kernelModel:t,kernelspecsManager:S.kernelspecs,sessionManager:S.sessions});if(r)try{await(n.execute(r)?.done)}catch(e){console.error("Failed to execute the initial code",e)}_(n),j.getState().kernel=n,R(!1),j.getState().kernelIsLoading=!1}else if(h){console.log("Starting a Jupyter Kernel:",t);const n=new M({kernelManager:e,kernelName:t,kernelSpecName:t,kernelspecsManager:S.kernelspecs,sessionManager:S.sessions});n.ready.then((async()=>{if(r)try{await(n.execute(r)?.done)}catch(e){console.error("Failed to execute the initial code",e)}console.log("Jupyter Kernel is ready",n),_(n),j.getState().kernel=n,R(!1),j.getState().kernelIsLoading=!1}))}}))}),[S]),(0,s.Pj)(j)}},18565:function(e,t,r){var n=r(42165);!function(e){"use strict";var t="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},o=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},s=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function a(e){try{return encodeURIComponent(e)}catch(e){return null}}var c={stringify:function(e,t){t=t||"";var r,n,o=[];for(n in"string"!=typeof t&&(t="?"),e)if(s.call(e,n)){if((r=e[n])||null!=r&&!isNaN(r)||(r=""),n=a(n),r=a(r),null===n||null===r)continue;o.push(n+"="+r)}return o.length?t+o.join("&"):""},parse:function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var o=i(t[1]),s=i(t[2]);null===o||null===s||o in n||(n[o]=s)}return n}},l=/[\n\r\t]/g,u=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,p=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,h=/^[a-zA-Z]:/,d=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/;function g(e){return(e||"").toString().replace(d,"")}var f=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],y={hash:1,query:1};function v(e){var r,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},s=typeof(e=e||n);if("blob:"===e.protocol)o=new b(unescape(e.pathname),{});else if("string"===s)for(r in o=new b(e,{}),y)delete o[r];else if("object"===s){for(r in e)r in y||(o[r]=e[r]);void 0===o.slashes&&(o.slashes=u.test(e.href))}return o}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function S(e,t){e=(e=g(e)).replace(l,""),t=t||{};var r,n=p.exec(e),o=n[1]?n[1].toLowerCase():"",s=!!n[2],i=!!n[3],a=0;return s?i?(r=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(r=n[2]+n[4],a=n[2].length):i?(r=n[3]+n[4],a=n[3].length):r=n[4],"file:"===o?a>=2&&(r=r.slice(2)):m(o)?r=n[4]:o?s&&(r=r.slice(2)):a>=2&&m(t.protocol)&&(r=n[4]),{protocol:o,slashes:s||m(o),slashesCount:a,rest:r}}function b(e,t,r){if(e=(e=g(e)).replace(l,""),!(this instanceof b))return new b(e,t,r);var n,s,i,a,u,p,d=f.slice(),y=typeof t,w=this,E=0;for("object"!==y&&"string"!==y&&(r=t,t=null),r&&"function"!=typeof r&&(r=c.parse),n=!(s=S(e||"",t=v(t))).protocol&&!s.slashes,w.slashes=s.slashes||n&&t.slashes,w.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||h.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(w.protocol)))&&(d[3]=[/(.*)/,"pathname"]);E<d.length;E++)"function"!=typeof(a=d[E])?(i=a[0],p=a[1],i!=i?w[p]=e:"string"==typeof i?~(u="@"===i?e.lastIndexOf(i):e.indexOf(i))&&("number"==typeof a[2]?(w[p]=e.slice(0,u),e=e.slice(u+a[2])):(w[p]=e.slice(u),e=e.slice(0,u))):(u=i.exec(e))&&(w[p]=u[1],e=e.slice(0,u.index)),w[p]=w[p]||n&&a[3]&&t[p]||"",a[4]&&(w[p]=w[p].toLowerCase())):e=a(e,w);r&&(w.query=r(w.query)),n&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],s=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(s=!0),r.splice(n,1),i--);return s&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&m(w.protocol)&&(w.pathname="/"+w.pathname),o(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(u=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,u),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(u+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&m(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}b.prototype={set:function(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||c.parse)(t)),n[e]=t;break;case"port":n[e]=t,o(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,/:\d+$/.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";n[e]=t.charAt(0)!==s?s+t:t}else n[e]=t;break;case"username":case"password":n[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(n.username=t.slice(0,i),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=t.slice(i+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<f.length;a++){var l=f[a];l[4]&&(n[l[1]]=n[l[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin="file:"!==n.protocol&&m(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=c.stringify);var t,r=this,n=r.host,o=r.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(r.protocol&&r.slashes||m(r.protocol)?"//":"");return r.username?(s+=r.username,r.password&&(s+=":"+r.password),s+="@"):r.password?(s+=":"+r.password,s+="@"):"file:"!==r.protocol&&m(r.protocol)&&!n&&"/"!==r.pathname&&(s+="@"),":"===n[n.length-1]&&(n+=":"),s+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(s+=r.hash),s}},b.extractProtocol=S,b.location=v,b.trimLeft=g,b.qs=c;var w=b;function E(e,t){setTimeout((function(t){return e.call(t)}),4,t)}function k(e,t){void 0!==n&&console[e].call(null,t)}function C(e,t){void 0===e&&(e=[]);var r=[];return e.forEach((function(e){t(e)||r.push(e)})),r}var _=function(){this.listeners={}};function O(e){var t=e.indexOf("?");return t>=0?e.slice(0,t):e}_.prototype.addEventListener=function(e,t){"function"==typeof t&&(Array.isArray(this.listeners[e])||(this.listeners[e]=[]),0===function(e,t){void 0===e&&(e=[]);var r=[];return e.forEach((function(e){t(e)&&r.push(e)})),r}(this.listeners[e],(function(e){return e===t})).length&&this.listeners[e].push(t))},_.prototype.removeEventListener=function(e,t){var r=this.listeners[e];this.listeners[e]=C(r,(function(e){return e===t}))},_.prototype.dispatchEvent=function(e){for(var t=this,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var o=e.type,s=this.listeners[o];return!!Array.isArray(s)&&(s.forEach((function(n){r.length>0?n.apply(t,r):n.call(t,e)})),!0)};var R=function(){this.urlMap={}};R.prototype.attachWebSocket=function(e,t){var r=O(t),n=this.urlMap[r];if(n&&n.server&&-1===n.websockets.indexOf(e))return n.websockets.push(e),n.server},R.prototype.addMembershipToRoom=function(e,t){var r=this.urlMap[O(e.url)];r&&r.server&&-1!==r.websockets.indexOf(e)&&(r.roomMemberships[t]||(r.roomMemberships[t]=[]),r.roomMemberships[t].push(e))},R.prototype.attachServer=function(e,t){var r=O(t);if(!this.urlMap[r])return this.urlMap[r]={server:e,websockets:[],roomMemberships:{}},e},R.prototype.serverLookup=function(e){var t=O(e),r=this.urlMap[t];if(r)return r.server},R.prototype.websocketsLookup=function(e,t,r){var n,o=O(e),s=this.urlMap[o];return n=s?s.websockets:[],t&&(n=s.roomMemberships[t]||[]),r?n.filter((function(e){return e!==r})):n},R.prototype.removeServer=function(e){delete this.urlMap[O(e)]},R.prototype.removeWebSocket=function(e,t){var r=O(t),n=this.urlMap[r];n&&(n.websockets=C(n.websockets,(function(t){return t===e})))},R.prototype.removeMembershipFromRoom=function(e,t){var r=this.urlMap[O(e.url)],n=r.roomMemberships[t];r&&null!==n&&(r.roomMemberships[t]=C(n,(function(t){return t===e})))};var M=new R,N=1e3,P=1005,L=1006,T={CONSTRUCTOR_ERROR:"Failed to construct 'WebSocket':",CLOSE_ERROR:"Failed to execute 'close' on 'WebSocket':",EVENT:{CONSTRUCT:"Failed to construct 'Event':",MESSAGE:"Failed to construct 'MessageEvent':",CLOSE:"Failed to construct 'CloseEvent':"}},I=function(){};I.prototype.stopPropagation=function(){},I.prototype.stopImmediatePropagation=function(){},I.prototype.initEvent=function(e,t,r){void 0===e&&(e="undefined"),void 0===t&&(t=!1),void 0===r&&(r=!1),this.type=""+e,this.bubbles=Boolean(t),this.cancelable=Boolean(r)};var x=function(e){function t(t,r){if(void 0===r&&(r={}),e.call(this),!t)throw new TypeError(T.EVENT_ERROR+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(T.EVENT_ERROR+" parameter 2 ('eventInitDict') is not an object.");var n=r.bubbles,o=r.cancelable;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!o&&Boolean(o),this.cancelBubble=!1,this.bubbles=!!n&&Boolean(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(I),j=function(e){function t(t,r){if(void 0===r&&(r={}),e.call(this),!t)throw new TypeError(T.EVENT.MESSAGE+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(T.EVENT.MESSAGE+" parameter 2 ('eventInitDict') is not an object");var n=r.bubbles,o=r.cancelable,s=r.data,i=r.origin,a=r.lastEventId,c=r.ports;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!o&&Boolean(o),this.canncelBubble=!1,this.bubbles=!!n&&Boolean(n),this.origin=""+i,this.ports=void 0===c?null:c,this.data=void 0===s?null:s,this.lastEventId=""+(a||"")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(I),A=function(e){function t(t,r){if(void 0===r&&(r={}),e.call(this),!t)throw new TypeError(T.EVENT.CLOSE+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(T.EVENT.CLOSE+" parameter 2 ('eventInitDict') is not an object");var n=r.bubbles,o=r.cancelable,s=r.code,i=r.reason,a=r.wasClean;this.type=""+t,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!o&&Boolean(o),this.cancelBubble=!1,this.bubbles=!!n&&Boolean(n),this.code="number"==typeof s?parseInt(s,10):0,this.reason=""+(i||""),this.wasClean=!!a&&Boolean(a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(I);function U(e){var t=e.type,r=e.target,n=new x(t);return r&&(n.target=r,n.srcElement=r,n.currentTarget=r),n}function D(e){var t=e.type,r=e.origin,n=e.data,o=e.target,s=new j(t,{data:n,origin:r});return o&&(s.target=o,s.srcElement=o,s.currentTarget=o),s}function K(e){var t=e.code,r=e.reason,n=e.type,o=e.target,s=e.wasClean;s||(s=t===N||t===P);var i=new A(n,{code:t,reason:r,wasClean:s});return o&&(i.target=o,i.srcElement=o,i.currentTarget=o),i}function J(e,t,r){e.readyState=B.CLOSING;var n=M.serverLookup(e.url),o=K({type:"close",target:e.target,code:t,reason:r});E((function(){M.removeWebSocket(e,e.url),e.readyState=B.CLOSED,e.dispatchEvent(o),n&&n.dispatchEvent(o,n)}),e)}function W(e){return"[object Blob]"===Object.prototype.toString.call(e)||e instanceof ArrayBuffer||(e=String(e)),e}var G=new WeakMap;function q(e){if(G.has(e))return G.get(e);var t=new Proxy(e,{get:function(r,n){if("close"===n)return function(e){void 0===e&&(e={});var r=e.code||N,n=e.reason||"";J(t,r,n)};if("send"===n)return function(t){t=W(t),e.dispatchEvent(D({type:"message",data:t,origin:this.url,target:e}))};var o=function(e){return"message"===e?"server::"+e:e};return"on"===n?function(t,r){e.addEventListener(o(t),r)}:"off"===n?function(t,r){e.removeEventListener(o(t),r)}:"target"===n?e:r[n]}});return G.set(e,t),t}var B=function(e){function t(r,n){e.call(this),this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null,this.url=function(e){var t=new w(e),r=t.pathname,n=t.protocol,o=t.hash;if(!e)throw new TypeError(T.CONSTRUCTOR_ERROR+" 1 argument required, but only 0 present.");if(r||(t.pathname="/"),""===n)throw new SyntaxError(T.CONSTRUCTOR_ERROR+" The URL '"+t.toString()+"' is invalid.");if("ws:"!==n&&"wss:"!==n)throw new SyntaxError(T.CONSTRUCTOR_ERROR+" The URL's scheme must be either 'ws' or 'wss'. '"+n+"' is not allowed.");if(""!==o)throw new SyntaxError(T.CONSTRUCTOR_ERROR+" The URL contains a fragment identifier ('"+o+"'). Fragment identifiers are not allowed in WebSocket URLs.");return t.toString()}(r),n=function(e){if(void 0===e&&(e=[]),!Array.isArray(e)&&"string"!=typeof e)throw new SyntaxError(T.CONSTRUCTOR_ERROR+" The subprotocol '"+e.toString()+"' is invalid.");"string"==typeof e&&(e=[e]);var t=e.map((function(e){return{count:1,protocol:e}})).reduce((function(e,t){return e[t.protocol]=(e[t.protocol]||0)+t.count,e}),{}),r=Object.keys(t).filter((function(e){return t[e]>1}));if(r.length>0)throw new SyntaxError(T.CONSTRUCTOR_ERROR+" The subprotocol '"+r[0]+"' is duplicated.");return e}(n),this.protocol=n[0]||"",this.binaryType="blob",this.readyState=t.CONNECTING;var o=q(this),s=M.attachWebSocket(o,this.url);E((function(){if(this.readyState===t.CONNECTING)if(s)if(s.options.verifyClient&&"function"==typeof s.options.verifyClient&&!s.options.verifyClient())this.readyState=t.CLOSED,k("error","WebSocket connection to '"+this.url+"' failed: HTTP Authentication failed; no valid credentials available"),M.removeWebSocket(o,this.url),this.dispatchEvent(U({type:"error",target:this})),this.dispatchEvent(K({type:"close",target:this,code:N}));else{if(s.options.selectProtocol&&"function"==typeof s.options.selectProtocol){var e=s.options.selectProtocol(n),r=""!==e,i=-1!==n.indexOf(e);if(r&&!i)return this.readyState=t.CLOSED,k("error","WebSocket connection to '"+this.url+"' failed: Invalid Sub-Protocol"),M.removeWebSocket(o,this.url),this.dispatchEvent(U({type:"error",target:this})),void this.dispatchEvent(K({type:"close",target:this,code:N}));this.protocol=e}this.readyState=t.OPEN,this.dispatchEvent(U({type:"open",target:this})),s.dispatchEvent(U({type:"connection"}),o)}else this.readyState=t.CLOSED,this.dispatchEvent(U({type:"error",target:this})),this.dispatchEvent(K({type:"close",target:this,code:N})),k("error","WebSocket connection to '"+this.url+"' failed")}),this)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={onopen:{},onmessage:{},onclose:{},onerror:{}};return r.onopen.get=function(){return this._onopen},r.onmessage.get=function(){return this._onmessage},r.onclose.get=function(){return this._onclose},r.onerror.get=function(){return this._onerror},r.onopen.set=function(e){this.removeEventListener("open",this._onopen),this._onopen=e,this.addEventListener("open",e)},r.onmessage.set=function(e){this.removeEventListener("message",this._onmessage),this._onmessage=e,this.addEventListener("message",e)},r.onclose.set=function(e){this.removeEventListener("close",this._onclose),this._onclose=e,this.addEventListener("close",e)},r.onerror.set=function(e){this.removeEventListener("error",this._onerror),this._onerror=e,this.addEventListener("error",e)},t.prototype.send=function(e){var r=this;if(this.readyState===t.CONNECTING)throw new Error("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state");var n=D({type:"server::message",origin:this.url,data:W(e)}),o=M.serverLookup(this.url);o&&E((function(){r.dispatchEvent(n,e)}),o)},t.prototype.close=function(e,r){if(void 0!==e&&("number"!=typeof e||1e3!==e&&(e<3e3||e>4999)))throw new TypeError(T.CLOSE_ERROR+" The code must be either 1000, or between 3000 and 4999. "+e+" is neither.");if(void 0!==r&&(n=r,o=encodeURIComponent(n).match(/%[89ABab]/g),n.length+(o?o.length:0)>123))throw new SyntaxError(T.CLOSE_ERROR+" The message must not be greater than 123 bytes.");var n,o;if(this.readyState!==t.CLOSING&&this.readyState!==t.CLOSED){var s=q(this);this.readyState===t.CONNECTING?function(e,t,r){e.readyState=B.CLOSING;var n=M.serverLookup(e.url),o=K({type:"close",target:e.target,code:t,reason:r,wasClean:!1}),s=U({type:"error",target:e.target});E((function(){M.removeWebSocket(e,e.url),e.readyState=B.CLOSED,e.dispatchEvent(s),e.dispatchEvent(o),n&&n.dispatchEvent(o,n)}),e)}(s,e||L,r):J(s,e||P,r)}},Object.defineProperties(t.prototype,r),t}(_);B.CONNECTING=0,B.prototype.CONNECTING=B.CONNECTING,B.OPEN=1,B.prototype.OPEN=B.OPEN,B.CLOSING=2,B.prototype.CLOSING=B.CLOSING,B.CLOSED=3,B.prototype.CLOSED=B.CLOSED;var V=function(e){function t(r,n){var o=this;void 0===r&&(r="socket.io"),void 0===n&&(n=""),e.call(this),this.binaryType="blob";var s=new w(r);s.pathname||(s.pathname="/"),this.url=s.toString(),this.readyState=t.CONNECTING,this.protocol="",this.target=this,"string"==typeof n||"object"==typeof n&&null!==n?this.protocol=n:Array.isArray(n)&&n.length>0&&(this.protocol=n[0]);var i=M.attachWebSocket(this,this.url);E((function(){i?(this.readyState=t.OPEN,i.dispatchEvent(U({type:"connection"}),i,this),i.dispatchEvent(U({type:"connect"}),i,this),this.dispatchEvent(U({type:"connect",target:this}))):(this.readyState=t.CLOSED,this.dispatchEvent(U({type:"error",target:this})),this.dispatchEvent(K({type:"close",target:this,code:N})),k("error","Socket.io connection to '"+this.url+"' failed"))}),this),this.addEventListener("close",(function(e){o.dispatchEvent(K({type:"disconnect",target:e.target,code:e.code}))}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={broadcast:{}};return t.prototype.close=function(){if(this.readyState===t.OPEN){var e=M.serverLookup(this.url);return M.removeWebSocket(this,this.url),this.readyState=t.CLOSED,this.dispatchEvent(K({type:"close",target:this,code:N})),e&&e.dispatchEvent(K({type:"disconnect",target:this,code:N}),e),this}},t.prototype.disconnect=function(){return this.close()},t.prototype.emit=function(e){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];if(this.readyState!==t.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var o=D({type:e,origin:this.url,data:r}),s=M.serverLookup(this.url);return s&&s.dispatchEvent.apply(s,[o].concat(r)),this},t.prototype.send=function(e){return this.emit("message",e),this},r.broadcast.get=function(){if(this.readyState!==t.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var e=this,r=M.serverLookup(this.url);if(!r)throw new Error("SocketIO can not find a server at the specified URL ("+this.url+")");return{emit:function(t,n){return r.emit(t,n,{websockets:M.websocketsLookup(e.url,null,e)}),e},to:function(t){return r.to(t,e)},in:function(t){return r.in(t,e)}}},t.prototype.on=function(e,t){return this.addEventListener(e,t),this},t.prototype.off=function(e,t){this.removeEventListener(e,t)},t.prototype.hasListeners=function(e){var t=this.listeners[e];return!!Array.isArray(t)&&!!t.length},t.prototype.join=function(e){M.addMembershipToRoom(this,e)},t.prototype.leave=function(e){M.removeMembershipFromRoom(this,e)},t.prototype.to=function(e){return this.broadcast.to(e)},t.prototype.in=function(){return this.to.apply(null,arguments)},t.prototype.dispatchEvent=function(e){for(var t=this,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var o=e.type,s=this.listeners[o];if(!Array.isArray(s))return!1;s.forEach((function(n){r.length>0?n.apply(t,r):n.call(t,e.data?e.data:e)}))},Object.defineProperties(t.prototype,r),t}(_);V.CONNECTING=0,V.OPEN=1,V.CLOSING=2,V.CLOSED=3;var F=function(e,t){return new V(e,t)};F.connect=function(e,t){return F(e,t)};function z(){return"undefined"!=typeof window?window:"object"==typeof n&&"object"==typeof r.g?r.g:this}var H={mock:!0,verifyClient:null,selectProtocol:null},$=function(e){function t(t,r){void 0===r&&(r=H),e.call(this);var n=new w(t);if(n.pathname||(n.pathname="/"),this.url=n.toString(),this.originalWebSocket=null,!M.attachServer(this,this.url))throw this.dispatchEvent(U({type:"error"})),new Error("A mock server is already listening on this url");this.options=Object.assign({},H,r),this.options.mock&&this.mockWebsocket()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.mockWebsocket=function(){var e=z();this.originalWebSocket=e.WebSocket,e.WebSocket=B},t.prototype.restoreWebsocket=function(){var e=z();null!==this.originalWebSocket&&(e.WebSocket=this.originalWebSocket),this.originalWebSocket=null},t.prototype.stop=function(e){void 0===e&&(e=function(){}),this.options.mock&&this.restoreWebsocket(),M.removeServer(this.url),"function"==typeof e&&e()},t.prototype.on=function(e,t){this.addEventListener(e,t)},t.prototype.off=function(e,t){this.removeEventListener(e,t)},t.prototype.close=function(e){void 0===e&&(e={});var t=e.code,r=e.reason,n=e.wasClean,o=M.websocketsLookup(this.url);M.removeServer(this.url),o.forEach((function(e){e.readyState=B.CLOSED,e.dispatchEvent(K({type:"close",target:e.target,code:t||N,reason:r||"",wasClean:n}))})),this.dispatchEvent(K({type:"close"}),this)},t.prototype.emit=function(e,t,r){var n=this;void 0===r&&(r={});var o,s=r.websockets;s||(s=M.websocketsLookup(this.url)),"object"!=typeof r||arguments.length>3?(t=Array.prototype.slice.call(arguments,1,arguments.length),o=t.map((function(e){return W(e)}))):o=W(t),s.forEach((function(r){var s=r instanceof V?t:o;Array.isArray(s)?r.dispatchEvent.apply(r,[D({type:e,data:s,origin:n.url,target:r.target})].concat(s)):r.dispatchEvent(D({type:e,data:s,origin:n.url,target:r.target}))}))},t.prototype.clients=function(){return M.websocketsLookup(this.url)},t.prototype.to=function(e,t,r){var n=this;void 0===r&&(r=[]);var o=this,s=r.concat(M.websocketsLookup(this.url,e,t)).reduce((function(e,t){return e.indexOf(t)>-1?e:e.concat(t)}),[]);return{to:function(e,t){return n.to.call(n,e,t,s)},emit:function(e,t){o.emit(e,t,{websockets:s})}}},t.prototype.in=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.to.apply(null,e)},t.prototype.simulate=function(e){var t=M.websocketsLookup(this.url);"error"===e&&t.forEach((function(e){e.readyState=B.CLOSED,e.dispatchEvent(U({type:"error",target:e.target}))}))},t}(_);$.of=function(e){return new $(e)};var Y=$,Z=B,X=F;e.Server=Y,e.WebSocket=Z,e.SocketIO=X,Object.defineProperty(e,"__esModule",{value:!0})}(t)},19326:(e,t,r)=>{"use strict";r.d(t,{Ui:()=>i,vw:()=>s});var n=r(97283),o=r(7282);const s=(0,n.y)(((e,t)=>({cells:new Map,source:"",outputsCount:0,adapter:void 0,areAllKernelSessionsReady:!1,isAnyCellExecuting:!1,setCells:t=>e((e=>({cells:t}))),setSource:(r,n)=>{const o=t().cells,s=o.get(r);s?s.source=n:o.set(r,{source:n}),e((e=>({cells:o})))},setOutputsCount:(r,n)=>{const o=t().cells,s=o.get(r);s?s.outputsCount=n:o.set(r,{outputsCount:n}),e((e=>({cells:o})))},setKernelSessionAvailable:(r,n)=>{const o=t().cells,s=o.get(r);s?s.isKernelSessionAvailable=n:o.set(r,{isKernelSessionAvailable:n});const i=(e=>{for(const t of e.values())if(!t.isKernelSessionAvailable)return!1;return!0})(o);e((e=>({cells:o,areAllKernelSessionsReady:i})))},setAdapter:(r,n)=>{const o=t().cells,s=o.get(r);s?s.adapter=n:o.set(r,{adapter:n}),e((e=>({cells:o})))},getAdapter:e=>t().cells.get(e)?.adapter,getSource:e=>t().cells.get(e)?.source,getOutputsCount:e=>t().cells.get(e)?.outputsCount,isKernelSessionAvailable:e=>t().cells.get(e)?.isKernelSessionAvailable,execute:e=>{const r=t().cells.get(e);r?r.adapter?.execute():t().cells.forEach((e=>e.adapter?.execute()))},setIsExecuting:(r,n)=>{const o=t().cells,s=o.get(r);s?s.isExecuting=n:(t().cells.forEach((e=>e.adapter?.execute())),o.set(r,{isExecuting:n}));const i=(e=>{for(const t of e.values())if(t.isExecuting)return!0;return!1})(o);e((e=>({cells:o,isAnyCellExecuting:i})))}})));function i(e){return(0,o.Pj)(s,e)}},42968:(e,t,r)=>{"use strict";r.d(t,{V9:()=>h,kA:()=>p,PD:()=>u}),r(18683);var n=r(9387),o=r(97789),s=r(5941),i=r(63711);class a extends Error{}const c=a,l=(0,n.createContext)(void 0),u=(l.Consumer,l.Provider,e=>{const t=(0,n.useContext)(l);if(t)return t;const{jupyterConfig:r,kernel:o,kernelIsLoading:i,serviceManager:a}=(0,s.zV)(e??{});return{defaultKernel:o,jupyterServerUrl:r.jupyterServerUrl,kernel:o,kernelIsLoading:i,kernelManager:a?.kernels,lite:e?.lite,serverless:e?.serverless??!1,serverSettings:a?.serverSettings,serviceManager:a}}),p=async e=>{try{return await async function(e,t="api",r="",n={}){const s=i.URLExt.join(e.baseUrl,t,r);let a;try{if(a=await o.ServerConnection.makeRequest(s,n,e),403===a.status)throw new c}catch(e){throw new o.ServerConnection.NetworkError(e)}let l=await a.text();if(l.length>0)try{l=JSON.parse(l)}catch(e){console.warn("Not a JSON response body.",a)}if(!a.ok)throw new o.ServerConnection.ResponseError(a,l.message||l);return l}(e,"api",""),!0}catch(e){return console.log("The Jupyter Server API has failed with reason",e),!1}},h=(e,t)=>o.ServerConnection.makeSettings({baseUrl:e,wsUrl:e.replace(/^http/,"ws"),token:t,appendToken:!0,init:{mode:"cors",credentials:"include",cache:"no-store"}})},55388:(e,t,r)=>{"use strict";r.d(t,{A4:()=>s,LC:()=>i});var n=r(97283),o=r(7282);const s=(0,n.y)(((e,t)=>({outputs:new Map,getAdapter:e=>t().outputs.get(e)?.adapter,getInput:e=>t().outputs.get(e)?.input,getModel:e=>t().outputs.get(e)?.model,getDataset:e=>t().outputs.get(e)?.dataset,getExecuteRequest:e=>t().outputs.get(e)?.code,getGradeSuccess:e=>t().outputs.get(e)?.gradeSuccess,setOutputs:(t,r)=>e((e=>({outputs:r}))),setAdapter:(r,n)=>{const o=t().outputs,s=o.get(r);s?s.adapter=n:o.set(r,{adapter:n}),e((e=>({outputs:o})))},setDataset:(r,n)=>{const o=t().outputs,s=o.get(r);s?s.dataset=n:o.set(r,{dataset:n}),e((e=>({outputs:o})))},setExecuteRequest:(r,n)=>{const o=t().outputs,s=o.get(r);s?s.code=n:o.set(r,{code:n}),e((e=>({outputs:o})))},setModel:(r,n)=>{const o=t().outputs,s=o.get(r);s?s.model=n:o.set(r,{model:n}),e((e=>({outputs:o})))},setInput:(r,n)=>{const o=t().outputs,s=o.get(r);s?s.input=n:o.set(r,{input:n}),e((e=>({outputs:o})))},setGradeSuccess:(r,n)=>{const o=t().outputs,s=o.get(r);s?s.gradeSuccess=n:o.set(r,{gradeSuccess:n}),e((e=>({outputs:o})))}})));function i(e){return(0,o.Pj)(s,e)}},58264:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});class n{constructor(){this._routes=[]}get(e,t){this._add("GET",e,t)}put(e,t){this._add("PUT",e,t)}post(e,t){this._add("POST",e,t)}patch(e,t){this._add("PATCH",e,t)}delete(e,t){this._add("DELETE",e,t)}async route(e){const t=new URL(e.url),{method:r}=e,{pathname:n}=t;for(const o of this._routes){if(o.method!==r)continue;const s=n.match(o.pattern);if(!s)continue;const i=s.slice(1);let a;if("PATCH"===o.method||"PUT"===o.method||"POST"===o.method)try{a=JSON.parse(await e.text())}catch{a=void 0}return o.callback.call(null,{pathname:n,body:a,query:Object.fromEntries(t.searchParams)},...i)}throw new Error("Cannot route "+e.method+" "+e.url)}_add(e,t,r){"string"==typeof t&&(t=new RegExp(t)),this._routes.push({method:e,pattern:t,callback:r})}}},98820:(e,t,r)=>{"use strict";r.d(t,{l:()=>i});var n=r(16950),o=r(98238),s=r(14809);class i{constructor(e){var t;this._delegate=new o.PromiseDelegate,this._started=!1,this._bubblingKeydown=!1,this.pluginRegistry=null!==(t=e.pluginRegistry)&&void 0!==t?t:new o.PluginRegistry(e),this.pluginRegistry.application=this,this.commands=new n.J,this.contextMenu=new s.tz({commands:this.commands,renderer:e.contextMenuRenderer}),this.shell=e.shell}get deferredPlugins(){return this.pluginRegistry.deferredPlugins}get started(){return this._delegate.promise}async activateDeferredPlugins(){await this.pluginRegistry.activatePlugins("defer")}async activatePlugin(e){return this.pluginRegistry.activatePlugin(e)}async deactivatePlugin(e){return this.pluginRegistry.deactivatePlugin(e)}deregisterPlugin(e,t){this.pluginRegistry.deregisterPlugin(e,t)}getPluginDescription(e){return this.pluginRegistry.getPluginDescription(e)}hasPlugin(e){return this.pluginRegistry.hasPlugin(e)}isPluginActivated(e){return this.pluginRegistry.isPluginActivated(e)}listPlugins(){return this.pluginRegistry.listPlugins()}registerPlugin(e){this.pluginRegistry.registerPlugin(e)}registerPlugins(e){this.pluginRegistry.registerPlugins(e)}async resolveOptionalService(e){return this.pluginRegistry.resolveOptionalService(e)}async resolveRequiredService(e){return this.pluginRegistry.resolveRequiredService(e)}async start(e={}){var t,r;if(this._started)return this._delegate.promise;this._started=!0,this._bubblingKeydown=null!==(t=e.bubblingKeydown)&&void 0!==t&&t;const n=null!==(r=e.hostID)&&void 0!==r?r:"";await this.pluginRegistry.activatePlugins("startUp",e),this.attachShell(n),this.addEventListeners(),this._delegate.resolve()}handleEvent(e){switch(e.type){case"resize":this.evtResize(e);break;case"keydown":this.evtKeydown(e);break;case"keyup":this.evtKeyup(e);break;case"contextmenu":this.evtContextMenu(e)}}attachShell(e){s.x0.attach(this.shell,e&&document.getElementById(e)||document.body)}addEventListeners(){document.addEventListener("contextmenu",this),document.addEventListener("keydown",this,!this._bubblingKeydown),document.addEventListener("keyup",this,!this._bubblingKeydown),window.addEventListener("resize",this)}evtKeydown(e){this.commands.processKeydownEvent(e)}evtKeyup(e){this.commands.processKeyupEvent(e)}evtContextMenu(e){e.shiftKey||this.contextMenu.open(e)&&(e.preventDefault(),e.stopPropagation())}evtResize(e){this.shell.update()}}}}]);