import{Q as d,a as p}from"./QLayout-C2auIdbV.js";import{d as l,u as f,a as m,b as y,c as k,o as _,e as h,f as b,w as c,r as a,g as u,h as v,i as w}from"./index-DN2bGT0N.js";const S=l({__name:"MainLayout",setup(E){const n=f(),i=k(),g=y(),r=m();n.$subscribe((t,e)=>{e.target=="counting"&&g.path!="/"&&(console.log("counting state received, pushing to index page to countdown"),i.push("/")),e.source=="completed"&&e.target=="present"&&i.push({name:"itempresenter",params:{id:n.jobmodel.present_mediaitem_id}}),e.target=="approval"&&i.push({path:"/itemapproval"})});const s=t=>{if(!r.configuration.hardwareinputoutput.keyboard_input_enabled){console.log("keyboard input is disabled, to use keyboard input enable it in the configuration and reload the page.");return}r.configuration.actions.image.forEach((e,o)=>{if(e.trigger.keyboard_trigger.keycode==t.key){a(`/api/actions/image/${o}`);return}}),r.configuration.actions.collage.forEach((e,o)=>{if(e.trigger.keyboard_trigger.keycode==t.key){a(`/api/actions/collage/${o}`);return}}),r.configuration.actions.animation.forEach((e,o)=>{if(e.trigger.keyboard_trigger.keycode==t.key){a(`/api/actions/animation/${o}`);return}}),r.configuration.actions.video.forEach((e,o)=>{if(e.trigger.keyboard_trigger.keycode==t.key){a(`/api/actions/video/${o}`);return}}),r.configuration.actions.multicamera.forEach((e,o)=>{if(e.trigger.keyboard_trigger.keycode==t.key){a(`/api/actions/multicamera/${o}`);return}}),r.configuration.share.actions.forEach((e,o)=>{if(e.trigger.keyboard_trigger.keycode==t.key){a(`/api/share/actions/latest/${o}`,"POST");return}})};return _(()=>{console.log("register listener for keyboard input (active only on main layout)"),window.addEventListener("keyup",s)}),h(()=>{console.log("unregister listener for keyboard input"),window.removeEventListener("keyup",s)}),(t,e)=>{const o=v("router-view");return w(),b(d,{id:"main-layout",view:"hHh lpR fFf"},{default:c(()=>[u(p,null,{default:c(()=>[u(o)]),_:1})]),_:1})}}});export{S as default};
