"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["8889"],{33544:function(a,e,i){i.d(e,{yt:()=>n,fU:()=>d,kP:()=>o});i(52247),i(40251),i(39527),i(67670);var t=i(17803),s=i(56785);const n=async a=>(0,t.I)(a.config.version,2021,2,4)?a.callWS({type:"supervisor/api",endpoint:"/addons",method:"get"}):(0,s.rY)(await a.callApi("GET","hassio/addons")),o=async(a,e)=>(0,t.I)(a.config.version,2021,2,4)?a.callWS({type:"supervisor/api",endpoint:`/addons/${e}/start`,method:"post",timeout:null}):a.callApi("POST",`hassio/addons/${e}/start`),d=async(a,e)=>{(0,t.I)(a.config.version,2021,2,4)?await a.callWS({type:"supervisor/api",endpoint:`/addons/${e}/install`,method:"post",timeout:null}):await a.callApi("POST",`hassio/addons/${e}/install`)}},92712:function(a,e,i){var t=i(73577),s=(i(19083),i(71695),i(92745),i(61893),i(61006),i(39527),i(99790),i(67670),i(13334),i(47021),i(57243)),n=i(50778),o=i(27486),d=i(36522),l=i(1416);i(83456),i(55486),i(37583),i(15369);let c,r,h,u=a=>a;(0,t.Z)([(0,n.Mo)("ha-backup-addons-picker")],(function(a,e){return{F:class extends e{constructor(...e){super(...e),a(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"addons",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"value",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"hide-version",type:Boolean})],key:"hideVersion",value(){return!1}},{kind:"field",key:"_addons",value(){return(0,o.Z)((a=>a.sort(((a,e)=>(0,l.$)(a.name,e.name,this.hass.locale.language)))))}},{kind:"method",key:"render",value:function(){return(0,s.dy)(c||(c=u` <div class="items"> ${0} </div> `),this._addons(this.addons).map((a=>{var e,i;return(0,s.dy)(r||(r=u` <ha-formfield> <ha-backup-formfield-label slot="label" .label="${0}" .version="${0}" .iconPath="${0}" .imageUrl="${0}"> </ha-backup-formfield-label> <ha-checkbox .id="${0}" .checked="${0}" @change="${0}"></ha-checkbox> </ha-formfield> `),a.name,this.hideVersion?void 0:a.version,a.iconPath||"M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4A2,2 0 0,0 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20A2,2 0 0,0 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17A2,2 0 0,0 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z",null!==(e=this.addons)&&void 0!==e&&null!==(e=e.find((e=>e.slug===a.slug)))&&void 0!==e&&e.icon?`/api/hassio/addons/${a.slug}/icon`:void 0,a.slug,(null===(i=this.value)||void 0===i?void 0:i.includes(a.slug))||!1,this._checkboxChanged)})))}},{kind:"method",key:"_checkboxChanged",value:function(a){var e;a.stopPropagation();let i=null!==(e=this.value)&&void 0!==e?e:[];const t=a.currentTarget;t.checked?i.push(t.id):i=i.filter((a=>a!==t.id)),(0,d.B)(this,"value-changed",{value:i})}},{kind:"field",static:!0,key:"styles",value(){return(0,s.iv)(h||(h=u`.items{display:flex;flex-direction:column}`))}}]}}),s.oi)},29232:function(a,e,i){var t=i(73577),s=i(72621),n=(i(19083),i(71695),i(92745),i(52805),i(19423),i(40251),i(61006),i(39527),i(99790),i(13334),i(34595),i(47021),i(57243)),o=i(50778),d=i(27486),l=i(72344),c=i(36522),r=i(87733),h=(i(83456),i(55486),i(37583),i(33544)),u=i(30511);i(92712),i(15369);let p,k,m,g,f,v=a=>a;const b="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",y={config:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",database:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17Z",media:"M4,6H2V20A2,2 0 0,0 4,22H18V20H4V6M20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M12,14.5V5.5L18,10L12,14.5Z",share:b,ssl:"M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z"};(0,t.Z)([(0,o.Mo)("ha-backup-data-picker")],(function(a,e){class i extends e{constructor(...e){super(...e),a(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"data",value:void 0},{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"value",value:void 0},{kind:"field",decorators:[(0,o.SB)()],key:"_addonIcons",value(){return{}}},{kind:"method",key:"firstUpdated",value:function(a){(0,s.Z)(i,"firstUpdated",this,3)([a]),(0,l.p)(this.hass,"hassio")&&this._fetchAddonInfo()}},{kind:"method",key:"_fetchAddonInfo",value:async function(){const{addons:a}=await(0,h.yt)(this.hass);this._addonIcons=a.reduce(((a,e)=>Object.assign(Object.assign({},a),{},{[e.slug]:e.icon})),{})}},{kind:"field",key:"_homeAssistantItems",value(){return(0,d.Z)(((a,e)=>{const i=[];return a.homeassistant_included&&i.push({label:a.database_included?this.hass.localize("ui.panel.config.backup.data_picker.settings_and_history"):this.hass.localize("ui.panel.config.backup.data_picker.settings"),id:"config",version:a.homeassistant_version}),i.push(...a.folders.map((a=>({label:this._localizeFolder(a),id:a})))),i}))}},{kind:"method",key:"_localizeFolder",value:function(a){switch(a){case"media":return this.hass.localize("ui.panel.config.backup.data_picker.media");case"share":return this.hass.localize("ui.panel.config.backup.data_picker.share_folder");case"ssl":return this.hass.localize("ui.panel.config.backup.data_picker.ssl");case"addons/local":return this.hass.localize("ui.panel.config.backup.data_picker.local_addons")}return(0,r.f)(a)}},{kind:"field",key:"_addonsItems",value(){return(0,d.Z)(((a,e,i)=>a.addons.map((a=>({name:a.name,slug:a.slug,version:a.version,icon:i[a.slug]})))))}},{kind:"field",key:"_parseValue",value(){return(0,d.Z)((a=>{if(!a)return{homeassistant:[],addons:[]};const e=[],i=[];a.homeassistant_included&&e.push("config");const t=a.folders;e.push(...t);const s=a.addons.map((a=>a.slug));return i.push(...s),{homeassistant:e,addons:i}}))}},{kind:"field",key:"_formatValue",value(){return(0,d.Z)(((a,e)=>({homeassistant_version:e.homeassistant_version,homeassistant_included:a.homeassistant.includes("config"),database_included:e.database_included&&a.homeassistant.includes("config"),addons:e.addons.filter((e=>a.addons.includes(e.slug))),folders:e.folders.filter((e=>a.homeassistant.includes(e)))})))}},{kind:"method",key:"_homeassistantChanged",value:function(a){const e=this._parseValue(this.value),i=a.currentTarget;i.checked?e.homeassistant.push(i.id):e.homeassistant=e.homeassistant.filter((a=>a!==i.id));const t=this._formatValue(e,this.data);(0,c.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_addonsChanged",value:function(a){a.stopPropagation();const e=this._parseValue(this.value),i=a.detail.value;e.addons=i;const t=this._formatValue(e,this.data);(0,c.B)(this,"value-changed",{value:t})}},{kind:"method",key:"_sectionChanged",value:function(a){const e=this._parseValue(this.value),i=this._parseValue(this.data),t=a.currentTarget,s=t.id;t.checked?e[s]=i[s]:e[s]=[];const n=this._formatValue(e,this.data);(0,c.B)(this,"value-changed",{value:n})}},{kind:"method",key:"render",value:function(){const a=this._homeAssistantItems(this.data,this.hass.localize),e=this._addonsItems(this.data,this.hass.localize,this._addonIcons),i=this._parseValue(this.value);return(0,n.dy)(p||(p=v` ${0} ${0} `),a.length?(0,n.dy)(k||(k=v` <div class="section"> <ha-formfield> <ha-backup-formfield-label slot="label" label="MSH" .iconPath="${0}"> </ha-backup-formfield-label> <ha-checkbox .id="${0}" .checked="${0}" .indeterminate="${0}" @change="${0}"></ha-checkbox> </ha-formfield> <div class="items"> ${0} </div> </div> `),u.mdiHomeAssistant,"homeassistant",i.homeassistant.length===a.length,i.homeassistant.length>0&&i.homeassistant.length<a.length,this._sectionChanged,a.map((a=>(0,n.dy)(m||(m=v` <ha-formfield> <ha-backup-formfield-label slot="label" .label="${0}" .version="${0}" .iconPath="${0}"> </ha-backup-formfield-label> <ha-checkbox .id="${0}" .checked="${0}" @change="${0}"></ha-checkbox> </ha-formfield> `),a.label,a.version,y[a.id]||b,a.id,i.homeassistant.includes(a.id),this._homeassistantChanged)))):n.Ld,e.length?(0,n.dy)(g||(g=v` <div class="section"> <ha-formfield> <ha-backup-formfield-label slot="label" .label="${0}" .iconPath="${0}"> </ha-backup-formfield-label> <ha-checkbox .id="${0}" .checked="${0}" .indeterminate="${0}" @change="${0}"></ha-checkbox> </ha-formfield> <ha-backup-addons-picker .hass="${0}" .value="${0}" @value-changed="${0}" .addons="${0}"> </ha-backup-addons-picker> </div> `),this.hass.localize("ui.panel.config.backup.data_picker.addons"),"M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4A2,2 0 0,0 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20A2,2 0 0,0 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17A2,2 0 0,0 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z","addons",i.addons.length===e.length,i.addons.length>0&&i.addons.length<e.length,this._sectionChanged,this.hass,i.addons,this._addonsChanged,e):n.Ld)}},{kind:"field",static:!0,key:"styles",value(){return(0,n.iv)(f||(f=v`.section{margin-left:-16px;margin-inline-start:-16px;margin-inline-end:initial}.items{padding-left:40px;padding-inline-start:40px;padding-inline-end:initial;display:flex;flex-direction:column}ha-backup-addons-picker{display:block;padding-left:40px;padding-inline-start:40px;padding-inline-end:initial}`))}}]}}),n.oi)},15369:function(a,e,i){var t=i(73577),s=(i(71695),i(47021),i(57243)),n=i(50778);i(37583);let o,d,l,c,r,h=a=>a;(0,t.Z)([(0,n.Mo)("ha-backup-formfield-label")],(function(a,e){return{F:class extends e{constructor(...e){super(...e),a(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({type:String})],key:"label",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:String,attribute:"image-url"})],key:"imageUrl",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:String,attribute:"icon-path"})],key:"iconPath",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:String})],key:"version",value:void 0},{kind:"method",key:"render",value:function(){return(0,s.dy)(o||(o=h` ${0} <span class="label"> ${0} ${0} </span> `),this.imageUrl?(0,s.dy)(d||(d=h`<img loading="lazy" alt="" src="${0}" class="icon">`),this.imageUrl):this.iconPath?(0,s.dy)(l||(l=h` <ha-svg-icon .path="${0}" class="icon"></ha-svg-icon> `),this.iconPath):s.Ld,this.label,this.version?(0,s.dy)(c||(c=h`<span class="version">(${0})</span>`),this.version):s.Ld)}},{kind:"field",static:!0,key:"styles",value(){return(0,s.iv)(r||(r=h`:host{display:flex;flex-direction:row;gap:16px;align-items:center}.label{margin-right:4px;margin-inline-end:4px;margin-inline-start:initial;font-size:14px;font-weight:400;line-height:24px;letter-spacing:.5px}.version{color:var(--secondary-text-color)}.icon{--mdi-icon-size:24px;width:24px;height:24px}`))}}]}}),s.oi)},96804:function(a,e,i){i.d(e,{U:()=>n});i(71695),i(40251),i(47021);var t=i(36522);const s=()=>Promise.all([i.e("7442"),i.e("51747")]).then(i.bind(i,60906)),n=(a,e)=>{(0,t.B)(a,"show-dialog",{dialogTag:"ha-dialog-restore-backup",dialogImport:s,dialogParams:e})}},13526:function(a,e,i){i.a(a,(async function(a,t){try{i.r(e);var s=i(73577),n=i(72621),o=(i(19083),i(71695),i(61893),i(40251),i(61006),i(39527),i(99790),i(13334),i(47021),i(57243)),d=i(50778),l=i(64214),c=i(73850),r=i(83523),h=(i(99426),i(59826),i(34273),i(54977),i(97206),i(23334),i(7285),i(19993),i(74633),i(26779)),u=(i(87979),i(88238)),p=i(90698),k=(i(29232),i(96804)),m=i(36522),g=i(76131),f=i(9807),v=a([l,f,h]);[l,f,h]=v.then?(await v)():v;let b,y,_,$,C,x,A,V,H,z,L,M=a=>a;const w="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",B="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",Z="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",I="M6,2H18A2,2 0 0,1 20,4V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2M12,4A6,6 0 0,0 6,10C6,13.31 8.69,16 12.1,16L11.22,13.77C10.95,13.29 11.11,12.68 11.59,12.4L12.45,11.9C12.93,11.63 13.54,11.79 13.82,12.27L15.74,14.69C17.12,13.59 18,11.9 18,10A6,6 0 0,0 12,4M12,9A1,1 0 0,1 13,10A1,1 0 0,1 12,11A1,1 0 0,1 11,10A1,1 0 0,1 12,9M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M12.09,13.27L14.58,19.58L17.17,18.08L12.95,12.77L12.09,13.27Z",S="M4,5C2.89,5 2,5.89 2,7V17C2,18.11 2.89,19 4,19H20C21.11,19 22,18.11 22,17V7C22,5.89 21.11,5 20,5H4M4.5,7A1,1 0 0,1 5.5,8A1,1 0 0,1 4.5,9A1,1 0 0,1 3.5,8A1,1 0 0,1 4.5,7M7,7H20V17H7V7M8,8V16H11V8H8M12,8V16H15V8H12M16,8V16H19V8H16M9,9H10V10H9V9M13,9H14V10H13V9M17,9H18V10H17V9Z",P=(a,e)=>[...a.filter((a=>!e.includes(a))),...e].map((a=>({id:a,success:!e.includes(a)}))).sort(((a,e)=>(0,h.Ef)(a.id,e.id)));(0,s.Z)([(0,d.Mo)("ha-config-backup-details")],(function(a,e){class i extends e{constructor(...e){super(...e),a(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,d.Cb)({attribute:"backup-id"})],key:"backupId",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"config",value:void 0},{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"agents",value(){return[]}},{kind:"field",decorators:[(0,d.SB)()],key:"_backup",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_agents",value(){return[]}},{kind:"field",decorators:[(0,d.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_selectedData",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_addonsInfo",value:void 0},{kind:"method",key:"firstUpdated",value:function(a){(0,n.Z)(i,"firstUpdated",this,3)([a]),this.backupId?this._fetchBackup():this._error="Backup id not defined"}},{kind:"method",key:"render",value:function(){var a;return this.hass?(0,o.dy)(b||(b=M` <hass-subpage back-path="/config/backup/backups" .hass="${0}" .narrow="${0}" .header="${0}"> <ha-button-menu slot="toolbar-icon" @action="${0}"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} </ha-list-item> <ha-list-item graphic="icon" class="warning"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} </ha-list-item> </ha-button-menu> <div class="content"> ${0} ${0} </div> </hass-subpage> `),this.hass,this.narrow,(null===(a=this._backup)||void 0===a?void 0:a.name)||this.hass.localize("ui.panel.config.backup.details.header"),this._handleAction,this.hass.localize("ui.common.menu"),B,Z,this.hass.localize("ui.common.download"),w,this.hass.localize("ui.common.delete"),this._error&&(0,o.dy)(y||(y=M`<ha-alert alert-type="error">${0}</ha-alert>`),this._error),null===this._backup?(0,o.dy)(_||(_=M` <ha-alert alert-type="warning" .title="${0}"> ${0} </ha-alert> `),this.hass.localize("ui.panel.config.backup.details.not_found"),this.hass.localize("ui.panel.config.backup.details.not_found_description",{backupId:this.backupId})):this._backup?(0,o.dy)(C||(C=M` <ha-card> <div class="card-header"> ${0} </div> <div class="card-content"> <ha-md-list class="summary"> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> </ha-md-list-item> <ha-md-list-item> <span slot="headline"> ${0} </span> <span slot="supporting-text"> ${0} </span> </ha-md-list-item> </ha-md-list> </div> </ha-card> <ha-card> <div class="card-header"> ${0} </div> <div class="card-content"> <ha-backup-data-picker .hass="${0}" .data="${0}" .value="${0}" @value-changed="${0}" .addonsInfo="${0}"> </ha-backup-data-picker> </div> <div class="card-actions"> <ha-button @click="${0}" .disabled="${0}" class="danger"> ${0} </ha-button> </div> </ha-card> <ha-card> <div class="card-header"> ${0} </div> <div class="card-content"> <ha-md-list> ${0} </ha-md-list> </div> </ha-card> `),this.hass.localize("ui.panel.config.backup.details.summary.title"),this.hass.localize("ui.panel.config.backup.details.summary.size"),(0,p.d)(this._backup.size),this.hass.localize("ui.panel.config.backup.details.summary.created"),(0,l.o0)(new Date(this._backup.date),this.hass.locale,this.hass.config),this.hass.localize("ui.panel.config.backup.details.summary.protection"),this._backup.protected?this.hass.localize("ui.panel.config.backup.details.summary.protected_encrypted_aes_128"):this.hass.localize("ui.panel.config.backup.details.summary.protected_not_encrypted"),this.hass.localize("ui.panel.config.backup.details.restore.title"),this.hass,this._backup,this._selectedData,this._selectedBackupChanged,this._addonsInfo,this._restore,this._isRestoreDisabled(),this.hass.localize("ui.panel.config.backup.details.restore.action"),this.hass.localize("ui.panel.config.backup.details.locations.title"),this._agents.map((a=>{var e;const i=a.id,t=a.success,s=(0,c.M)(i),n=(0,h.Sw)(this.hass.localize,i,this.agents);return(0,o.dy)(x||(x=M` <ha-md-list-item> ${0} <div slot="headline">${0}</div> <div slot="supporting-text"> <span class="dot ${0}"> </span> <span> ${0} </span> </div> ${0} </ha-md-list-item> `),(0,h.V1)(i)?(0,o.dy)(A||(A=M` <ha-svg-icon .path="${0}" slot="start"> </ha-svg-icon> `),I):(0,h.BR)(i)?(0,o.dy)(V||(V=M` <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> `),S):(0,o.dy)(H||(H=M` <img .src="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" alt="" slot="start"> `),(0,u.X1)({domain:s,type:"icon",useFallback:!0,darkOptimized:null===(e=this.hass.themes)||void 0===e?void 0:e.darkMode})),n,t?"success":"error",t?this.hass.localize("ui.panel.config.backup.details.locations.backup_stored"):this.hass.localize("ui.panel.config.backup.details.locations.backup_failed"),t?(0,o.dy)(z||(z=M`<ha-button-menu slot="end" @action="${0}" .agent="${0}" fixed> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-list-item graphic="icon"> <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> ${0} </ha-list-item> </ha-button-menu>`),this._handleAgentAction,i,this.hass.localize("ui.common.menu"),B,Z,this.hass.localize("ui.panel.config.backup.details.locations.download")):o.Ld)}))):(0,o.dy)($||($=M`<ha-circular-progress active></ha-circular-progress>`))):o.Ld}},{kind:"method",key:"_selectedBackupChanged",value:function(a){a.stopPropagation(),this._selectedData=a.detail.value}},{kind:"method",key:"_isRestoreDisabled",value:function(){var a,e;return!this._selectedData||!(null!==(a=this._selectedData)&&void 0!==a&&a.database_included||null!==(e=this._selectedData)&&void 0!==e&&e.homeassistant_included||this._selectedData.addons.length||this._selectedData.folders.length)}},{kind:"method",key:"_restore",value:function(){this._backup&&this._selectedData&&(0,k.U)(this,{backup:this._backup,selectedData:this._selectedData})}},{kind:"method",key:"_fetchBackup",value:async function(){try{const a=await(0,h.Ye)(this.hass,this.backupId);this._backup=a.backup,this._agents=P(a.backup.agent_ids||[],a.backup.failed_agent_ids||[])}catch(a){this._error=(null==a?void 0:a.message)||this.hass.localize("ui.panel.config.backup.details.error")}}},{kind:"method",key:"_handleAction",value:function(a){switch(a.detail.index){case 0:this._downloadBackup();break;case 1:this._deleteBackup()}}},{kind:"method",key:"_handleAgentAction",value:function(a){const e=a.currentTarget.agent;this._downloadBackup(e)}},{kind:"method",key:"_downloadBackup",value:async function(a){var e;await(0,f.w)(this.hass,this,this._backup,null===(e=this.config)||void 0===e?void 0:e.create_backup.password,a)}},{kind:"method",key:"_deleteBackup",value:async function(){await(0,g.showConfirmationDialog)(this,{title:this.hass.localize("ui.panel.config.backup.dialogs.delete.title"),text:this.hass.localize("ui.panel.config.backup.dialogs.delete.text"),confirmText:this.hass.localize("ui.common.delete"),destructive:!0})&&(await(0,h.Ug)(this.hass,this._backup.backup_id),(0,m.B)(this,"ha-refresh-backup-info"),(0,r.c)("/config/backup"))}},{kind:"field",static:!0,key:"styles",value(){return(0,o.iv)(L||(L=M`.content{padding:28px 20px 0;max-width:690px;margin:0 auto;gap:24px;display:grid;margin-bottom:24px}.card-content{padding:0 20px}.card-actions{display:flex;justify-content:flex-end}ha-md-list{background:0 0;padding:0}ha-md-list-item{--md-list-item-leading-space:0;--md-list-item-trailing-space:0;--md-list-item-two-line-container-height:64px}ha-md-list-item img{width:48px}ha-md-list-item ha-svg-icon[slot=start]{--mdc-icon-size:48px;color:var(--primary-text-color)}ha-md-list.summary ha-md-list-item{--md-list-item-supporting-text-size:1rem;--md-list-item-label-text-size:0.875rem;--md-list-item-label-text-color:var(--secondary-text-color);--md-list-item-supporting-text-color:var(--primary-text-color)}.warning{color:var(--error-color)}.warning ha-svg-icon{color:var(--error-color)}ha-button.danger{--mdc-theme-primary:var(--error-color)}ha-backup-data-picker{display:block}ha-md-list-item [slot=supporting-text]{display:flex;align-items:center;flex-direction:row;gap:8px;line-height:normal}.dot{display:block;position:relative;width:8px;height:8px;background-color:var(--disabled-color);border-radius:50%;flex:none}.dot.success{background-color:var(--success-color)}.dot.error{background-color:var(--error-color)}.card-header{padding-bottom:8px}`))}}]}}),o.oi);t()}catch(b){t(b)}}))}}]);
//# sourceMappingURL=8889.8615a269a9e5ffbe.js.map