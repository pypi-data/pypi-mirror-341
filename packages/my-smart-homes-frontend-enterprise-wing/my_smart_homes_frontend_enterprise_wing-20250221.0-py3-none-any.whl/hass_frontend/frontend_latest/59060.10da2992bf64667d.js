export const ids=["59060"];export const modules={57982:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{A:()=>c});var s=i(46467),a=i(33570),r=t([s,a]);function o(t,e,i=0){return n=>{const r=new Date(n);if(i>88)return 0===r.getMonth()?`{bold|${(0,s.NC)(r,t,e)}}`:(0,s.Nh)(r,t,e);if(i>35)return 1===r.getDate()?`{bold|${(0,s.ud)(r,t,e)}}`:(0,s.ud)(r,t,e);if(i>7){const i=(0,s.ud)(r,t,e);return 1===r.getDate()?`{bold|${i}}`:i}return i>2?(0,s.U8)(r,t,e):0===r.getHours()&&0===r.getMinutes()&&0===r.getSeconds()?`{bold|${(0,s.ud)(r,t,e)}}`:(0,a.mr)(r,t,e)}}function c(t,e,i){return{formatter:o(t,e,i),rich:{bold:{fontWeight:"bold"}},hideOverlap:!0}}[s,a]=r.then?(await r)():r,n()}catch(h){n(h)}}))},53259:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{J:()=>f,Zx:()=>y,b4:()=>_});i(92745),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(39527),i(99790),i(41360),i(13334);var s=i(21893),a=i(13809),r=i(38836),o=i(50602),c=i(46467),h=i(33570),d=i(57982),u=t([d,c,h,o]);function l(t,e){let i=new Date(e);return t>2&&0===i.getHours()&&(i=(0,s.b)(i,1)),i.setMinutes(0,0,0),t>35&&i.setDate(1),t>2&&i.setHours(0),i.getTime()}function _(t){return t>35?"month":t>2?"day":"hour"}function f(t,e,i,n,s,r,c,h){const u=(0,a.j)(e,t),_=void 0!==r&&void 0!==c;return{xAxis:{id:"xAxisMain",type:"time",min:t.getTime(),max:l(u,e),axisLabel:(0,d.A)(i,n,u),axisLine:{show:!1},splitLine:{show:!0},minInterval:u>=89?24192e5:u>2?864e5:void 0},yAxis:{type:"value",name:s,nameGap:5,axisLabel:{formatter:t=>(0,o.uf)(Math.abs(t),i)},splitLine:{show:!0}},grid:{top:35,bottom:10,left:10,right:10,containLabel:!0},tooltip:{trigger:"axis",formatter:t=>{if(Array.isArray(t)){const e=[],a=[];return t.forEach((t=>{t.seriesId?.startsWith("compare-")?a.push(t):e.push(t)})),[e,a].filter((t=>t.length>0)).map((t=>g(t,i,n,u,_,s,h))).join("<br><br>")}return g([t],i,n,u,_,s,h)}}}}function g(t,e,i,n,s,a,d){if(!t[0].value)return"";const u=new Date(t[0].value?.[2]??t[0].value?.[0]);let l;l=n>0?`${(0,c.ud)(u,e,i)}`:`${s?`${(0,c.ud)(u,e,i)}: `:""}${(0,h.mr)(u,e,i)} â€“ ${(0,h.mr)((0,r.T)(u,1),e,i)}`;const _=`<h4 style="text-align: center; margin: 0;">${l}</h4>`;let f=0,g=0,y=0,v=0;const m=t.map((t=>{const i=t.value?.[1],n=(0,o.uf)(i,e);return"0"!==n&&("bar"===t.componentSubType&&(i>0?(f+=i,g++):(y+=i,v++)),`${t.marker} ${t.seriesName}: ${n} ${a}`)})).filter(Boolean);let b="";return 0!==f&&g>1&&d&&(b+=`<br><b>${d(f)}</b>`),0!==y&&v>1&&d&&(b+=`<br><b>${d(y)}</b>`),m.length>0?`${_}${m.join("<br>")}${b}`:""}function y(t){Array.from(new Set(t.map((t=>t.data.map((t=>t[0])))).flat())).sort(((t,e)=>t-e)).forEach(((e,i)=>{const n={},s={};for(let a=t.length-1;a>=0;a--){const r=t[a].data[i],o=r&&"object"==typeof r&&"value"in r?r:{value:r},c=o.value?.[0],h=t[a].stack??"";void 0!==c&&(c!==e?t[a].data?.splice(i,0,{value:[e,0],itemStyle:{borderWidth:0}}):0===o.value?.[1]?t[a].data[i]={...o,itemStyle:{...o.itemStyle,borderWidth:0}}:!n[h]&&o.value?.[1]>0?(t[a].data[i]={...o,itemStyle:{...o.itemStyle,borderRadius:[4,4,0,0]}},n[h]=!0):!s[h]&&o.value?.[1]<0&&(t[a].data[i]={...o,itemStyle:{...o.itemStyle,borderRadius:[0,0,4,4]}},s[h]=!0))}}))}[d,c,h,o]=u.then?(await u)():u,n()}catch(v){n(v)}}))},56615:function(t,e,i){i.a(t,(async function(t,n){try{i.r(e),i.d(e,{DEFAULT_DAYS_TO_SHOW:()=>m,HuiStatisticsGraphCard:()=>b});var s=i(44249),a=i(72621),r=(i(92745),i(39527),i(67670),i(41360),i(13809)),o=i(21893),c=i(57243),h=i(15093),d=i(35359),u=(i(54977),i(1118)),l=i(53259),_=i(17705),f=i(69223),g=i(93331),y=i(29401),v=t([u,l]);[u,l]=v.then?(await v)():v;const m=30;let b=(0,s.Z)([(0,h.Mo)("hui-statistics-graph-card")],(function(t,e){class n extends e{constructor(...e){super(...e),t(this)}}return{F:n,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await Promise.all([i.e("46379"),i.e("24199"),i.e("27506"),i.e("67390"),i.e("19551"),i.e("96803")]).then(i.bind(i,23656)),document.createElement("hui-statistics-graph-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(t,e,i){const n=(0,f.j)(t,1,e,i,["sensor"],(t=>"state_class"in t.attributes));return{type:"statistics-graph",entities:n.length?[n[0]]:[]}}},{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_statistics",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_metadata",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_unit",value:void 0},{kind:"field",key:"_entities",value:()=>[]},{kind:"field",key:"_names",value:()=>({})},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_statTypes",value:void 0},{kind:"field",key:"_energySub",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_energyStart",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_energyEnd",value:void 0},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.Z)(n,"disconnectedCallback",this,3)([]),this._unsubscribeEnergy(),this._interval&&(clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"connectedCallback",value:function(){(0,a.Z)(n,"connectedCallback",this,3)([]),this.hasUpdated&&(this._config?.energy_date_selection?this._subscribeEnergy():this._setFetchStatisticsTimer())}},{kind:"method",key:"_subscribeEnergy",value:function(){this._energySub||(this._energySub=(0,u.UB)(this.hass,{key:this._config?.collection_key}).subscribe((t=>{this._energyStart=t.start,this._energyEnd=t.end,this._getStatistics()})))}},{kind:"method",key:"_unsubscribeEnergy",value:function(){this._energySub&&(this._energySub(),this._energySub=void 0),this._energyStart=void 0,this._energyEnd=void 0}},{kind:"method",key:"getCardSize",value:function(){return 5+(this._config?.title?2:0)+(this._config?.hide_legend?0:this._entities?.length||0)}},{kind:"method",key:"getGridOptions",value:function(){return{columns:12,min_columns:6,min_rows:3}}},{kind:"method",key:"setConfig",value:function(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");const e=t.entities?(0,y.A)(t.entities,!1):[];this._entities=[],e.forEach((t=>{this._entities.push(t.entity),t.name&&(this._names[t.entity]=t.name)})),"string"==typeof t.stat_types?this._statTypes=[t.stat_types]:t.stat_types?this._statTypes=t.stat_types:this._statTypes=["change","state","sum","min","max","mean"],this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,g.Wh)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"willUpdate",value:function(t){if((0,a.Z)(n,"willUpdate",this,3)([t]),!this._config||!t.has("_config"))return;const e=t.get("_config");if(this.hass){if(this._config.energy_date_selection&&!this._energySub)return void this._subscribeEnergy();if(!this._config.energy_date_selection&&this._energySub)return this._unsubscribeEnergy(),void this._setFetchStatisticsTimer();this._config.energy_date_selection&&this._energySub&&t.has("_config")&&e?.collection_key!==this._config.collection_key&&(this._unsubscribeEnergy(),this._subscribeEnergy())}t.has("_config")&&e?.entities!==this._config.entities?this._getStatisticsMetaData(this._entities).then((()=>{this._setFetchStatisticsTimer()})):!t.has("_config")||e?.stat_types===this._config.stat_types&&e?.days_to_show===this._config.days_to_show&&e?.period===this._config.period&&e?.unit===this._config.unit||this._setFetchStatisticsTimer()}},{kind:"method",key:"_setFetchStatisticsTimer",value:function(){this._getStatistics(),clearInterval(this._interval),this._config?.energy_date_selection||(this._interval=window.setInterval((()=>this._getStatistics()),this._intervalTimeout))}},{kind:"get",key:"_period",value:function(){return this._config?.period??(this._energyStart&&this._energyEnd?(0,l.b4)((0,r.j)(this._energyEnd,this._energyStart)):void 0)}},{kind:"method",key:"render",value:function(){return this.hass&&this._config?c.dy` <ha-card .header="${this._config.title}"> <div class="content ${(0,d.$)({"has-header":!!this._config.title})}"> <statistics-chart .hass="${this.hass}" .isLoadingData="${!this._statistics}" .statisticsData="${this._statistics}" .metadata="${this._metadata}" .period="${this._period}" .chartType="${this._config.chart_type||"line"}" .statTypes="${this._statTypes}" .names="${this._names}" .unit="${this._unit}" .minYAxis="${this._config.min_y_axis}" .maxYAxis="${this._config.max_y_axis}" .fitYData="${this._config.fit_y_data||!1}" .hideLegend="${this._config.hide_legend||!1}" .logarithmicScale="${this._config.logarithmic_scale||!1}" .daysToShow="${this._config.days_to_show||m}" .height="${this._config.grid_options?.rows?"100%":void 0}"></statistics-chart> </div> </ha-card> `:c.Ld}},{kind:"get",key:"_intervalTimeout",value:function(){return 1e3*("5minute"===this._config?.period?5:60)*60}},{kind:"method",key:"_getStatisticsMetaData",value:async function(t){const e=await(0,_.Py)(this.hass,t),i={};e.forEach((t=>{i[t.statistic_id]=t})),this._metadata=i}},{kind:"method",key:"_getStatistics",value:async function(){const t=this._energyStart??(0,o.b)(new Date,24*(this._config.days_to_show||m)+1),e=this._energyEnd;try{let i;if(this._config.unit&&this._metadata){const t=Object.values(this._metadata).find((t=>(0,_.dO)(this.hass,t?.statistic_id,t)===this._config.unit));t&&(i=t.unit_class,this._unit=this._config.unit)}if(!i&&this._metadata){const t=this._metadata[this._entities[0]];i=t?.unit_class,this._unit=i&&(0,_.dO)(this.hass,t.statistic_id,t)||void 0}const n=i?{[i]:this._unit}:void 0,s=await(0,_.dL)(this.hass,t,e,this._entities,this._period,n,this._statTypes);this._statistics={},this._entities.forEach((t=>{t in s&&(this._statistics[t]=s[t])}))}catch(t){this._statistics=void 0}}},{kind:"field",static:!0,key:"styles",value:()=>c.iv`ha-card{display:flex;flex-direction:column;height:100%}.content{padding:16px;flex:1}.has-header{padding-top:0}statistics-chart{height:100%}`}]}}),c.oi);n()}catch(t){n(t)}}))},32424:function(t,e,i){i.d(e,{E:()=>a});var n=i(53907),s=i(18112);function a(t,e,i){const a=(0,s.Q)(t,i?.in);return isNaN(e)?(0,n.L)(i?.in||t,NaN):e?(a.setDate(a.getDate()+e),a):a}},38836:function(t,e,i){i.d(e,{T:()=>a});var n=i(23711),s=i(76808);function a(t,e,i){return(0,n.n)(t,e*s.vh,i)}},23711:function(t,e,i){i.d(e,{n:()=>a});var n=i(53907),s=i(18112);function a(t,e,i){return(0,n.L)(i?.in||t,+(0,s.Q)(t)+e)}},23459:function(t,e,i){i.d(e,{z:()=>a});var n=i(53907),s=i(18112);function a(t,e,i){const a=(0,s.Q)(t,i?.in);if(isNaN(e))return(0,n.L)(i?.in||t,NaN);if(!e)return a;const r=a.getDate(),o=(0,n.L)(i?.in||t,a.getTime());o.setMonth(a.getMonth()+e+1,0);return r>=o.getDate()?o:(a.setFullYear(o.getFullYear(),o.getMonth(),r),a)}},14276:function(t,e,i){i.d(e,{_:()=>s});var n=i(18112);function s(t,e){return+(0,n.Q)(t)-+(0,n.Q)(e)}},71185:function(t,e,i){i.d(e,{d:()=>c});var n=i(18492),s=i(18112);function a(t,e){const i=+(0,s.Q)(t)-+(0,s.Q)(e);return i<0?-1:i>0?1:i}function r(t,e,i){const[s,a]=(0,n.d)(i?.in,t,e);return 12*(s.getFullYear()-a.getFullYear())+(s.getMonth()-a.getMonth())}var o=i(3938);function c(t,e,i){const[s,c,h]=(0,n.d)(i?.in,t,t,e),d=a(c,h),u=Math.abs(r(c,h));if(u<1)return 0;1===c.getMonth()&&c.getDate()>27&&c.setDate(30),c.setMonth(c.getMonth()-d*u);let l=a(c,h)===-d;(0,o.h)(s)&&1===u&&1===a(s,h)&&(l=!1);const _=d*(u-+l);return 0===_?0:_}},96500:function(t,e,i){i.d(e,{i:()=>s});var n=i(18112);function s(t,e){const i=(0,n.Q)(t,e?.in);return i.setHours(23,59,59,999),i}},2621:function(t,e,i){i.d(e,{V:()=>s});var n=i(18112);function s(t,e){const i=(0,n.Q)(t,e?.in),s=i.getMonth();return i.setFullYear(i.getFullYear(),s+1,0),i.setHours(23,59,59,999),i}},86319:function(t,e,i){i.d(e,{b:()=>s});var n=i(18112);function s(t,e){return 1===(0,n.Q)(t,e?.in).getDate()}},3938:function(t,e,i){i.d(e,{h:()=>r});var n=i(96500),s=i(2621),a=i(18112);function r(t,e){const i=(0,a.Q)(t,e?.in);return+(0,n.i)(i,e)==+(0,s.V)(i,e)}},21893:function(t,e,i){i.d(e,{b:()=>s});var n=i(38836);function s(t,e,i){return(0,n.T)(t,-e,i)}}};
//# sourceMappingURL=59060.10da2992bf64667d.js.map