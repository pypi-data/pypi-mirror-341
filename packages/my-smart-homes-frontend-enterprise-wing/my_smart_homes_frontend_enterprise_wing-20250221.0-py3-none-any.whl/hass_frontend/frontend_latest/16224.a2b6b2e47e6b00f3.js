export const ids=["16224"];export const modules={50875:function(t,i,e){e.d(i,{Eu:()=>o,hZ:()=>r});var s=e(11259);const n=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return n[t%n.length]}function r(t,i){const e=i.getPropertyValue(`--graph-color-${t+1}`)||o(t);return(0,s.Rq)(e)}},31428:function(t,i,e){e.d(i,{U:()=>_});var s=e(50875),n=e(11259),o=e(4643),r=e(73850),a=e(42818),h=e(96194),c=e(76190);const d={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let u=0;const f=new Map;function _(t,i,e){return function(t,i,e){if(!e||t===h.nZ)return(0,c.g)("--history-unavailable-color",i);if(t===h.lz)return(0,c.g)("--history-unknown-color",i);const s=(0,a.tD)(e,t);if(!s)return;const u=(0,c.g)(s,i);if(!u)return;const f=(0,r.M)(e.entity_id),_=d[f]?.[t];return _?(0,n.uO)((0,o.C)((0,n.Rw)((0,n.wK)(u)),_)):u}(t,i,e)||function(t,i){if(f.has(t))return f.get(t);const e=(0,s.hZ)(u,i);return u++,f.set(t,e),e}(t,i)}},26799:function(t,i,e){e.a(t,(async function(t,s){try{e.r(i),e.d(i,{DEFAULT_HOURS_TO_SHOW:()=>v,HuiHistoryGraphCard:()=>k});var n=e(44249),o=e(72621),r=(e(92745),e(39527),e(41360),e(57243)),a=e(15093),h=e(35359),c=e(72344),d=e(71489),u=(e(99426),e(54977),e(13928),e(6280)),f=e(96309),_=e(93331),l=e(29401),y=e(58776),b=e(17705),g=t([d,u]);[d,u]=g.then?(await g)():g;const v=24;let k=(0,n.Z)([(0,a.Mo)("hui-history-graph-card")],(function(t,i){class s extends i{constructor(...i){super(...i),t(this)}}return{F:s,d:[{kind:"method",static:!0,key:"getConfigElement",value:async function(){return await Promise.all([e.e("46379"),e.e("24199"),e.e("27506"),e.e("67390"),e.e("3049"),e.e("47744")]).then(e.bind(e,96312)),document.createElement("hui-history-graph-card-editor")}},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"history-graph",entities:["sun.sun"]}}},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_history",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_statisticsHistory",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_error",value:void 0},{kind:"field",key:"_names",value:()=>({})},{kind:"field",key:"_entityIds",value:()=>[]},{kind:"field",key:"_hoursToShow",value:()=>v},{kind:"field",key:"_interval",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"method",key:"getCardSize",value:function(){return this._config?.title?2:0+2*(this._entityIds?.length||1)}},{kind:"method",key:"getGridOptions",value:function(){return{columns:12,min_columns:6,min_rows:this._config?.entities?.length||1}}},{kind:"method",key:"setConfig",value:function(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");const i=t.entities?(0,l.A)(t.entities):[];this._entityIds=[],i.forEach((t=>{this._entityIds.push(t.entity),t.name&&(this._names[t.entity]=t.name)})),this._hoursToShow=t.hours_to_show||v,this._config=t}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)(s,"connectedCallback",this,3)([]),this.hasUpdated&&this._subscribeHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(s,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_subscribeHistory",value:async function(){if(!(0,c.p)(this.hass,"history")||this._subscribed)return;const{numeric_device_classes:t}=await(0,f.ib)(this.hass);this._subscribed=(0,u.xS)(this.hass,(i=>{if(!this._subscribed)return;const e=(0,u.Nu)(this.hass,i,this._entityIds,this.hass.localize,t,this._config?.split_device_classes);this._history=(0,u.V3)(e,this._statisticsHistory,this._config?.split_device_classes)}),this._hoursToShow,this._entityIds).catch((t=>{this._subscribed=void 0,this._error=t})),await this._fetchStatistics(t),this._setRedrawTimer()}},{kind:"method",key:"_fetchStatistics",value:async function(t){const i=new Date,e=new Date;e.setHours(e.getHours()-this._hoursToShow);const s=await(0,b.dL)(this.hass,e,i,this._entityIds,"hour",void 0,["mean","state"]);this._statisticsHistory=(0,u.YA)(this.hass,s,this._entityIds,t,this._config?.split_device_classes)}},{kind:"method",key:"_redrawGraph",value:function(){this._history&&(this._history={...this._history})}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval),this._interval=window.setInterval((()=>this._redrawGraph()),6e4)}},{kind:"method",key:"_unsubscribeHistory",value:function(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then((t=>t?.())),this._subscribed=void 0)}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,_.Wh)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"updated",value:function(t){if((0,o.Z)(s,"updated",this,3)([t]),!(this._config&&this.hass&&this._hoursToShow&&this._entityIds.length))return;if(!t.has("_config")&&!t.has("hass"))return;const i=t.get("_config");!t.has("_config")||i?.entities===this._config.entities&&i?.hours_to_show===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}},{kind:"method",key:"render",value:function(){if(!this.hass||!this._config)return r.Ld;const t=new Date;t.setHours(t.getHours()-this._hoursToShow);const i=`/history?${(0,y.ou)({entity_id:this._entityIds.join(","),start_date:t.toISOString()})}`,e=this._config.grid_options?.columns??12,s=Number.isNaN(e)||Number(e)<12;return r.dy` <ha-card> ${this._config.title?r.dy` <h1 class="card-header"> ${this._config.title} <a href="${i}"><ha-icon-next></ha-icon-next></a> </h1> `:r.Ld} <div class="content ${(0,h.$)({"has-header":!!this._config.title})}"> ${this._error?r.dy` <ha-alert alert-type="error"> ${this.hass.localize("ui.components.history_charts.error")}: ${this._error.message||this._error.code} </ha-alert> `:r.dy` <state-history-charts .hass="${this.hass}" .isLoadingData="${!this._history}" .historyData="${this._history}" .names="${this._names}" up-to-now .hoursToShow="${this._hoursToShow}" .showNames="${void 0===this._config.show_names||this._config.show_names}" .logarithmicScale="${this._config.logarithmic_scale||!1}" .minYAxis="${this._config.min_y_axis}" .maxYAxis="${this._config.max_y_axis}" .fitYData="${this._config.fit_y_data||!1}" .height="${this._config.grid_options?.rows?"100%":void 0}" .narrow="${s}"></state-history-charts> `} </div> </ha-card> `}},{kind:"field",static:!0,key:"styles",value:()=>r.iv`ha-card{display:flex;flex-direction:column;height:100%}.card-header{justify-content:space-between;display:flex}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:16px;flex:1}.has-header{padding-top:0}state-history-charts{height:100%}`}]}}),r.oi);s()}catch(t){s(t)}}))}};
//# sourceMappingURL=16224.a2b6b2e47e6b00f3.js.map