export const ids=["79542"];export const modules={50875:function(t,e,i){i.d(e,{Eu:()=>o,hZ:()=>a});var s=i(11259);const n=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return n[t%n.length]}function a(t,e){const i=e.getPropertyValue(`--graph-color-${t+1}`)||o(t);return(0,s.Rq)(i)}},29937:function(t,e,i){i.d(e,{Q:()=>p});var s=i(44249),n=i(72621),o=(i(92745),i(39527),i(41360),i(57243)),a=i(15093),d=i(69634),r=i(18672),h=i(60738),c=i(36522);const u=/Mac/i.test(navigator.userAgent);i(23334);var l=i(62201),f=i(30635);const p=3e5;(0,s.Z)([(0,a.Mo)("ha-chart-base")],(function(t,e){class s extends e{constructor(...e){super(...e),t(this)}}return{F:s,d:[{kind:"field",key:"chart",value:void 0},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"data",value:()=>[]},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"options",value:void 0},{kind:"field",decorators:[(0,a.Cb)({type:String})],key:"height",value:void 0},{kind:"field",decorators:[(0,a.Cb)({attribute:"external-hidden",type:Boolean})],key:"externalHidden",value:()=>!1},{kind:"field",decorators:[(0,a.SB)(),(0,h.F_)({context:f.LW,subscribe:!0})],key:"_themes",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_isZoomed",value:()=>!1},{kind:"field",key:"_modifierPressed",value:()=>!1},{kind:"field",key:"_isTouchDevice",value:()=>"ontouchstart"in window},{kind:"field",key:"_resizeController",value(){return new r.Z(this,{callback:()=>this.chart?.resize()})}},{kind:"field",key:"_loading",value:()=>!1},{kind:"field",key:"_reducedMotion",value:()=>!1},{kind:"field",key:"_listeners",value:()=>[]},{kind:"method",key:"disconnectedCallback",value:function(){for((0,n.Z)(s,"disconnectedCallback",this,3)([]);this._listeners.length;)this._listeners.pop()();this.chart?.dispose()}},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)(s,"connectedCallback",this,3)([]),this.hasUpdated&&this._setupChart(),this._listeners.push((0,l.K)("(prefers-reduced-motion)",(t=>{this._reducedMotion=t,this.chart?.setOption({animation:!this._reducedMotion})})));const t=t=>{(u&&t.metaKey||!u&&t.ctrlKey)&&(this._modifierPressed=!0,this.options?.dataZoom||this.chart?.setOption({dataZoom:this._getDataZoomConfig()}))},e=t=>{(u&&"Meta"===t.key||!u&&"Control"===t.key)&&(this._modifierPressed=!1,this.options?.dataZoom||this.chart?.setOption({dataZoom:this._getDataZoomConfig()}))};window.addEventListener("keydown",t),window.addEventListener("keyup",e),this._listeners.push((()=>window.removeEventListener("keydown",t)),(()=>window.removeEventListener("keyup",e)))}},{kind:"method",key:"firstUpdated",value:function(){this._setupChart()}},{kind:"method",key:"willUpdate",value:function(t){(0,n.Z)(s,"willUpdate",this,3)([t]),this.hasUpdated&&this.chart&&(t.has("_themes")?this._setupChart():(t.has("data")&&this.chart.setOption({series:this.data},{lazyUpdate:!0,replaceMerge:["series"]}),(t.has("options")||t.has("_isZoomed"))&&this.chart.setOption(this._createOptions(),{lazyUpdate:!0,replaceMerge:["xAxis","yAxis","dataZoom","dataset","tooltip","legend","grid","visualMap"]})))}},{kind:"method",key:"render",value:function(){return o.dy` <div class="chart-container" style="${(0,d.V)({height:this.height??`${this._getDefaultHeight()}px`})}" @wheel="${this._handleWheel}"> <div class="chart"></div> ${this._isZoomed?o.dy`<ha-icon-button class="zoom-reset" .path="${"M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z"}" @click="${this._handleZoomReset}" title="${this.hass.localize("ui.components.history_charts.zoom_reset")}"></ha-icon-button>`:o.Ld} </div> `}},{kind:"method",key:"_setupChart",value:async function(){if(this._loading)return;const t=this.renderRoot.querySelector(".chart");this._loading=!0;try{this.chart&&this.chart.dispose();const e=(await Promise.all([i.e("83895"),i.e("58884"),i.e("12324")]).then(i.bind(i,85803))).default;this.chart=e.init(t,this._themes.darkMode?"dark":"light"),this.chart.on("legendselectchanged",(t=>{if(this.externalHidden){t.selected[t.name]?(0,c.B)(this,"dataset-unhidden",{name:t.name}):(0,c.B)(this,"dataset-hidden",{name:t.name})}})),this.chart.on("datazoom",(t=>{const{start:e,end:i}=t.batch?.[0]??t;this._isZoomed=0!==e||100!==i})),this.chart.setOption({...this._createOptions(),series:this.data})}finally{this._loading=!1}}},{kind:"method",key:"_getDataZoomConfig",value:function(){const t=this.options?.xAxis?.[0]??this.options?.xAxis,e=this.options?.yAxis?.[0]??this.options?.yAxis;if("value"!==t.type||"category"!==e.type)return{id:"dataZoom",type:"inside",orient:"horizontal",filterMode:"none",moveOnMouseMove:this._isZoomed,preventDefaultMouseMove:this._isZoomed,zoomLock:!this._isTouchDevice&&!this._modifierPressed}}},{kind:"method",key:"_createOptions",value:function(){const t=this._themes.darkMode??!1,e={backgroundColor:"transparent",animation:!this._reducedMotion,darkMode:t,aria:{show:!0},dataZoom:this._getDataZoomConfig(),...this.options,legend:this.options?.legend?{inactiveColor:t?"#444":"#ccc",...this.options.legend}:void 0};if(window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches&&e.tooltip){const t=Array.isArray(e.tooltip)?e.tooltip:[e.tooltip];t.forEach((t=>{t.confine=!0,t.appendTo=void 0})),e.tooltip=t}return e}},{kind:"method",key:"_getDefaultHeight",value:function(){return Math.max(this.clientWidth/2,400)}},{kind:"method",key:"_handleZoomReset",value:function(){this.chart?.dispatchAction({type:"dataZoom",start:0,end:100})}},{kind:"method",key:"_handleWheel",value:function(t){if(!this.options?.dataZoom){const e=u&&t.metaKey||!u&&t.ctrlKey;e&&t.preventDefault(),e!==this._modifierPressed&&(this._modifierPressed=e,this.chart?.setOption({dataZoom:this._getDataZoomConfig()}))}}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`:host{display:block;position:relative}.chart-container{position:relative;max-height:var(--chart-max-height,400px)}.chart{width:100%;height:100%}.zoom-reset{position:absolute;top:16px;right:4px;background:var(--card-background-color);border-radius:4px;--mdc-icon-button-size:32px;color:var(--primary-color);border:1px solid var(--divider-color)}`}]}}),o.oi)},6736:function(t,e,i){i.d(e,{f:()=>a});var s=i(44249),n=i(72621),o=(i(39527),i(36993),i(15093));const a=t=>(0,s.Z)(null,(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,o.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)(i,"connectedCallback",this,3)([]),this._checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,n.Z)(i,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(t){if((0,n.Z)(i,"updated",this,3)([t]),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this._checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"_checkSubscribed",value:function(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&!this.hassSubscribeRequiredHostProps?.some((t=>void 0===this[t]))&&(this.__unsubs=this.hassSubscribe())}}]}}),t)},18709:function(t,e,i){i.a(t,(async function(t,s){try{i.r(e),i.d(e,{HuiEnergyDevicesGraphCard:()=>k});var n=i(44249),o=(i(92745),i(39527),i(67670),i(41360),i(57243)),a=i(15093),d=i(35359),r=i(27486),h=i(50875),c=i(50602),u=(i(29937),i(1118)),l=i(17705),f=i(6736),p=i(93331),v=(i(54977),t([u,c]));[u,c]=v.then?(await v)():v;let k=(0,n.Z)([(0,a.Mo)("hui-energy-devices-graph-card")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_chartData",value:()=>[]},{kind:"field",decorators:[(0,a.SB)()],key:"_data",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:()=>["_config"]},{kind:"method",key:"hassSubscribe",value:function(){return[(0,u.UB)(this.hass,{key:this._config?.collection_key}).subscribe((t=>{this._data=t,this._getStatistics(t)}))]}},{kind:"method",key:"getCardSize",value:function(){return 3}},{kind:"method",key:"setConfig",value:function(t){this._config=t}},{kind:"method",key:"shouldUpdate",value:function(t){return(0,p.SN)(this,t)||t.size>1||!t.has("hass")}},{kind:"method",key:"render",value:function(){return this.hass&&this._config?o.dy` <ha-card> ${this._config.title?o.dy`<h1 class="card-header">${this._config.title}</h1>`:""} <div class="content ${(0,d.$)({"has-header":!!this._config.title})}"> <ha-chart-base .hass="${this.hass}" .data="${this._chartData}" .options="${this._createOptions(this.hass.themes?.darkMode)}" .height="${28*(this._chartData[0]?.data?.length||0)+50+"px"}"></ha-chart-base> </div> </ha-card> `:o.Ld}},{kind:"method",key:"_renderTooltip",value:function(t){const e=`<h4 style="text-align: center; margin: 0;">${this._getDeviceName(t.value[1])}</h4>`,i=`${(0,c.uf)(t.value[0],this.hass.locale,(0,c.l4)(void 0,this.hass.entities[t.value[1]]))} kWh`;return`${e}${t.marker} ${t.seriesName}: ${i}`}},{kind:"field",key:"_createOptions",value(){return(0,r.Z)((t=>({xAxis:{type:"value",name:"kWh",splitLine:{lineStyle:t?{opacity:.15}:{}}},yAxis:{type:"category",inverse:!0,axisLabel:{formatter:this._getDeviceName.bind(this),overflow:"truncate"}},grid:{top:5,left:5,right:40,bottom:0,containLabel:!0},tooltip:{show:!0,formatter:this._renderTooltip.bind(this)}})))}},{kind:"method",key:"_getDeviceName",value:function(t){return this._data?.prefs.device_consumption.find((e=>e.stat_consumption===t))?.name||(0,l.Kd)(this.hass,t,this._data?.statsMetadata[t])}},{kind:"method",key:"_getStatistics",value:async function(t){const e=t.stats,i=t.statsCompare,s=[],n=[],o=[{type:"bar",name:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.energy_usage"),itemStyle:{borderRadius:[0,4,4,0]},data:s,barWidth:i?10:20}];i&&o.push({type:"bar",name:this.hass.localize("ui.panel.lovelace.cards.energy.energy_devices_graph.previous_energy_usage"),itemStyle:{borderRadius:[0,4,4,0]},data:n,barWidth:10});const a=getComputedStyle(this);t.prefs.device_consumption.forEach(((t,o)=>{const d=t.stat_consumption in e&&(0,l.Kj)(e[t.stat_consumption])||0,r=(0,h.hZ)(o,a);if(s.push({id:o,value:[d,t.stat_consumption],itemStyle:{color:r+"7F",borderColor:r}}),i){const e=t.stat_consumption in i&&(0,l.Kj)(i[t.stat_consumption])||0;n.push({id:o,value:[e,t.stat_consumption],itemStyle:{color:r+"32",borderColor:r+"7F"}})}})),s.sort(((t,e)=>e.value[0]-t.value[0])),s.length=this._config?.max_devices||s.length,this._chartData=o,await this.updateComplete}},{kind:"field",static:!0,key:"styles",value:()=>o.iv`.card-header{padding-bottom:0}.content{padding:16px}.has-header{padding-top:0}ha-chart-base{--chart-max-height:none}`}]}}),(0,f.f)(o.oi));s()}catch(t){s(t)}}))},32424:function(t,e,i){i.d(e,{E:()=>o});var s=i(53907),n=i(18112);function o(t,e,i){const o=(0,n.Q)(t,i?.in);return isNaN(e)?(0,s.L)(i?.in||t,NaN):e?(o.setDate(o.getDate()+e),o):o}},38836:function(t,e,i){i.d(e,{T:()=>o});var s=i(23711),n=i(76808);function o(t,e,i){return(0,s.n)(t,e*n.vh,i)}},23711:function(t,e,i){i.d(e,{n:()=>o});var s=i(53907),n=i(18112);function o(t,e,i){return(0,s.L)(i?.in||t,+(0,n.Q)(t)+e)}},23459:function(t,e,i){i.d(e,{z:()=>o});var s=i(53907),n=i(18112);function o(t,e,i){const o=(0,n.Q)(t,i?.in);if(isNaN(e))return(0,s.L)(i?.in||t,NaN);if(!e)return o;const a=o.getDate(),d=(0,s.L)(i?.in||t,o.getTime());d.setMonth(o.getMonth()+e+1,0);return a>=d.getDate()?d:(o.setFullYear(d.getFullYear(),d.getMonth(),a),o)}},14276:function(t,e,i){i.d(e,{_:()=>n});var s=i(18112);function n(t,e){return+(0,s.Q)(t)-+(0,s.Q)(e)}},71185:function(t,e,i){i.d(e,{d:()=>r});var s=i(18492),n=i(18112);function o(t,e){const i=+(0,n.Q)(t)-+(0,n.Q)(e);return i<0?-1:i>0?1:i}function a(t,e,i){const[n,o]=(0,s.d)(i?.in,t,e);return 12*(n.getFullYear()-o.getFullYear())+(n.getMonth()-o.getMonth())}var d=i(3938);function r(t,e,i){const[n,r,h]=(0,s.d)(i?.in,t,t,e),c=o(r,h),u=Math.abs(a(r,h));if(u<1)return 0;1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-c*u);let l=o(r,h)===-c;(0,d.h)(n)&&1===u&&1===o(n,h)&&(l=!1);const f=c*(u-+l);return 0===f?0:f}},96500:function(t,e,i){i.d(e,{i:()=>n});var s=i(18112);function n(t,e){const i=(0,s.Q)(t,e?.in);return i.setHours(23,59,59,999),i}},2621:function(t,e,i){i.d(e,{V:()=>n});var s=i(18112);function n(t,e){const i=(0,s.Q)(t,e?.in),n=i.getMonth();return i.setFullYear(i.getFullYear(),n+1,0),i.setHours(23,59,59,999),i}},86319:function(t,e,i){i.d(e,{b:()=>n});var s=i(18112);function n(t,e){return 1===(0,s.Q)(t,e?.in).getDate()}},3938:function(t,e,i){i.d(e,{h:()=>a});var s=i(96500),n=i(2621),o=i(18112);function a(t,e){const i=(0,o.Q)(t,e?.in);return+(0,s.i)(i,e)==+(0,n.V)(i,e)}}};
//# sourceMappingURL=79542.b618478609458d25.js.map