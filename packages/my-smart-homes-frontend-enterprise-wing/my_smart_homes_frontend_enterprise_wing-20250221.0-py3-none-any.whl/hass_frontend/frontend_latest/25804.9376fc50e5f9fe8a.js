export const ids=["25804"];export const modules={97547:function(t,e,s){s.a(t,(async function(t,n){try{s.d(e,{c:()=>f,computeStateDisplay:()=>h});var i=s(96194),a=s(20382),o=s(54363),r=s(46467),c=s(64214),u=s(33570),l=s(50602),m=s(87974),d=s(73850),_=t([o,l,r,u,c]);[o,l,r,u,c]=_.then?(await _)():_;const h=(t,e,s,n,i,a,o)=>{const r=a?.[e.entity_id];return f(t,s,n,i,r,e.entity_id,e.attributes,void 0!==o?o:e.state)},f=(t,e,s,n,_,h,f,y)=>{if(y===i.lz||y===i.nZ)return t(`state.default.${y}`);const b=(0,d.M)(h),p="counter"===b||"number"===b||"input_number"===b;if((0,l.sJ)(f,"sensor"===b?s:[])||p){if("duration"===f.device_class&&f.unit_of_measurement&&o.a_.includes(f.unit_of_measurement))try{return(0,o.LU)(e,y,f.unit_of_measurement,_?.display_precision)}catch(t){}if("monetary"===f.device_class)try{return(0,l.uf)(y,e,{style:"currency",currency:f.unit_of_measurement,minimumFractionDigits:2,...(0,l.l4)({state:y,attributes:f},_)})}catch(t){}const s=(0,l.uf)(y,e,(0,l.l4)({state:y,attributes:f},_)),n=_?.translation_key&&t(`component.${_.platform}.entity.${b}.${_.translation_key}.unit_of_measurement`)||f.unit_of_measurement;return n?`${s}${(0,m.L)(n,e)}${n}`:s}if("datetime"===b){const t=new Date(y);return(0,c.o0)(t,e,n)}if(["date","input_datetime","time"].includes(b))try{const t=y.split(" ");if(2===t.length)return(0,c.o0)(new Date(t.join("T")),{...e,time_zone:a.c_.local},n);if(1===t.length){if(y.includes("-"))return(0,r.p6)(new Date(`${y}T00:00`),{...e,time_zone:a.c_.local},n);if(y.includes(":")){const t=new Date;return(0,u.mr)(new Date(`${t.toISOString().split("T")[0]}T${y}`),{...e,time_zone:a.c_.local},n)}}return y}catch(t){return y}if(["button","conversation","event","image","input_button","notify","scene","stt","tag","tts","wake_word"].includes(b)||"sensor"===b&&"timestamp"===f.device_class)try{return(0,c.o0)(new Date(y),e,n)}catch(t){return y}return _?.translation_key&&t(`component.${_.platform}.entity.${b}.${_.translation_key}.state.${y}`)||f.device_class&&t(`component.${b}.entity_component.${f.device_class}.state.${y}`)||t(`component.${b}.entity_component._.state.${y}`)||y};n()}catch(t){n(t)}}))},6280:function(t,e,s){s.a(t,(async function(t,n){try{s.d(e,{Nu:()=>S,V3:()=>j,Vk:()=>d,YA:()=>k,xS:()=>h,zP:()=>H});s(92745),s(84283),s(92519),s(42179),s(89256),s(24931),s(88463),s(57449),s(19814),s(39527),s(99790),s(67670),s(41360),s(13334),s(36993);var i=s(73850),a=s(97547),o=s(47194),r=t([a]);a=(r.then?(await r)():r)[0];const c=["climate","humidifier","water_heater"],u=["climate","humidifier","input_datetime","thermostat","water_heater","person","device_tracker"],l=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],m=(t,e)=>!t.states[e]||u.includes((0,i.M)(e)),d=(t,e,s,n,i)=>{const a={type:"history/stream",entity_ids:i,start_time:s.toISOString(),end_time:n.toISOString(),minimal_response:!0,no_attributes:!i.some((e=>m(t,e)))},o=new _(t);return t.connection.subscribeMessage((t=>e(o.processMessage(t))),a)};class _{constructor(t,e){this.hass=void 0,this.hoursToShow=void 0,this.combinedHistory=void 0,this.hass=t,this.hoursToShow=e,this.combinedHistory={}}processMessage(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;const e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,s={};for(const t of Object.keys(this.combinedHistory))s[t]=[];for(const e of Object.keys(t.states))s[e]=[];for(const n of Object.keys(s)){if(n in this.combinedHistory&&n in t.states){const e=this.combinedHistory[n],i=e[e.length-1];s[n]=e.concat(t.states[n]),t.states[n][0].lu<i.lu&&(s[n]=s[n].sort(((t,e)=>t.lu-e.lu)))}else n in this.combinedHistory?s[n]=this.combinedHistory[n]:s[n]=t.states[n];if(e&&n in this.combinedHistory){const t=s[n].filter((t=>t.lu<e));if(!t.length)continue;if(s[n]=s[n].filter((t=>t.lu>=e)),s[n].length&&s[n][0].lu===e)continue;const i=t[t.length-1];i.lu=e,s[n].unshift(i)}}return this.combinedHistory=s,this.combinedHistory}}const h=(t,e,s,n,i,a=!0,o=!0)=>{const r={type:"history/stream",entity_ids:n,start_time:new Date((new Date).getTime()-3600*s*1e3).toISOString(),minimal_response:a,significant_changes_only:o,no_attributes:i??!n.some((e=>m(t,e)))},c=new _(t,s);return t.connection.subscribeMessage((t=>e(c.processMessage(t))),r)},f=(t,e)=>t.state===e.state&&(!t.attributes||!e.attributes||l.every((s=>t.attributes[s]===e.attributes[s]))),y=(t,e,s,n,i,r,c)=>{const u=[],l=r[0];for(const o of r){if(u.length>0&&o.s===u[u.length-1].state)continue;const r={};c?.attributes.device_class&&(r.device_class=c?.attributes.device_class),u.push({state_localize:(0,a.c)(t,e,[],s,n[i],i,{...o.a||l.a,...r},o.s),state:o.s,last_changed:1e3*(o.lc?o.lc:o.lu)})}return{name:(0,o.a)(i,c?.attributes||l.a),entity_id:i,data:u}},b=(t,e,s,n)=>{const a=[];return Object.keys(s).forEach((t=>{const e=s[t],r=e[0],u=(0,i.M)(t),m=[];for(const t of e){let e;if(c.includes(u)){e={state:t.s,last_changed:1e3*t.lu,attributes:{}};for(const s of l)s in t.a&&(e.attributes[s]=t.a[s])}else e={state:t.s,last_changed:1e3*(t.lc?t.lc:t.lu),attributes:{}};m.length>1&&f(e,m[m.length-1])&&f(e,m[m.length-2])||m.push(e)}const d=t in n?n[t].attributes:"friendly_name"in r.a?r.a:void 0;a.push({domain:u,name:(0,o.a)(t,d||{}),entity_id:t,states:m})})),{unit:t,device_class:e,identifier:Object.keys(s).join(""),data:a}},p=["counter","input_number","number"],g=t=>p.includes(t),v=t=>"unit_of_measurement"in t||"state_class"in t,w=(t,e)=>null!=t.attributes.device_class&&e.includes(t.attributes.device_class),$=" ",k=(t,e,s,n,i=!1)=>{const a={};s.forEach((t=>{t in e&&(a[t]=e[t])}));const o={};Object.entries(a).forEach((([t,e])=>{const s=e.map((t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3})));o[t]=s}));const r=S(t,o,[],t.localize,n,i,!0);return(r?.line||[]).forEach((t=>{t.data.forEach((t=>{t.statistics=t.states,t.states=[]}))})),r},S=(t,e,s,n,a,o=!1,r=!1)=>{const c={},u=[],l={};if(new Set([...s,...Object.keys(e)]).forEach((s=>{s in e?l[s]=e[s]:t.states[s]&&(l[s]=[{s:t.states[s].state,a:t.states[s].attributes,lu:new Date(t.states[s].last_updated).getTime()/1e3}])})),!l)return{line:[],timeline:[]};Object.keys(l).forEach((e=>{const s=l[e];if(0===s.length)return;const m=(0,i.M)(e),d=e in t.states?t.states[e]:void 0,_=d||g(m)?void 0:s.find((t=>t.a&&v(t.a)));let h;h=H(m,d,_,a,r)?d?.attributes.unit_of_measurement||_?.a.unit_of_measurement||$:{zone:n("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[m];const f=O(h,{climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[m]||(d?.attributes||_?.a)?.device_class,o);h?f&&f in c&&e in c[f]?c[f][e].push(...s):f&&(f in c||(c[f]={}),c[f][e]=s):u.push(y(n,t.locale,t.config,t.entities,e,s,d))}));return{line:Object.keys(c).map((e=>{const s=e.split("_"),n=s[0],i=s[1]||void 0;return b(n,i,c[e],t.states)})),timeline:u}},O=(t,e,s)=>s?`${t}_${e||""}`:t,H=(t,e,s,n,i=!1)=>i||g(t)||null!=e&&v(e.attributes)||null!=e&&"sensor"===t&&w(e,n)||null!=s,j=(t,e,s=!0)=>{if(!e)return t;const n={...t,line:[]},i={};for(const e of t.line){const t=O(e.unit,e.device_class,s);t&&(i[t]={historyItem:e})}for(const t of e.line){const e=O(t.unit,t.device_class,s);e&&(e in i?i[e].ltsItem=t:i[e]={ltsItem:t})}for(const{historyItem:t,ltsItem:e}of Object.values(i)){if(!t||!e){n.line.push(t||e);continue}const s={...t,data:[]},i=new Set([...t.data.map((t=>t.entity_id)),...e.data.map((t=>t.entity_id))]);for(const n of i){const i=t.data.find((t=>t.entity_id===n)),a=e.data.find((t=>t.entity_id===n));if(!i||!a){s.data.push(i||a);continue}const o=i.states[0]?.last_changed||a.statistics[a.statistics.length-1].last_changed+1,r=[];for(const t of a.statistics){if(t.last_changed>=o)break;r.push(t)}s.data.push(0===r.length?i:{...i,statistics:r})}n.line.push(s)}return n};n()}catch(t){n(t)}}))}};
//# sourceMappingURL=25804.9376fc50e5f9fe8a.js.map