export const ids=["19551"];export const modules={84892:function(e,t,i){i.a(e,(async function(e,a){try{i.d(t,{O:()=>b});var o=i(44249),s=(i(92745),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(39527),i(41360),i(13334),i(57243)),n=i(15093),d=i(27486),r=i(69634),l=i(50875),h=i(72344),c=i(17705),u=(i(29937),i(20172)),v=i(50602),m=i(64214),y=i(57982),p=e([v,m,y]);[v,m,y]=p.then?(await p)():p;const b={mean:"mean",min:"min",max:"max",sum:"sum",state:"sum",change:"sum"};(0,o.Z)([(0,n.Mo)("statistics-chart")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"statisticsData",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"metadata",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"names",value:void 0},{kind:"field",decorators:[(0,n.Cb)()],key:"unit",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"endTime",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Array})],key:"statTypes",value:()=>["sum","min","mean","max"]},{kind:"field",decorators:[(0,n.Cb)({attribute:!1})],key:"chartType",value:()=>"line"},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Number})],key:"minYAxis",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:!1,type:Number})],key:"maxYAxis",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"fit-y-data",type:Boolean})],key:"fitYData",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:"hide-legend",type:Boolean})],key:"hideLegend",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:"logarithmic-scale",type:Boolean})],key:"logarithmicScale",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:"is-loading-data",type:Boolean})],key:"isLoadingData",value:()=>!1},{kind:"field",decorators:[(0,n.Cb)({attribute:"click-for-more-info",type:Boolean})],key:"clickForMoreInfo",value:()=>!0},{kind:"field",decorators:[(0,n.Cb)()],key:"period",value:void 0},{kind:"field",decorators:[(0,n.Cb)({attribute:"days-to-show",type:Number})],key:"daysToShow",value:void 0},{kind:"field",decorators:[(0,n.Cb)({type:String})],key:"height",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_chartData",value:()=>[]},{kind:"field",decorators:[(0,n.SB)()],key:"_legendData",value:()=>[]},{kind:"field",decorators:[(0,n.SB)()],key:"_statisticIds",value:()=>[]},{kind:"field",decorators:[(0,n.SB)()],key:"_chartOptions",value:void 0},{kind:"field",decorators:[(0,n.SB)()],key:"_hiddenStats",value:()=>new Set},{kind:"field",key:"_computedStyle",value:void 0},{kind:"method",key:"shouldUpdate",value:function(e){return e.size>1||!e.has("hass")}},{kind:"method",key:"willUpdate",value:function(e){(e.has("statisticsData")||e.has("statTypes")||e.has("chartType")||e.has("hideLegend")||e.has("_hiddenStats"))&&this._generateData(),(!this.hasUpdated||e.has("unit")||e.has("period")||e.has("chartType")||e.has("minYAxis")||e.has("maxYAxis")||e.has("fitYData")||e.has("logarithmicScale")||e.has("hideLegend")||e.has("_legendData"))&&this._createOptions()}},{kind:"method",key:"firstUpdated",value:function(){this._computedStyle=getComputedStyle(this)}},{kind:"method",key:"render",value:function(){return(0,h.p)(this.hass,"history")?this.isLoadingData&&!this.statisticsData?s.dy`<div class="info"> ${this.hass.localize("ui.components.statistics_charts.loading_statistics")} </div>`:this.statisticsData&&Object.keys(this.statisticsData).length?s.dy` <ha-chart-base .hass="${this.hass}" .data="${this._chartData}" .options="${this._chartOptions}" .height="${this.height}" style="${(0,r.V)({height:this.height})}" external-hidden @dataset-hidden="${this._datasetHidden}" @dataset-unhidden="${this._datasetUnhidden}"></ha-chart-base> `:s.dy`<div class="info"> ${this.hass.localize("ui.components.statistics_charts.no_statistics_found")} </div>`:s.dy`<div class="info"> ${this.hass.localize("ui.components.history_charts.history_disabled")} </div>`}},{kind:"method",key:"_datasetHidden",value:function(e){this._hiddenStats.add(e.detail.name),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_datasetUnhidden",value:function(e){this._hiddenStats.delete(e.detail.name),this.requestUpdate("_hiddenStats")}},{kind:"method",key:"_renderTooltip",value:function(e){return e.map(((e,t)=>{const i=`${(0,v.uf)(e.value[2]??e.value[1],this.hass.locale,(0,v.l4)(void 0,this.hass.entities[this._statisticIds[e.seriesIndex]]))} ${this.unit}`;return`${0===t?(0,m.E8)(new Date(e.value[0]),this.hass.locale,this.hass.config)+"<br>":""}${e.marker} ${e.seriesName}: ${i}\n      `})).join("<br>")}},{kind:"method",key:"_createOptions",value:function(){const e=this.hass.themes?.darkMode?{opacity:.15}:{},t=this.daysToShow??1;this._chartOptions={xAxis:{type:"time",axisLabel:(0,y.A)(this.hass.locale,this.hass.config,t),axisLine:{show:!1},splitLine:{show:!0,lineStyle:e},minInterval:t>=89?24192e5:t>2?864e5:void 0},yAxis:{type:this.logarithmicScale?"log":"value",name:this.unit,nameGap:2,nameTextStyle:{align:"left"},position:(0,u.HE)(this.hass)?"right":"left",scale:"bar"!==this.chartType,min:this.fitYData?void 0:this.minYAxis,max:this.fitYData?void 0:this.maxYAxis,splitLine:{show:!0,lineStyle:e}},legend:{show:!this.hideLegend,icon:"circle",padding:[20,0],data:this._legendData},grid:{...this.hideLegend?{top:this.unit?30:5}:{},left:20,right:1,bottom:0,containLabel:!0},tooltip:{trigger:"axis",appendTo:document.body,formatter:this._renderTooltip.bind(this)}}}},{kind:"field",key:"_getStatisticsMetaData",value(){return(0,d.Z)((async e=>{const t=await(0,c.Py)(this.hass,e),i={};return t.forEach((e=>{i[e.statistic_id]=e})),i}))}},{kind:"method",key:"_generateData",value:async function(){if(!this.statisticsData)return;const e=this.metadata||await this._getStatisticsMetaData(Object.keys(this.statisticsData));let t=0;const i=Object.entries(this.statisticsData),a=[],o=[],s=[];let n,d;if(0===i.length)return;n=this.endTime||new Date(Math.max(...i.map((([e,t])=>new Date(t[t.length-1].start).getTime())))),n>new Date&&(n=new Date);const r=this.names||{};i.forEach((([i,n])=>{const h=e?.[i];let u=r[i];void 0===u&&(u=(0,c.Kd)(this.hass,i,h)),this.unit||(void 0===d?d=(0,c.dO)(this.hass,i,h):null!==d&&d!==(0,c.dO)(this.hass,i,h)&&(d=null));let v,m=null;const y=[],p=[],b=(e,t,i)=>{i.length&&(e>t||(y.forEach(((t,a)=>{"line"===this.chartType&&v&&m&&v.getTime()!==e.getTime()&&(t.data.push([v,...m[a]]),t.data.push([v,null])),t.data.push([e,...i[a]])})),m=i,v=t))},k=(0,l.hZ)(t,this._computedStyle||getComputedStyle(this));t++;const f=[],g=this.statTypes.includes("mean")&&(0,c.Nw)(n,"mean"),_=g||this.statTypes.includes("min")&&(0,c.Nw)(n,"min")&&this.statTypes.includes("max")&&(0,c.Nw)(n,"max"),x=_?[...this.statTypes].sort(((e,t)=>"min"===e||"max"===t?-1:"max"===e||"min"===t?1:0)):this.statTypes;let C=!1;x.forEach((e=>{if((0,c.Nw)(n,e)){const t=_&&("min"===e||"max"===e);if(!this.hideLegend){const t=g?"mean"===e:!1===C;t&&p.push({name:u,color:k}),C=C||t}f.push(e);const a={id:`${i}-${e}`,type:this.chartType,data:[],name:u?`${u} (${this.hass.localize(`ui.components.statistics_charts.statistic_types.${e}`)})`:this.hass.localize(`ui.components.statistics_charts.statistic_types.${e}`),symbol:"circle",symbolSize:0,lineStyle:{width:1.5},color:t&&g?k+"3F":k};t&&(a.stack="band",a.symbol="none",a.lineStyle={opacity:0},_&&"max"===e&&(a.areaStyle={color:k+"3F"})),y.push(a),s.push(i)}}));let $=null,O=null;n.forEach((e=>{const t=new Date(e.start);if($===t)return;$=t;const i=[];f.forEach((t=>{const a=[];if("sum"===t)null==O?(a.push(0),O=e.sum):a.push((e.sum||0)-O);else if("max"===t){const t=e.max||0;a.push(t-(e.min||0)),a.push(t)}else a.push(e[t]??null);i.push(a)})),this._hiddenStats.has(u)||b(t,new Date(e.end),i)})),Array.prototype.push.apply(a,y),Array.prototype.push.apply(o,p)})),d&&(this.unit=d),o.forEach((({name:e,color:t})=>{a.push({id:e+"-legend",name:e,color:t,type:this.chartType,data:[]})})),this._chartData=a,o.length!==this._legendData.length&&(this._legendData=o.map((({name:e})=>e))),this._statisticIds=s}},{kind:"field",static:!0,key:"styles",value:()=>s.iv`:host{display:block;min-height:60px}.info{text-align:center;line-height:60px;color:var(--secondary-text-color)}`}]}}),s.oi);a()}catch(e){a(e)}}))},94279:function(e,t,i){var a=i(44249),o=i(72621),s=(i(39527),i(41360),i(2394)),n=(i(30080),i(43631)),d=i(57243),r=i(15093),l=i(20552),h=i(36522);i(23334),i(7285),i(83166);(0,n.hC)("vaadin-combo-box-item",d.iv`:host{padding:0!important}:host([focused]:not([disabled])){background-color:rgba(var(--rgb-primary-text-color,0,0,0),.12)}:host([selected]:not([disabled])){background-color:transparent;color:var(--mdc-theme-primary);--mdc-ripple-color:var(--mdc-theme-primary);--mdc-theme-text-primary-on-background:var(--mdc-theme-primary)}:host([selected]:not([disabled])):before{background-color:var(--mdc-theme-primary);opacity:.12;content:"";position:absolute;top:0;left:0;width:100%;height:100%}:host([selected][focused]:not([disabled])):before{opacity:.24}:host(:hover:not([disabled])){background-color:transparent}[part=content]{width:100%}[part=checkmark]{display:none}`);(0,a.Z)([(0,r.Mo)("ha-combo-box")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"validationMessage",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:"error-message"})],key:"errorMessage",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"invalid",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"icon",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"items",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"filteredItems",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"dataProvider",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:"allow-custom-value",type:Boolean})],key:"allowCustomValue",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({attribute:"item-value-path"})],key:"itemValuePath",value:()=>"value"},{kind:"field",decorators:[(0,r.Cb)({attribute:"item-label-path"})],key:"itemLabelPath",value:()=>"label"},{kind:"field",decorators:[(0,r.Cb)({attribute:"item-id-path"})],key:"itemIdPath",value:void 0},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"renderer",value:void 0},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"required",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean,reflect:!0})],key:"opened",value:()=>!1},{kind:"field",decorators:[(0,r.IO)("vaadin-combo-box-light",!0)],key:"_comboBox",value:void 0},{kind:"field",decorators:[(0,r.IO)("ha-textfield",!0)],key:"_inputElement",value:void 0},{kind:"field",key:"_overlayMutationObserver",value:void 0},{kind:"field",key:"_bodyMutationObserver",value:void 0},{kind:"method",key:"open",value:async function(){await this.updateComplete,this._comboBox?.open()}},{kind:"method",key:"focus",value:async function(){await this.updateComplete,await(this._inputElement?.updateComplete),this._inputElement?.focus()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)(i,"disconnectedCallback",this,3)([]),this._overlayMutationObserver&&(this._overlayMutationObserver.disconnect(),this._overlayMutationObserver=void 0),this._bodyMutationObserver&&(this._bodyMutationObserver.disconnect(),this._bodyMutationObserver=void 0)}},{kind:"get",key:"selectedItem",value:function(){return this._comboBox.selectedItem}},{kind:"method",key:"setInputValue",value:function(e){this._comboBox.value=e}},{kind:"method",key:"render",value:function(){return d.dy` <vaadin-combo-box-light .itemValuePath="${this.itemValuePath}" .itemIdPath="${this.itemIdPath}" .itemLabelPath="${this.itemLabelPath}" .items="${this.items}" .value="${this.value||""}" .filteredItems="${this.filteredItems}" .dataProvider="${this.dataProvider}" .allowCustomValue="${this.allowCustomValue}" .disabled="${this.disabled}" .required="${this.required}" ${(0,s.t)(this.renderer||this._defaultRowRenderer)} @opened-changed="${this._openedChanged}" @filter-changed="${this._filterChanged}" @value-changed="${this._valueChanged}" attr-for-value="value"> <ha-textfield label="${(0,l.o)(this.label)}" placeholder="${(0,l.o)(this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" validationMessage="${(0,l.o)(this.validationMessage)}" .errorMessage="${this.errorMessage}" class="input" autocapitalize="none" autocomplete="off" autocorrect="off" input-spellcheck="false" .suffix="${d.dy`<div style="width:28px" role="none presentation"></div>`}" .icon="${this.icon}" .invalid="${this.invalid}" .helper="${this.helper}" helperPersistent> <slot name="icon" slot="leadingIcon"></slot> </ha-textfield> ${this.value?d.dy`<ha-svg-icon role="button" tabindex="-1" aria-label="${(0,l.o)(this.hass?.localize("ui.common.clear"))}" class="clear-button" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" @click="${this._clearValue}"></ha-svg-icon>`:""} <ha-svg-icon role="button" tabindex="-1" aria-label="${(0,l.o)(this.label)}" aria-expanded="${this.opened?"true":"false"}" class="toggle-button" .path="${this.opened?"M7,15L12,10L17,15H7Z":"M7,10L12,15L17,10H7Z"}" @click="${this._toggleOpen}"></ha-svg-icon> </vaadin-combo-box-light> `}},{kind:"field",key:"_defaultRowRenderer",value(){return e=>d.dy`<ha-list-item> ${this.itemLabelPath?e[this.itemLabelPath]:e} </ha-list-item>`}},{kind:"method",key:"_clearValue",value:function(e){e.stopPropagation(),(0,h.B)(this,"value-changed",{value:void 0})}},{kind:"method",key:"_toggleOpen",value:function(e){this.opened?(this._comboBox?.close(),e.stopPropagation()):this._comboBox?.inputElement.focus()}},{kind:"method",key:"_openedChanged",value:function(e){e.stopPropagation();const t=e.detail.value;if(setTimeout((()=>{this.opened=t}),0),(0,h.B)(this,"opened-changed",{value:e.detail.value}),t){const e=document.querySelector("vaadin-combo-box-overlay");e&&this._removeInert(e),this._observeBody()}else this._bodyMutationObserver?.disconnect(),this._bodyMutationObserver=void 0}},{kind:"method",key:"_observeBody",value:function(){"MutationObserver"in window&&!this._bodyMutationObserver&&(this._bodyMutationObserver=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&this._removeInert(e)})),e.removedNodes.forEach((e=>{"VAADIN-COMBO-BOX-OVERLAY"===e.nodeName&&(this._overlayMutationObserver?.disconnect(),this._overlayMutationObserver=void 0)}))}))})),this._bodyMutationObserver.observe(document.body,{childList:!0}))}},{kind:"method",key:"_removeInert",value:function(e){if(e.inert)return e.inert=!1,this._overlayMutationObserver?.disconnect(),void(this._overlayMutationObserver=void 0);"MutationObserver"in window&&!this._overlayMutationObserver&&(this._overlayMutationObserver=new MutationObserver((e=>{e.forEach((e=>{if("inert"===e.attributeName){const t=e.target;t.inert&&(this._overlayMutationObserver?.disconnect(),this._overlayMutationObserver=void 0,t.inert=!1)}}))})),this._overlayMutationObserver.observe(e,{attributes:!0}))}},{kind:"method",key:"_filterChanged",value:function(e){e.stopPropagation(),(0,h.B)(this,"filter-changed",{value:e.detail.value})}},{kind:"method",key:"_valueChanged",value:function(e){e.stopPropagation(),this.allowCustomValue||(this._comboBox._closeOnBlurIsPrevented=!0);const t=e.detail.value;t!==this.value&&(0,h.B)(this,"value-changed",{value:t||void 0})}},{kind:"field",static:!0,key:"styles",value:()=>d.iv`:host{display:block;width:100%}vaadin-combo-box-light{position:relative;--vaadin-combo-box-overlay-max-height:calc(45vh - 56px)}ha-textfield{width:100%}ha-textfield>ha-icon-button{--mdc-icon-button-size:24px;padding:2px;color:var(--secondary-text-color)}ha-svg-icon{color:var(--input-dropdown-icon-color);position:absolute;cursor:pointer}.toggle-button{right:12px;top:-10px;inset-inline-start:initial;inset-inline-end:12px;direction:var(--direction)}:host([opened]) .toggle-button{color:var(--primary-color)}.clear-button{--mdc-icon-size:20px;top:-7px;right:36px;inset-inline-start:initial;inset-inline-end:36px;direction:var(--direction)}`}]}}),d.oi)},73192:function(e,t,i){i.d(t,{R:()=>a});const a=(e,t)=>`https://${e.config.version.includes("b")?"rc":e.config.version.includes("dev")?"next":"www"}.home-assistant.io${t}`}};
//# sourceMappingURL=19551.fd16b9cc65ee31d2.js.map