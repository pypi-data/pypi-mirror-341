import{r as o,j as t}from"./jsx-runtime-CNvHvvCs.js";const f=o.createContext(null);function p({children:e}){const[c,r]=o.useState(null),[i,l]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{const s=await d(),a=await fetch("/api/v1/config",{credentials:"include",headers:{"X-CSRF-TOKEN":s??""}});if(!a.ok)throw new Error("Failed to fetch config.");const n=await a.json(),u={configServerUrl:n.frontend_server_url,configAuthLoginUrl:n.frontend_auth_login_url,configUseAuthorization:n.frontend_use_authorization,configWelcomeMessage:n.frontend_welcome_message,configRedirectUrl:n.frontend_redirect_url,configCollectFeedback:n.frontend_collect_feedback,configBotName:n.frontend_bot_name};r(u)}catch(s){console.error("Error fetching config:",s)}finally{l(!1)}})()},[]),i||!c?t.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solace-green mx-auto mb-4"}),t.jsx("h1",{className:"text-2xl mb-4 text-black dark:text-white",children:"Loading Config..."})]})}):t.jsx(f.Provider,{value:c,children:e})}function x(){const e=o.useContext(f);if(!e)throw new Error("useConfig must be used within a <ConfigProvider>.");return e}async function d(){try{await fetch("/api/v1/csrf-token",{credentials:"include"});const e=g("csrf_token");if(!e)throw new Error("CSRF token not set in cookie");return e}catch(e){return console.error("Error fetching CSRF token:",e),null}}function g(e){var i;const r=`; ${document.cookie}`.split(`; ${e}=`);return r.length===2&&((i=r.pop())==null?void 0:i.split(";").shift())||null}export{p as C,g as a,d as g,x as u};
