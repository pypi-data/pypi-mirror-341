# [movatalk](http://lib.movatalk.com)

# movatalk

![movatalk Logo](docs/images/logo.png)

Biblioteka Python do tworzenia bezpiecznych interfejs√≥w g≈Çosowych AI dla dzieci, z przetwarzaniem na urzƒÖdzeniu i kontrolƒÖ rodzicielskƒÖ.

[![PyPI version](https://badge.fury.io/py/movatalk.svg)](https://badge.fury.io/py/movatalk)
[![GitLab Pipeline Status](https://gitlab.com/yourusername/movatalk/badges/main/pipeline.svg)](https://gitlab.com/yourusername/movatalk/-/commits/main)

## O projekcie

movatalk to biblioteka open source zaprojektowana do tworzenia bezpiecznych urzƒÖdze≈Ñ g≈Çosowych dla dzieci, kt√≥re wykorzystujƒÖ technologie sztucznej inteligencji przy zachowaniu prywatno≈õci i kontroli rodzicielskiej. Inspirowana koncepcjƒÖ urzƒÖdzenia MovaPad, biblioteka umo≈ºliwia przetwarzanie mowy na tekst (STT) i tekstu na mowƒô (TTS) bezpo≈õrednio na urzƒÖdzeniu, zapewniajƒÖc ochronƒô wra≈ºliwych danych.

### Kluczowe funkcje

- üé§ **Przetwarzanie audio** - Nagrywanie, filtrowanie i przetwarzanie d≈∫wiƒôku
- üó£Ô∏è **Lokalne STT i TTS** - Konwersja mowy na tekst i tekstu na mowƒô na urzƒÖdzeniu
- üîí **Kontrola rodzicielska** - Filtrowanie tre≈õci, limity czasowe, bezpieczne po≈ÇƒÖczenia
- üîã **ZarzƒÖdzanie energiƒÖ** - Optymalizacja zu≈ºycia baterii
- üåê **Opcjonalne integracje z AI** - Bezpieczne po≈ÇƒÖczenia z API AI
- üì± **Interfejs sprzƒôtowy** - Wsparcie dla przycisk√≥w, diod LED i innych komponent√≥w

## Instalacja

### Z PyPI

```bash
pip install movatalk
```

### Z GitLab

```bash
pip install git+https://gitlab.com/yourusername/movatalk.git
```

### Klonowanie repozytorium

```bash
git clone https://gitlab.com/yourusername/movatalk.git
cd movatalk
pip install -e .
```

### Instalacja na Raspberry Pi Zero 2 W

Dla pe≈Çnej instalacji na Raspberry Pi Zero 2 W, zalecamy u≈ºycie naszych skrypt√≥w instalacyjnych:

```bash
git clone https://gitlab.com/yourusername/movatalk.git
cd movatalk
sudo bash scripts/install_dependencies.sh
bash scripts/install_models.sh
pip install -e .
sudo bash scripts/setup_service.sh
```

## Szybki start

```python
from movatalk.audio import AudioProcessor, WhisperSTT, PiperTTS
from movatalk.api import SafeAPIConnector
from movatalk.safety import ParentalControl

# Inicjalizacja komponent√≥w
audio = AudioProcessor()
stt = WhisperSTT()
tts = PiperTTS()
api = SafeAPIConnector()
parental = ParentalControl()

# Nagrywanie i przetwarzanie
audio_file = audio.start_recording(duration=5)
transcript = stt.transcribe(audio_file)
print(f"Rozpoznany tekst: {transcript}")

# Filtrowanie i API
filtered_input, filter_message = parental.filter_input(transcript)
if filtered_input:
    response = api.query_llm(filtered_input)
    filtered_response = parental.filter_output(response)
    tts.speak(filtered_response)
else:
    tts.speak(filter_message)
```

Wiƒôcej przyk≈Çad√≥w znajdziesz w katalogu [examples/](examples/).

## Wymagania sprzƒôtowe

Minimalne wymagania:
- Raspberry Pi Zero 2 W lub podobne urzƒÖdzenie
- Mikrofon (np. ReSpeaker 2-Mic Pi HAT)
- G≈Ço≈õnik/wzmacniacz
- Przyciski i diody LED (opcjonalnie)
- Bateria (opcjonalnie)

Pe≈ÇnƒÖ listƒô wspieranych platform znajdziesz w [docs/hardware_setup.md](docs/hardware_setup.md).

## Dokumentacja

Pe≈Çna dokumentacja dostƒôpna jest w katalogu [docs/](docs/):

- [Instalacja](docs/installation.md)
- [Konfiguracja sprzƒôtowa](docs/hardware_setup.md)
- [Referencja API](docs/api_reference.md)
- [Przyk≈Çady u≈ºycia](docs/examples.md)

## Wsp√≥≈Çpraca nad projektem

Zachƒôcamy do wsp√≥≈Çpracy nad rozwojem projektu movatalk! Aby dowiedzieƒá siƒô wiƒôcej, przeczytaj [CONTRIBUTING.md](CONTRIBUTING.md).

## Licencja

Ten projekt jest dostƒôpny na licencji MIT. Zobacz plik [LICENSE](LICENSE) dla szczeg√≥≈Ç√≥w.

## Autorzy

movatalk jest rozwijany przez spo≈Çeczno≈õƒá Open Source, zainspirowany koncepcjƒÖ urzƒÖdzenia MovaPad.

## Kontakt

- GitLab: https://gitlab.com/yourusername/movatalk
- Email: contact@example.com

# System pipelin√≥w movatalk

System pipelin√≥w movatalk umo≈ºliwia tworzenie z≈Ço≈ºonych aplikacji g≈Çosowych za pomocƒÖ prostych plik√≥w konfiguracyjnych YAML, bez konieczno≈õci pisania kodu w Pythonie. Pipelines ≈ÇƒÖczƒÖ gotowe komponenty i operacje w jeden sp√≥jny przep≈Çyw pracy.

## Spis tre≈õci

1. [Wprowadzenie do pipelin√≥w](#wprowadzenie-do-pipelin√≥w)
2. [Struktura pliku YAML](#struktura-pliku-yaml)
3. [Komponenty pipelin√≥w](#komponenty-pipelin√≥w)
4. [Zmienne i kontekst](#zmienne-i-kontekst)
5. [Kroki warunkowe i pƒôtle](#kroki-warunkowe-i-pƒôtle)
6. [Programistyczne u≈ºycie pipelin√≥w](#programistyczne-u≈ºycie-pipelin√≥w)
7. [Tworzenie w≈Çasnych komponent√≥w](#tworzenie-w≈Çasnych-komponent√≥w)
8. [Kreator pipelin√≥w](#kreator-pipelin√≥w)
9. [Wizualizacja pipelin√≥w](#wizualizacja-pipelin√≥w)
10. [Przyk≈Çady](#przyk≈Çady)

## Wprowadzenie do pipelin√≥w

Pipeline to sekwencja krok√≥w, kt√≥re sƒÖ wykonywane kolejno, aby osiƒÖgnƒÖƒá okre≈õlony cel. W kontek≈õcie movatalk, pipeline mo≈ºe reprezentowaƒá na przyk≈Çad asystenta g≈Çosowego, kt√≥ry:

1. S≈Çucha pytania u≈ºytkownika
2. Przetwarza mowƒô na tekst
3. Wysy≈Ça zapytanie do modelu jƒôzykowego
4. Filtruje odpowied≈∫ pod kƒÖtem bezpiecze≈Ñstwa
5. Zamienia tekst na mowƒô i odtwarza odpowied≈∫

Zamiast pisaƒá kod w Pythonie, mo≈ºesz zdefiniowaƒá taki przep≈Çyw pracy w pliku YAML, kt√≥ry jest ≈Çatwy do czytania i modyfikacji.

## Struktura pliku YAML

Plik pipeline'u YAML sk≈Çada siƒô z nastƒôpujƒÖcych element√≥w:

```yaml
name: "Nazwa pipeline'u"
description: "Opis dzia≈Çania pipeline'u"
version: "1.0.0"

variables:
  zmienna1: "warto≈õƒá1"
  zmienna2: "warto≈õƒá2"

steps:
  - name: "k
```


## Install


```bash
pip install movatalk
```

```bash
git clone https://github.com/movatalk/python.git movatalk
```


## Contributing

```bash
python3 -m venv pytest-env
source pytest-env/bin/activate
```

```bash
pip install --upgrade pip
pip install pytest
```

run the test, execute the pytest command:
```bash
pytest
```



## Tips

simple method to generate a requirements.txt file is to pipe them,
```bash
pip freeze > requirements.txt
pip freeze > requirements/runtime.txt
```

## if push not possible

```
[remote rejected] (refusing to allow a Personal Access Token to create or update workflow `.github/workflows/python-app.yml` without `workflow` scope)
```

Problem z odrzuceniem tokena dostƒôpu osobistego (Personal Access Token, PAT) podczas pr√≥by aktualizacji pliku workflow, 
musisz zaktualizowaƒá uprawnienia swojego tokena. 

### Oto kroki, kt√≥re powiniene≈õ podjƒÖƒá:

1. Przejd≈∫ do ustawie≈Ñ GitHub:
   - Kliknij na sw√≥j awatar w prawym g√≥rnym rogu GitHub
   - Wybierz "Settings"

2. Przejd≈∫ do ustawie≈Ñ deweloperskich:
   - W lewym menu wybierz "Developer settings"

3. ZarzƒÖdzaj tokenami dostƒôpu:
   - Wybierz "Personal access tokens"
   - Nastƒôpnie "Tokens (classic)"

4. Utw√≥rz nowy token lub zaktualizuj istniejƒÖcy:
   - Je≈õli tworzysz nowy, kliknij "Generate new token"
   - Je≈õli aktualizujesz istniejƒÖcy, znajd≈∫ odpowiedni token i kliknij "Edit"

5. Dodaj uprawnienie "workflow":
   - Przewi≈Ñ do sekcji "Select scopes"
   - Zaznacz pole obok "workflow"

6. Zapisz zmiany:
   - Przewi≈Ñ na d√≥≈Ç i kliknij "Generate token" (dla nowego) lub "Update token" (dla istniejƒÖcego)

7. Skopiuj nowy token:
   - Upewnij siƒô, ≈ºe skopiowa≈Çe≈õ nowy token, poniewa≈º nie bƒôdziesz m√≥g≈Ç go zobaczyƒá ponownie

8. Zaktualizuj token w swoim lokalnym repozytorium:
   - Je≈õli u≈ºywasz HTTPS, zaktualizuj swoje dane logowania
   - Je≈õli u≈ºywasz SSH, upewnij siƒô, ≈ºe Tw√≥j klucz SSH jest poprawnie skonfigurowany

9. Spr√≥buj ponownie wykonaƒá push:
   - U≈ºyj nowego tokena do autoryzacji

Pamiƒôtaj, ≈ºe tokeny dostƒôpu osobistego sƒÖ bardzo wra≈ºliwe na bezpiecze≈Ñstwo.
Traktuj je jak has≈Ça i nigdy nie udostƒôpniaj ich publicznie. Je≈õli przypadkowo ujawnisz sw√≥j token, natychmiast go usu≈Ñ i wygeneruj nowy.

Po wykonaniu tych krok√≥w, powiniene≈õ byƒá w stanie zaktualizowaƒá plik workflow bez problem√≥w. Je≈õli nadal napotkasz problemy, upewnij siƒô, ≈ºe masz odpowiednie uprawnienia w repozytorium i ≈ºe workflow nie sƒÖ zablokowane przez ustawienia organizacji lub repozytorium.

# update PAT in repo
our local repo and want to push it to a remote repo.

create a PAT (personal access token): official doc here. Make sure to tick the box "workflow" when creating it.
In the terminal, instead of the classic

```bash
git remote add origin https://github.com/<account>/<repo>.git
```

swap it by
```bash
git remote add origin https://<PAT>@github.com/<account>/<repo>.git
```
example
```bash
# check
git remote -v
PAT=...
git remote add origin https://$PAT@github.com/movatalk/python.git
# OR update:
git remote set-url origin https://$PAT@github.com/movatalk/python.git
# check
git remote -v
git push
```

Follow-up with the classic git branch -M main and git push -u origin main

That worked for me. Hopefully for you too.

## pypi publishing

[Creating a PyPI Project with a Trusted Publisher - PyPI Docs](https://docs.pypi.org/trusted-publishers/creating-a-project-through-oidc/)



## Creating tags from the command line

To create a tag on your current branch, run this:
```bash
git tag <tagname>
```

If you want to include a description with your tag, add -a to create an annotated tag:
```bash
git tag <tagname> -a
```

This will create a local tag with the current state of the branch you are on. 
When pushing to your remote repo, tags are NOT included by default. 
You will need to explicitly say that you want to push your tags to your remote repo:
```bash
git push origin --tags
```

example:

```bash
git tag 0.1.12
git push origin --tags
```



## test

```bash
pip install build
pip install build hatchling
```


```bash
py -m build
```







## Quick Start

### Local Development
1. Create virtual environment
```bash
rm -rf venv
python -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

I see a persistent issue with your package publication process. Let me help you resolve these problems:

1. Version Detection Problem
The error messages show that the version is not being correctly detected:
```
‚ùå Could not find version in src/movatalk/__init__.py
‚ùå Could not find version in ./src/movatalk/_version.py
‚ùå Could not find version in ./pyproject.toml
```

2. License Classifier Issue
There's an ongoing problem with the license classifier in the `pyproject.toml`.

1. Replace your existing `pyproject.toml` with the new version
2. Create `src/movatalk/_version.py` with the content I provided
3. Remove any existing `setup.py` if it exists
4. Use `python -m build` to create distribution
5. Use `twine upload dist/*` to publish

Recommended workflow:
```bash
# Ensure you're in your project root
python -m pip install --upgrade build twine
python -m build
python -m twine upload dist/*
```
